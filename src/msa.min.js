!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";var d=c(1),e=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(d);c(128);var f=e.default;for(var g in e)e.hasOwnProperty(g)&&(f[g]=e[g]);window&&(window.msa=f),a.exports=f},function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0}),b.version=b.io=b.boneView=b.view=b.selcol=b.selection=b.utils=b.model=b.msa=void 0;var f=c(2);Object.defineProperty(b,"selection",{enumerable:!0,get:function(){return e(f).default}});var g=c(13);Object.defineProperty(b,"selcol",{enumerable:!0,get:function(){return e(g).default}});var h=c(14);Object.defineProperty(b,"view",{enumerable:!0,get:function(){return e(h).default}});var i=c(16);Object.defineProperty(b,"boneView",{enumerable:!0,get:function(){return e(i).default}});var j=c(17),k=e(j),l=c(127),m=d(l),n=c(121),o=d(n),p=c(67),q=function(){var a=function(a){return k.default.apply(this,a)};return a.prototype=k.default.prototype,new a(arguments)};b.default=q,b.msa=k.default,b.model=m,b.utils=o,b.$=c(15);var r={xhr:c(70),fasta:p.fasta,clustal:p.clustal,gff:p.gff};b.io=r;var s="imported";s="0.0.0";b.version=s},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.columnsel=b.rowsel=b.possel=b.sel=void 0;var d=c(3),e=c(6).Model,f=e.extend({defaults:{type:"super"}}),g=f.extend({defaults:(0,d.extend)({},f.prototype.defaults,{type:"row",seqId:""}),inRow:function(a){return a===this.get("seqId")},inColumn:function(a){return!0},getLength:function(){return 1}}),h=f.extend({defaults:(0,d.extend)({},f.prototype.defaults,{type:"column",xStart:-1,xEnd:-1}),inRow:function(){return!0},inColumn:function(a){return xStart<=a&&a<=xEnd},getLength:function(){return xEnd-xStart}}),i=g.extend((0,d.extend)({},(0,d.pick)(h,"inColumn"),(0,d.pick)(h,"getLength"),{defaults:(0,d.extend)({},h.prototype.defaults,g.prototype.defaults,{type:"pos"})}));b.sel=f,b.possel=i,b.rowsel=g,b.columnsel=h},function(a,b,c){var d;(function(a,e){"use strict";var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};(function(){function g(a,b){return a.set(b[0],b[1]),a}function h(a,b){return a.add(b),a}function i(a,b,c){switch(c.length){case 0:return a.call(b);case 1:return a.call(b,c[0]);case 2:return a.call(b,c[0],c[1]);case 3:return a.call(b,c[0],c[1],c[2])}return a.apply(b,c)}function j(a,b,c,d){for(var e=-1,f=null==a?0:a.length;++e<f;){var g=a[e];b(d,g,c(g),a)}return d}function k(a,b){for(var c=-1,d=null==a?0:a.length;++c<d&&!1!==b(a[c],c,a););return a}function l(a,b){for(var c=null==a?0:a.length;c--&&!1!==b(a[c],c,a););return a}function m(a,b){for(var c=-1,d=null==a?0:a.length;++c<d;)if(!b(a[c],c,a))return!1;return!0}function n(a,b){for(var c=-1,d=null==a?0:a.length,e=0,f=[];++c<d;){var g=a[c];b(g,c,a)&&(f[e++]=g)}return f}function o(a,b){return!!(null==a?0:a.length)&&z(a,b,0)>-1}function p(a,b,c){for(var d=-1,e=null==a?0:a.length;++d<e;)if(c(b,a[d]))return!0;return!1}function q(a,b){for(var c=-1,d=null==a?0:a.length,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}function r(a,b){for(var c=-1,d=b.length,e=a.length;++c<d;)a[e+c]=b[c];return a}function s(a,b,c,d){var e=-1,f=null==a?0:a.length;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}function t(a,b,c,d){var e=null==a?0:a.length;for(d&&e&&(c=a[--e]);e--;)c=b(c,a[e],e,a);return c}function u(a,b){for(var c=-1,d=null==a?0:a.length;++c<d;)if(b(a[c],c,a))return!0;return!1}function v(a){return a.split("")}function w(a){return a.match(Mb)||[]}function x(a,b,c){var d;return c(a,function(a,c,e){if(b(a,c,e))return d=c,!1}),d}function y(a,b,c,d){for(var e=a.length,f=c+(d?1:-1);d?f--:++f<e;)if(b(a[f],f,a))return f;return-1}function z(a,b,c){return b===b?$(a,b,c):y(a,B,c)}function A(a,b,c,d){for(var e=c-1,f=a.length;++e<f;)if(d(a[e],b))return e;return-1}function B(a){return a!==a}function C(a,b){var c=null==a?0:a.length;return c?H(a,b)/c:Ka}function D(a){return function(b){return null==b?fa:b[a]}}function E(a){return function(b){return null==a?fa:a[b]}}function F(a,b,c,d,e){return e(a,function(a,e,f){c=d?(d=!1,a):b(c,a,e,f)}),c}function G(a,b){var c=a.length;for(a.sort(b);c--;)a[c]=a[c].value;return a}function H(a,b){for(var c,d=-1,e=a.length;++d<e;){var f=b(a[d]);f!==fa&&(c=c===fa?f:c+f)}return c}function I(a,b){for(var c=-1,d=Array(a);++c<a;)d[c]=b(c);return d}function J(a,b){return q(b,function(b){return[b,a[b]]})}function K(a){return function(b){return a(b)}}function L(a,b){return q(b,function(b){return a[b]})}function M(a,b){return a.has(b)}function N(a,b){for(var c=-1,d=a.length;++c<d&&z(b,a[c],0)>-1;);return c}function O(a,b){for(var c=a.length;c--&&z(b,a[c],0)>-1;);return c}function P(a,b){for(var c=a.length,d=0;c--;)a[c]===b&&++d;return d}function Q(a){return"\\"+wc[a]}function R(a,b){return null==a?fa:a[b]}function S(a){return nc.test(a)}function T(a){return oc.test(a)}function U(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c}function V(a){var b=-1,c=Array(a.size);return a.forEach(function(a,d){c[++b]=[d,a]}),c}function W(a,b){return function(c){return a(b(c))}}function X(a,b){for(var c=-1,d=a.length,e=0,f=[];++c<d;){var g=a[c];g!==b&&g!==la||(a[c]=la,f[e++]=c)}return f}function Y(a){var b=-1,c=Array(a.size);return a.forEach(function(a){c[++b]=a}),c}function Z(a){var b=-1,c=Array(a.size);return a.forEach(function(a){c[++b]=[a,a]}),c}function $(a,b,c){for(var d=c-1,e=a.length;++d<e;)if(a[d]===b)return d;return-1}function _(a,b,c){for(var d=c+1;d--;)if(a[d]===b)return d;return d}function aa(a){return S(a)?ca(a):Nc(a)}function ba(a){return S(a)?da(a):v(a)}function ca(a){for(var b=lc.lastIndex=0;lc.test(a);)++b;return b}function da(a){return a.match(lc)||[]}function ea(a){return a.match(mc)||[]}var fa,ga=200,ha="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",ia="Expected a function",ja="__lodash_hash_undefined__",ka=500,la="__lodash_placeholder__",ma=1,na=2,oa=4,pa=1,qa=2,ra=1,sa=2,ta=4,ua=8,va=16,wa=32,xa=64,ya=128,za=256,Aa=512,Ba=30,Ca="...",Da=800,Ea=16,Fa=1,Ga=2,Ha=1/0,Ia=9007199254740991,Ja=1.7976931348623157e308,Ka=NaN,La=4294967295,Ma=La-1,Na=La>>>1,Oa=[["ary",ya],["bind",ra],["bindKey",sa],["curry",ua],["curryRight",va],["flip",Aa],["partial",wa],["partialRight",xa],["rearg",za]],Pa="[object Arguments]",Qa="[object Array]",Ra="[object AsyncFunction]",Sa="[object Boolean]",Ta="[object Date]",Ua="[object DOMException]",Va="[object Error]",Wa="[object Function]",Xa="[object GeneratorFunction]",Ya="[object Map]",Za="[object Number]",$a="[object Null]",_a="[object Object]",ab="[object Proxy]",bb="[object RegExp]",cb="[object Set]",db="[object String]",eb="[object Symbol]",fb="[object Undefined]",gb="[object WeakMap]",hb="[object WeakSet]",ib="[object ArrayBuffer]",jb="[object DataView]",kb="[object Float32Array]",lb="[object Float64Array]",mb="[object Int8Array]",nb="[object Int16Array]",ob="[object Int32Array]",pb="[object Uint8Array]",qb="[object Uint8ClampedArray]",rb="[object Uint16Array]",sb="[object Uint32Array]",tb=/\b__p \+= '';/g,ub=/\b(__p \+=) '' \+/g,vb=/(__e\(.*?\)|\b__t\)) \+\n'';/g,wb=/&(?:amp|lt|gt|quot|#39);/g,xb=/[&<>"']/g,yb=RegExp(wb.source),zb=RegExp(xb.source),Ab=/<%=([\s\S]+?)%>/g,Bb=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Cb=/^\w*$/,Db=/^\./,Eb=/[\\^$.*+?()[\]{}|]/g,Fb=RegExp(Eb.source),Gb=/^\s+|\s+$/g,Hb=/^\s+/,Ib=/\s+$/,Jb=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Kb=/\{\n\/\* \[wrapped with (.+)\] \*/,Lb=/,? & /,Mb=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Nb=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ob=/\w*$/,Pb=/^[-+]0x[0-9a-f]+$/i,Qb=/^0b[01]+$/i,Rb=/^\[object .+?Constructor\]$/,Sb=/^0o[0-7]+$/i,Tb=/^(?:0|[1-9]\d*)$/,Ub=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Vb=/($^)/,Wb=/['\n\r\u2028\u2029\\]/g,Xb="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Yb="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Zb="["+Xb+"]",$b="[a-z\\xdf-\\xf6\\xf8-\\xff]",_b="[^\\ud800-\\udfff"+Yb+"\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",ac="\\ud83c[\\udffb-\\udfff]",bc="(?:\\ud83c[\\udde6-\\uddff]){2}",cc="[\\ud800-\\udbff][\\udc00-\\udfff]",dc="[A-Z\\xc0-\\xd6\\xd8-\\xde]",ec="(?:"+Zb+"|"+ac+")?",fc="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",bc,cc].join("|")+")[\\ufe0e\\ufe0f]?"+ec+")*",gc="[\\ufe0e\\ufe0f]?"+ec+fc,hc="(?:"+["[\\u2700-\\u27bf]",bc,cc].join("|")+")"+gc,ic="(?:"+["[^\\ud800-\\udfff]"+Zb+"?",Zb,bc,cc,"[\\ud800-\\udfff]"].join("|")+")",jc=RegExp("['’]","g"),kc=RegExp(Zb,"g"),lc=RegExp(ac+"(?="+ac+")|"+ic+gc,"g"),mc=RegExp([dc+"?"+$b+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+["["+Yb+"]",dc,"$"].join("|")+")","(?:"+dc+"|"+_b+")+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+["["+Yb+"]",dc+"(?:"+$b+"|"+_b+")","$"].join("|")+")",dc+"?(?:"+$b+"|"+_b+")+(?:['’](?:d|ll|m|re|s|t|ve))?",dc+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)","\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)","\\d+",hc].join("|"),"g"),nc=RegExp("[\\u200d\\ud800-\\udfff"+Xb+"\\ufe0e\\ufe0f]"),oc=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,pc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],qc=-1,rc={};rc[kb]=rc[lb]=rc[mb]=rc[nb]=rc[ob]=rc[pb]=rc[qb]=rc[rb]=rc[sb]=!0,rc[Pa]=rc[Qa]=rc[ib]=rc[Sa]=rc[jb]=rc[Ta]=rc[Va]=rc[Wa]=rc[Ya]=rc[Za]=rc[_a]=rc[bb]=rc[cb]=rc[db]=rc[gb]=!1;var sc={};sc[Pa]=sc[Qa]=sc[ib]=sc[jb]=sc[Sa]=sc[Ta]=sc[kb]=sc[lb]=sc[mb]=sc[nb]=sc[ob]=sc[Ya]=sc[Za]=sc[_a]=sc[bb]=sc[cb]=sc[db]=sc[eb]=sc[pb]=sc[qb]=sc[rb]=sc[sb]=!0,sc[Va]=sc[Wa]=sc[gb]=!1;var tc={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},uc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},vc={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},wc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},xc=parseFloat,yc=parseInt,zc="object"==(void 0===a?"undefined":f(a))&&a&&a.Object===Object&&a,Ac="object"==("undefined"==typeof self?"undefined":f(self))&&self&&self.Object===Object&&self,Bc=zc||Ac||Function("return this")(),Cc="object"==f(b)&&b&&!b.nodeType&&b,Dc=Cc&&"object"==f(e)&&e&&!e.nodeType&&e,Ec=Dc&&Dc.exports===Cc,Fc=Ec&&zc.process,Gc=function(){try{return Fc&&Fc.binding&&Fc.binding("util")}catch(a){}}(),Hc=Gc&&Gc.isArrayBuffer,Ic=Gc&&Gc.isDate,Jc=Gc&&Gc.isMap,Kc=Gc&&Gc.isRegExp,Lc=Gc&&Gc.isSet,Mc=Gc&&Gc.isTypedArray,Nc=D("length"),Oc=E(tc),Pc=E(uc),Qc=E(vc),Rc=function a(b){function c(a){if(ai(a)&&!lm(a)&&!(a instanceof v)){if(a instanceof e)return a;if(lk.call(a,"__wrapped__"))return Zf(a)}return new e(a)}function d(){}function e(a,b){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=fa}function v(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=La,this.__views__=[]}function E(){var a=new v(this.__wrapped__);return a.__actions__=Ie(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=Ie(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=Ie(this.__views__),a}function $(){if(this.__filtered__){var a=new v(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function ca(){var a=this.__wrapped__.value(),b=this.__dir__,c=lm(a),d=b<0,e=c?a.length:0,f=vf(0,e,this.__views__),g=f.start,h=f.end,i=h-g,j=d?h:g-1,k=this.__iteratees__,l=k.length,m=0,n=Pk(i,this.__takeCount__);if(!c||e<ga||e==i&&n==i)return pe(a,this.__actions__);var o=[];a:for(;i--&&m<n;){j+=b;for(var p=-1,q=a[j];++p<l;){var r=k[p],s=r.iteratee,t=r.type,u=s(q);if(t==Ga)q=u;else if(!u){if(t==Fa)continue a;break a}}o[m++]=q}return o}function da(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function Mb(){this.__data__=Zk?Zk(null):{},this.size=0}function Xb(a){var b=this.has(a)&&delete this.__data__[a];return this.size-=b?1:0,b}function Yb(a){var b=this.__data__;if(Zk){var c=b[a];return c===ja?fa:c}return lk.call(b,a)?b[a]:fa}function Zb(a){var b=this.__data__;return Zk?b[a]!==fa:lk.call(b,a)}function $b(a,b){var c=this.__data__;return this.size+=this.has(a)?0:1,c[a]=Zk&&b===fa?ja:b,this}function _b(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function ac(){this.__data__=[],this.size=0}function bc(a){var b=this.__data__,c=Vc(b,a);return!(c<0)&&(c==b.length-1?b.pop():zk.call(b,c,1),--this.size,!0)}function cc(a){var b=this.__data__,c=Vc(b,a);return c<0?fa:b[c][1]}function dc(a){return Vc(this.__data__,a)>-1}function ec(a,b){var c=this.__data__,d=Vc(c,a);return d<0?(++this.size,c.push([a,b])):c[d][1]=b,this}function fc(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function gc(){this.size=0,this.__data__={hash:new da,map:new(Vk||_b),string:new da}}function hc(a){var b=rf(this,a).delete(a);return this.size-=b?1:0,b}function ic(a){return rf(this,a).get(a)}function lc(a){return rf(this,a).has(a)}function mc(a,b){var c=rf(this,a),d=c.size;return c.set(a,b),this.size+=c.size==d?0:1,this}function nc(a){var b=-1,c=null==a?0:a.length;for(this.__data__=new fc;++b<c;)this.add(a[b])}function oc(a){return this.__data__.set(a,ja),this}function tc(a){return this.__data__.has(a)}function uc(a){var b=this.__data__=new _b(a);this.size=b.size}function vc(){this.__data__=new _b,this.size=0}function wc(a){var b=this.__data__,c=b.delete(a);return this.size=b.size,c}function zc(a){return this.__data__.get(a)}function Ac(a){return this.__data__.has(a)}function Cc(a,b){var c=this.__data__;if(c instanceof _b){var d=c.__data__;if(!Vk||d.length<ga-1)return d.push([a,b]),this.size=++c.size,this;c=this.__data__=new fc(d)}return c.set(a,b),this.size=c.size,this}function Dc(a,b){var c=lm(a),d=!c&&km(a),e=!c&&!d&&nm(a),f=!c&&!d&&!e&&sm(a),g=c||d||e||f,h=g?I(a.length,ek):[],i=h.length;for(var j in a)!b&&!lk.call(a,j)||g&&("length"==j||e&&("offset"==j||"parent"==j)||f&&("buffer"==j||"byteLength"==j||"byteOffset"==j)||Df(j,i))||h.push(j);return h}function Fc(a){var b=a.length;return b?a[Yd(0,b-1)]:fa}function Gc(a,b){return Vf(Ie(a),_c(b,0,a.length))}function Nc(a){return Vf(Ie(a))}function Sc(a,b,c,d){return a===fa||Oh(a,ik[c])&&!lk.call(d,c)?b:a}function Tc(a,b,c){(c===fa||Oh(a[b],c))&&(c!==fa||b in a)||Zc(a,b,c)}function Uc(a,b,c){var d=a[b];lk.call(a,b)&&Oh(d,c)&&(c!==fa||b in a)||Zc(a,b,c)}function Vc(a,b){for(var c=a.length;c--;)if(Oh(a[c][0],b))return c;return-1}function Wc(a,b,c,d){return jl(a,function(a,e,f){b(d,a,c(a),f)}),d}function Xc(a,b){return a&&Je(b,Ji(b),a)}function Yc(a,b){return a&&Je(b,Ki(b),a)}function Zc(a,b,c){"__proto__"==b&&Dk?Dk(a,b,{configurable:!0,enumerable:!0,value:c,writable:!0}):a[b]=c}function $c(a,b){for(var c=-1,d=b.length,e=Zj(d),f=null==a;++c<d;)e[c]=f?fa:Gi(a,b[c]);return e}function _c(a,b,c){return a===a&&(c!==fa&&(a=a<=c?a:c),b!==fa&&(a=a>=b?a:b)),a}function ad(a,b,c,d,e,f){var g,h=b&ma,i=b&na,j=b&oa;if(c&&(g=e?c(a,d,e,f):c(a)),g!==fa)return g;if(!_h(a))return a;var l=lm(a);if(l){if(g=yf(a),!h)return Ie(a,g)}else{var m=vl(a),n=m==Wa||m==Xa;if(nm(a))return we(a,h);if(m==_a||m==Pa||n&&!e){if(g=i||n?{}:zf(a),!h)return i?Le(a,Yc(g,a)):Ke(a,Xc(g,a))}else{if(!sc[m])return e?a:{};g=Af(a,m,ad,h)}}f||(f=new uc);var o=f.get(a);if(o)return o;f.set(a,g);var p=j?i?nf:mf:i?Ki:Ji,q=l?fa:p(a);return k(q||a,function(d,e){q&&(e=d,d=a[e]),Uc(g,e,ad(d,b,c,e,a,f))}),g}function bd(a){var b=Ji(a);return function(c){return cd(c,a,b)}}function cd(a,b,c){var d=c.length;if(null==a)return!d;for(a=ck(a);d--;){var e=c[d],f=b[e],g=a[e];if(g===fa&&!(e in a)||!f(g))return!1}return!0}function dd(a,b,c){if("function"!=typeof a)throw new fk(ia);return yl(function(){a.apply(fa,c)},b)}function ed(a,b,c,d){var e=-1,f=o,g=!0,h=a.length,i=[],j=b.length;if(!h)return i;c&&(b=q(b,K(c))),d?(f=p,g=!1):b.length>=ga&&(f=M,g=!1,b=new nc(b));a:for(;++e<h;){var k=a[e],l=null==c?k:c(k);if(k=d||0!==k?k:0,g&&l===l){for(var m=j;m--;)if(b[m]===l)continue a;i.push(k)}else f(b,l,d)||i.push(k)}return i}function fd(a,b){var c=!0;return jl(a,function(a,d,e){return c=!!b(a,d,e)}),c}function gd(a,b,c){for(var d=-1,e=a.length;++d<e;){var f=a[d],g=b(f);if(null!=g&&(h===fa?g===g&&!li(g):c(g,h)))var h=g,i=f}return i}function hd(a,b,c,d){var e=a.length;for(c=ri(c),c<0&&(c=-c>e?0:e+c),d=d===fa||d>e?e:ri(d),d<0&&(d+=e),d=c>d?0:si(d);c<d;)a[c++]=b;return a}function id(a,b){var c=[];return jl(a,function(a,d,e){b(a,d,e)&&c.push(a)}),c}function jd(a,b,c,d,e){var f=-1,g=a.length;for(c||(c=Cf),e||(e=[]);++f<g;){var h=a[f];b>0&&c(h)?b>1?jd(h,b-1,c,d,e):r(e,h):d||(e[e.length]=h)}return e}function kd(a,b){return a&&ll(a,b,Ji)}function ld(a,b){return a&&ml(a,b,Ji)}function md(a,b){return n(b,function(b){return Yh(a[b])})}function nd(a,b){b=ue(b,a);for(var c=0,d=b.length;null!=a&&c<d;)a=a[Wf(b[c++])];return c&&c==d?a:fa}function od(a,b,c){var d=b(a);return lm(a)?d:r(d,c(a))}function pd(a){return null==a?a===fa?fb:$a:(a=ck(a),Ck&&Ck in a?uf(a):Pf(a))}function qd(a,b){return a>b}function rd(a,b){return null!=a&&lk.call(a,b)}function sd(a,b){return null!=a&&b in ck(a)}function td(a,b,c){return a>=Pk(b,c)&&a<Ok(b,c)}function ud(a,b,c){for(var d=c?p:o,e=a[0].length,f=a.length,g=f,h=Zj(f),i=1/0,j=[];g--;){var k=a[g];g&&b&&(k=q(k,K(b))),i=Pk(k.length,i),h[g]=!c&&(b||e>=120&&k.length>=120)?new nc(g&&k):fa}k=a[0];var l=-1,m=h[0];a:for(;++l<e&&j.length<i;){var n=k[l],r=b?b(n):n;if(n=c||0!==n?n:0,!(m?M(m,r):d(j,r,c))){for(g=f;--g;){var s=h[g];if(!(s?M(s,r):d(a[g],r,c)))continue a}m&&m.push(r),j.push(n)}}return j}function vd(a,b,c,d){return kd(a,function(a,e,f){b(d,c(a),e,f)}),d}function wd(a,b,c){b=ue(b,a),a=Rf(a,b);var d=null==a?a:a[Wf(qg(b))];return null==d?fa:i(d,a,c)}function xd(a){return ai(a)&&pd(a)==Pa}function yd(a){return ai(a)&&pd(a)==ib}function zd(a){return ai(a)&&pd(a)==Ta}function Ad(a,b,c,d,e){return a===b||(null==a||null==b||!_h(a)&&!ai(b)?a!==a&&b!==b:Bd(a,b,c,d,Ad,e))}function Bd(a,b,c,d,e,f){var g=lm(a),h=lm(b),i=Qa,j=Qa;g||(i=vl(a),i=i==Pa?_a:i),h||(j=vl(b),j=j==Pa?_a:j);var k=i==_a,l=j==_a,m=i==j;if(m&&nm(a)){if(!nm(b))return!1;g=!0,k=!1}if(m&&!k)return f||(f=new uc),g||sm(a)?hf(a,b,c,d,e,f):jf(a,b,i,c,d,e,f);if(!(c&pa)){var n=k&&lk.call(a,"__wrapped__"),o=l&&lk.call(b,"__wrapped__");if(n||o){var p=n?a.value():a,q=o?b.value():b;return f||(f=new uc),e(p,q,c,d,f)}}return!!m&&(f||(f=new uc),kf(a,b,c,d,e,f))}function Cd(a){return ai(a)&&vl(a)==Ya}function Dd(a,b,c,d){var e=c.length,f=e,g=!d;if(null==a)return!f;for(a=ck(a);e--;){var h=c[e];if(g&&h[2]?h[1]!==a[h[0]]:!(h[0]in a))return!1}for(;++e<f;){h=c[e];var i=h[0],j=a[i],k=h[1];if(g&&h[2]){if(j===fa&&!(i in a))return!1}else{var l=new uc;if(d)var m=d(j,k,i,a,b,l);if(!(m===fa?Ad(k,j,pa|qa,d,l):m))return!1}}return!0}function Ed(a){return!(!_h(a)||If(a))&&(Yh(a)?rk:Rb).test(Xf(a))}function Fd(a){return ai(a)&&pd(a)==bb}function Gd(a){return ai(a)&&vl(a)==cb}function Hd(a){return ai(a)&&$h(a.length)&&!!rc[pd(a)]}function Id(a){return"function"==typeof a?a:null==a?zj:"object"==(void 0===a?"undefined":f(a))?lm(a)?Od(a[0],a[1]):Nd(a):Hj(a)}function Jd(a){if(!Jf(a))return Nk(a);var b=[];for(var c in ck(a))lk.call(a,c)&&"constructor"!=c&&b.push(c);return b}function Kd(a){if(!_h(a))return Of(a);var b=Jf(a),c=[];for(var d in a)("constructor"!=d||!b&&lk.call(a,d))&&c.push(d);return c}function Ld(a,b){return a<b}function Md(a,b){var c=-1,d=Ph(a)?Zj(a.length):[];return jl(a,function(a,e,f){d[++c]=b(a,e,f)}),d}function Nd(a){var b=sf(a);return 1==b.length&&b[0][2]?Lf(b[0][0],b[0][1]):function(c){return c===a||Dd(c,a,b)}}function Od(a,b){return Ff(a)&&Kf(b)?Lf(Wf(a),b):function(c){var d=Gi(c,a);return d===fa&&d===b?Ii(c,a):Ad(b,d,pa|qa)}}function Pd(a,b,c,d,e){a!==b&&ll(b,function(f,g){if(_h(f))e||(e=new uc),Qd(a,b,g,c,Pd,d,e);else{var h=d?d(a[g],f,g+"",a,b,e):fa;h===fa&&(h=f),Tc(a,g,h)}},Ki)}function Qd(a,b,c,d,e,f,g){var h=a[c],i=b[c],j=g.get(i);if(j)return void Tc(a,c,j);var k=f?f(h,i,c+"",a,b,g):fa,l=k===fa;if(l){var m=lm(i),n=!m&&nm(i),o=!m&&!n&&sm(i);k=i,m||n||o?lm(h)?k=h:Qh(h)?k=Ie(h):n?(l=!1,k=we(i,!0)):o?(l=!1,k=De(i,!0)):k=[]:ii(i)||km(i)?(k=h,km(h)?k=ui(h):(!_h(h)||d&&Yh(h))&&(k=zf(i))):l=!1}l&&(g.set(i,k),e(k,i,d,f,g),g.delete(i)),Tc(a,c,k)}function Rd(a,b){var c=a.length;if(c)return b+=b<0?c:0,Df(b,c)?a[b]:fa}function Sd(a,b,c){var d=-1;return b=q(b.length?b:[zj],K(qf())),G(Md(a,function(a,c,e){return{criteria:q(b,function(b){return b(a)}),index:++d,value:a}}),function(a,b){return Fe(a,b,c)})}function Td(a,b){return a=ck(a),Ud(a,b,function(b,c){return Ii(a,c)})}function Ud(a,b,c){for(var d=-1,e=b.length,f={};++d<e;){var g=b[d],h=nd(a,g);c(h,g)&&ce(f,ue(g,a),h)}return f}function Vd(a){return function(b){return nd(b,a)}}function Wd(a,b,c,d){var e=d?A:z,f=-1,g=b.length,h=a;for(a===b&&(b=Ie(b)),c&&(h=q(a,K(c)));++f<g;)for(var i=0,j=b[f],k=c?c(j):j;(i=e(h,k,i,d))>-1;)h!==a&&zk.call(h,i,1),zk.call(a,i,1);return a}function Xd(a,b){for(var c=a?b.length:0,d=c-1;c--;){var e=b[c];if(c==d||e!==f){var f=e;Df(e)?zk.call(a,e,1):me(a,e)}}return a}function Yd(a,b){return a+Ik(Sk()*(b-a+1))}function Zd(a,b,c,d){for(var e=-1,f=Ok(Hk((b-a)/(c||1)),0),g=Zj(f);f--;)g[d?f:++e]=a,a+=c;return g}function $d(a,b){var c="";if(!a||b<1||b>Ia)return c;do{b%2&&(c+=a),(b=Ik(b/2))&&(a+=a)}while(b);return c}function _d(a,b){return zl(Qf(a,b,zj),a+"")}function ae(a){return Fc(Wi(a))}function be(a,b){var c=Wi(a);return Vf(c,_c(b,0,c.length))}function ce(a,b,c,d){if(!_h(a))return a;b=ue(b,a);for(var e=-1,f=b.length,g=f-1,h=a;null!=h&&++e<f;){var i=Wf(b[e]),j=c;if(e!=g){var k=h[i];j=d?d(k,i,h):fa,j===fa&&(j=_h(k)?k:Df(b[e+1])?[]:{})}Uc(h,i,j),h=h[i]}return a}function de(a){return Vf(Wi(a))}function ee(a,b,c){var d=-1,e=a.length;b<0&&(b=-b>e?0:e+b),c=c>e?e:c,c<0&&(c+=e),e=b>c?0:c-b>>>0,b>>>=0;for(var f=Zj(e);++d<e;)f[d]=a[d+b];return f}function fe(a,b){var c;return jl(a,function(a,d,e){return!(c=b(a,d,e))}),!!c}function ge(a,b,c){var d=0,e=null==a?d:a.length;if("number"==typeof b&&b===b&&e<=Na){for(;d<e;){var f=d+e>>>1,g=a[f];null!==g&&!li(g)&&(c?g<=b:g<b)?d=f+1:e=f}return e}return he(a,b,zj,c)}function he(a,b,c,d){b=c(b);for(var e=0,f=null==a?0:a.length,g=b!==b,h=null===b,i=li(b),j=b===fa;e<f;){var k=Ik((e+f)/2),l=c(a[k]),m=l!==fa,n=null===l,o=l===l,p=li(l);if(g)var q=d||o;else q=j?o&&(d||m):h?o&&m&&(d||!n):i?o&&m&&!n&&(d||!p):!n&&!p&&(d?l<=b:l<b);q?e=k+1:f=k}return Pk(f,Ma)}function ie(a,b){for(var c=-1,d=a.length,e=0,f=[];++c<d;){var g=a[c],h=b?b(g):g;if(!c||!Oh(h,i)){var i=h;f[e++]=0===g?0:g}}return f}function je(a){return"number"==typeof a?a:li(a)?Ka:+a}function ke(a){if("string"==typeof a)return a;if(lm(a))return q(a,ke)+"";if(li(a))return hl?hl.call(a):"";var b=a+"";return"0"==b&&1/a==-Ha?"-0":b}function le(a,b,c){var d=-1,e=o,f=a.length,g=!0,h=[],i=h;if(c)g=!1,e=p;else if(f>=ga){var j=b?null:rl(a);if(j)return Y(j);g=!1,e=M,i=new nc}else i=b?[]:h;a:for(;++d<f;){var k=a[d],l=b?b(k):k;if(k=c||0!==k?k:0,g&&l===l){for(var m=i.length;m--;)if(i[m]===l)continue a;b&&i.push(l),h.push(k)}else e(i,l,c)||(i!==h&&i.push(l),h.push(k))}return h}function me(a,b){return b=ue(b,a),null==(a=Rf(a,b))||delete a[Wf(qg(b))]}function ne(a,b,c,d){return ce(a,b,c(nd(a,b)),d)}function oe(a,b,c,d){for(var e=a.length,f=d?e:-1;(d?f--:++f<e)&&b(a[f],f,a););return c?ee(a,d?0:f,d?f+1:e):ee(a,d?f+1:0,d?e:f)}function pe(a,b){var c=a;return c instanceof v&&(c=c.value()),s(b,function(a,b){return b.func.apply(b.thisArg,r([a],b.args))},c)}function qe(a,b,c){var d=a.length;if(d<2)return d?le(a[0]):[];for(var e=-1,f=Zj(d);++e<d;)for(var g=a[e],h=-1;++h<d;)h!=e&&(f[e]=ed(f[e]||g,a[h],b,c));return le(jd(f,1),b,c)}function re(a,b,c){for(var d=-1,e=a.length,f=b.length,g={};++d<e;){var h=d<f?b[d]:fa;c(g,a[d],h)}return g}function se(a){return Qh(a)?a:[]}function te(a){return"function"==typeof a?a:zj}function ue(a,b){return lm(a)?a:Ff(a,b)?[a]:Al(wi(a))}function ve(a,b,c){var d=a.length;return c=c===fa?d:c,!b&&c>=d?a:ee(a,b,c)}function we(a,b){if(b)return a.slice();var c=a.length,d=vk?vk(c):new a.constructor(c);return a.copy(d),d}function xe(a){var b=new a.constructor(a.byteLength);return new uk(b).set(new uk(a)),b}function ye(a,b){var c=b?xe(a.buffer):a.buffer;return new a.constructor(c,a.byteOffset,a.byteLength)}function ze(a,b,c){return s(b?c(V(a),ma):V(a),g,new a.constructor)}function Ae(a){var b=new a.constructor(a.source,Ob.exec(a));return b.lastIndex=a.lastIndex,b}function Be(a,b,c){return s(b?c(Y(a),ma):Y(a),h,new a.constructor)}function Ce(a){return gl?ck(gl.call(a)):{}}function De(a,b){var c=b?xe(a.buffer):a.buffer;return new a.constructor(c,a.byteOffset,a.length)}function Ee(a,b){if(a!==b){var c=a!==fa,d=null===a,e=a===a,f=li(a),g=b!==fa,h=null===b,i=b===b,j=li(b);if(!h&&!j&&!f&&a>b||f&&g&&i&&!h&&!j||d&&g&&i||!c&&i||!e)return 1;if(!d&&!f&&!j&&a<b||j&&c&&e&&!d&&!f||h&&c&&e||!g&&e||!i)return-1}return 0}function Fe(a,b,c){for(var d=-1,e=a.criteria,f=b.criteria,g=e.length,h=c.length;++d<g;){var i=Ee(e[d],f[d]);if(i){if(d>=h)return i;return i*("desc"==c[d]?-1:1)}}return a.index-b.index}function Ge(a,b,c,d){for(var e=-1,f=a.length,g=c.length,h=-1,i=b.length,j=Ok(f-g,0),k=Zj(i+j),l=!d;++h<i;)k[h]=b[h];for(;++e<g;)(l||e<f)&&(k[c[e]]=a[e]);for(;j--;)k[h++]=a[e++];return k}function He(a,b,c,d){for(var e=-1,f=a.length,g=-1,h=c.length,i=-1,j=b.length,k=Ok(f-h,0),l=Zj(k+j),m=!d;++e<k;)l[e]=a[e];for(var n=e;++i<j;)l[n+i]=b[i];for(;++g<h;)(m||e<f)&&(l[n+c[g]]=a[e++]);return l}function Ie(a,b){var c=-1,d=a.length;for(b||(b=Zj(d));++c<d;)b[c]=a[c];return b}function Je(a,b,c,d){var e=!c;c||(c={});for(var f=-1,g=b.length;++f<g;){var h=b[f],i=d?d(c[h],a[h],h,c,a):fa;i===fa&&(i=a[h]),e?Zc(c,h,i):Uc(c,h,i)}return c}function Ke(a,b){return Je(a,tl(a),b)}function Le(a,b){return Je(a,ul(a),b)}function Me(a,b){return function(c,d){var e=lm(c)?j:Wc,f=b?b():{};return e(c,a,qf(d,2),f)}}function Ne(a){return _d(function(b,c){var d=-1,e=c.length,f=e>1?c[e-1]:fa,g=e>2?c[2]:fa;for(f=a.length>3&&"function"==typeof f?(e--,f):fa,g&&Ef(c[0],c[1],g)&&(f=e<3?fa:f,e=1),b=ck(b);++d<e;){var h=c[d];h&&a(b,h,d,f)}return b})}function Oe(a,b){return function(c,d){if(null==c)return c;if(!Ph(c))return a(c,d);for(var e=c.length,f=b?e:-1,g=ck(c);(b?f--:++f<e)&&!1!==d(g[f],f,g););return c}}function Pe(a){return function(b,c,d){for(var e=-1,f=ck(b),g=d(b),h=g.length;h--;){var i=g[a?h:++e];if(!1===c(f[i],i,f))break}return b}}function Qe(a,b,c){function d(){return(this&&this!==Bc&&this instanceof d?f:a).apply(e?c:this,arguments)}var e=b&ra,f=Te(a);return d}function Re(a){return function(b){b=wi(b);var c=S(b)?ba(b):fa,d=c?c[0]:b.charAt(0),e=c?ve(c,1).join(""):b.slice(1);return d[a]()+e}}function Se(a){return function(b){return s(uj(aj(b).replace(jc,"")),a,"")}}function Te(a){return function(){var b=arguments;switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var c=il(a.prototype),d=a.apply(c,b);return _h(d)?d:c}}function Ue(a,b,c){function d(){for(var f=arguments.length,g=Zj(f),h=f,j=pf(d);h--;)g[h]=arguments[h];var k=f<3&&g[0]!==j&&g[f-1]!==j?[]:X(g,j);return(f-=k.length)<c?df(a,b,Xe,d.placeholder,fa,g,k,fa,fa,c-f):i(this&&this!==Bc&&this instanceof d?e:a,this,g)}var e=Te(a);return d}function Ve(a){return function(b,c,d){var e=ck(b);if(!Ph(b)){var f=qf(c,3);b=Ji(b),c=function(a){return f(e[a],a,e)}}var g=a(b,c,d);return g>-1?e[f?b[g]:g]:fa}}function We(a){return lf(function(b){var c=b.length,d=c,f=e.prototype.thru;for(a&&b.reverse();d--;){var g=b[d];if("function"!=typeof g)throw new fk(ia);if(f&&!h&&"wrapper"==of(g))var h=new e([],!0)}for(d=h?d:c;++d<c;){g=b[d];var i=of(g),j="wrapper"==i?sl(g):fa;h=j&&Hf(j[0])&&j[1]==(ya|ua|wa|za)&&!j[4].length&&1==j[9]?h[of(j[0])].apply(h,j[3]):1==g.length&&Hf(g)?h[i]():h.thru(g)}return function(){var a=arguments,d=a[0];if(h&&1==a.length&&lm(d)&&d.length>=ga)return h.plant(d).value();for(var e=0,f=c?b[e].apply(this,a):d;++e<c;)f=b[e].call(this,f);return f}})}function Xe(a,b,c,d,e,f,g,h,i,j){function k(){for(var r=arguments.length,s=Zj(r),t=r;t--;)s[t]=arguments[t];if(o)var u=pf(k),v=P(s,u);if(d&&(s=Ge(s,d,e,o)),f&&(s=He(s,f,g,o)),r-=v,o&&r<j){var w=X(s,u);return df(a,b,Xe,k.placeholder,c,s,w,h,i,j-r)}var x=m?c:this,y=n?x[a]:a;return r=s.length,h?s=Sf(s,h):p&&r>1&&s.reverse(),l&&i<r&&(s.length=i),this&&this!==Bc&&this instanceof k&&(y=q||Te(y)),y.apply(x,s)}var l=b&ya,m=b&ra,n=b&sa,o=b&(ua|va),p=b&Aa,q=n?fa:Te(a);return k}function Ye(a,b){return function(c,d){return vd(c,a,b(d),{})}}function Ze(a,b){return function(c,d){var e;if(c===fa&&d===fa)return b;if(c!==fa&&(e=c),d!==fa){if(e===fa)return d;"string"==typeof c||"string"==typeof d?(c=ke(c),d=ke(d)):(c=je(c),d=je(d)),e=a(c,d)}return e}}function $e(a){return lf(function(b){return b=q(b,K(qf())),_d(function(c){var d=this;return a(b,function(a){return i(a,d,c)})})})}function _e(a,b){b=b===fa?" ":ke(b);var c=b.length;if(c<2)return c?$d(b,a):b;var d=$d(b,Hk(a/aa(b)));return S(b)?ve(ba(d),0,a).join(""):d.slice(0,a)}function af(a,b,c,d){function e(){for(var b=-1,h=arguments.length,j=-1,k=d.length,l=Zj(k+h),m=this&&this!==Bc&&this instanceof e?g:a;++j<k;)l[j]=d[j];for(;h--;)l[j++]=arguments[++b];return i(m,f?c:this,l)}var f=b&ra,g=Te(a);return e}function bf(a){return function(b,c,d){return d&&"number"!=typeof d&&Ef(b,c,d)&&(c=d=fa),b=qi(b),c===fa?(c=b,b=0):c=qi(c),d=d===fa?b<c?1:-1:qi(d),Zd(b,c,d,a)}}function cf(a){return function(b,c){return"string"==typeof b&&"string"==typeof c||(b=ti(b),c=ti(c)),a(b,c)}}function df(a,b,c,d,e,f,g,h,i,j){var k=b&ua,l=k?g:fa,m=k?fa:g,n=k?f:fa,o=k?fa:f;b|=k?wa:xa,(b&=~(k?xa:wa))&ta||(b&=~(ra|sa))
;var p=[a,b,e,n,l,o,m,h,i,j],q=c.apply(fa,p);return Hf(a)&&xl(q,p),q.placeholder=d,Tf(q,a,b)}function ef(a){var b=bk[a];return function(a,c){if(a=ti(a),c=Pk(ri(c),292)){var d=(wi(a)+"e").split("e");return d=(wi(b(d[0]+"e"+(+d[1]+c)))+"e").split("e"),+(d[0]+"e"+(+d[1]-c))}return b(a)}}function ff(a){return function(b){var c=vl(b);return c==Ya?V(b):c==cb?Z(b):J(b,a(b))}}function gf(a,b,c,d,e,f,g,h){var i=b&sa;if(!i&&"function"!=typeof a)throw new fk(ia);var j=d?d.length:0;if(j||(b&=~(wa|xa),d=e=fa),g=g===fa?g:Ok(ri(g),0),h=h===fa?h:ri(h),j-=e?e.length:0,b&xa){var k=d,l=e;d=e=fa}var m=i?fa:sl(a),n=[a,b,c,d,e,k,l,f,g,h];if(m&&Mf(n,m),a=n[0],b=n[1],c=n[2],d=n[3],e=n[4],h=n[9]=null==n[9]?i?0:a.length:Ok(n[9]-j,0),!h&&b&(ua|va)&&(b&=~(ua|va)),b&&b!=ra)o=b==ua||b==va?Ue(a,b,h):b!=wa&&b!=(ra|wa)||e.length?Xe.apply(fa,n):af(a,b,c,d);else var o=Qe(a,b,c);return Tf((m?nl:xl)(o,n),a,b)}function hf(a,b,c,d,e,f){var g=c&pa,h=a.length,i=b.length;if(h!=i&&!(g&&i>h))return!1;var j=f.get(a);if(j&&f.get(b))return j==b;var k=-1,l=!0,m=c&qa?new nc:fa;for(f.set(a,b),f.set(b,a);++k<h;){var n=a[k],o=b[k];if(d)var p=g?d(o,n,k,b,a,f):d(n,o,k,a,b,f);if(p!==fa){if(p)continue;l=!1;break}if(m){if(!u(b,function(a,b){if(!M(m,b)&&(n===a||e(n,a,c,d,f)))return m.push(b)})){l=!1;break}}else if(n!==o&&!e(n,o,c,d,f)){l=!1;break}}return f.delete(a),f.delete(b),l}function jf(a,b,c,d,e,f,g){switch(c){case jb:if(a.byteLength!=b.byteLength||a.byteOffset!=b.byteOffset)return!1;a=a.buffer,b=b.buffer;case ib:return!(a.byteLength!=b.byteLength||!f(new uk(a),new uk(b)));case Sa:case Ta:case Za:return Oh(+a,+b);case Va:return a.name==b.name&&a.message==b.message;case bb:case db:return a==b+"";case Ya:var h=V;case cb:var i=d&pa;if(h||(h=Y),a.size!=b.size&&!i)return!1;var j=g.get(a);if(j)return j==b;d|=qa,g.set(a,b);var k=hf(h(a),h(b),d,e,f,g);return g.delete(a),k;case eb:if(gl)return gl.call(a)==gl.call(b)}return!1}function kf(a,b,c,d,e,f){var g=c&pa,h=Ji(a),i=h.length;if(i!=Ji(b).length&&!g)return!1;for(var j=i;j--;){var k=h[j];if(!(g?k in b:lk.call(b,k)))return!1}var l=f.get(a);if(l&&f.get(b))return l==b;var m=!0;f.set(a,b),f.set(b,a);for(var n=g;++j<i;){k=h[j];var o=a[k],p=b[k];if(d)var q=g?d(p,o,k,b,a,f):d(o,p,k,a,b,f);if(!(q===fa?o===p||e(o,p,c,d,f):q)){m=!1;break}n||(n="constructor"==k)}if(m&&!n){var r=a.constructor,s=b.constructor;r!=s&&"constructor"in a&&"constructor"in b&&!("function"==typeof r&&r instanceof r&&"function"==typeof s&&s instanceof s)&&(m=!1)}return f.delete(a),f.delete(b),m}function lf(a){return zl(Qf(a,fa,ig),a+"")}function mf(a){return od(a,Ji,tl)}function nf(a){return od(a,Ki,ul)}function of(a){for(var b=a.name+"",c=_k[b],d=lk.call(_k,b)?c.length:0;d--;){var e=c[d],f=e.func;if(null==f||f==a)return e.name}return b}function pf(a){return(lk.call(c,"placeholder")?c:a).placeholder}function qf(){var a=c.iteratee||Aj;return a=a===Aj?Id:a,arguments.length?a(arguments[0],arguments[1]):a}function rf(a,b){var c=a.__data__;return Gf(b)?c["string"==typeof b?"string":"hash"]:c.map}function sf(a){for(var b=Ji(a),c=b.length;c--;){var d=b[c],e=a[d];b[c]=[d,e,Kf(e)]}return b}function tf(a,b){var c=R(a,b);return Ed(c)?c:fa}function uf(a){var b=lk.call(a,Ck),c=a[Ck];try{a[Ck]=fa}catch(a){}var d=ok.call(a);return b?a[Ck]=c:delete a[Ck],d}function vf(a,b,c){for(var d=-1,e=c.length;++d<e;){var f=c[d],g=f.size;switch(f.type){case"drop":a+=g;break;case"dropRight":b-=g;break;case"take":b=Pk(b,a+g);break;case"takeRight":a=Ok(a,b-g)}}return{start:a,end:b}}function wf(a){var b=a.match(Kb);return b?b[1].split(Lb):[]}function xf(a,b,c){b=ue(b,a);for(var d=-1,e=b.length,f=!1;++d<e;){var g=Wf(b[d]);if(!(f=null!=a&&c(a,g)))break;a=a[g]}return f||++d!=e?f:!!(e=null==a?0:a.length)&&$h(e)&&Df(g,e)&&(lm(a)||km(a))}function yf(a){var b=a.length,c=a.constructor(b);return b&&"string"==typeof a[0]&&lk.call(a,"index")&&(c.index=a.index,c.input=a.input),c}function zf(a){return"function"!=typeof a.constructor||Jf(a)?{}:il(wk(a))}function Af(a,b,c,d){var e=a.constructor;switch(b){case ib:return xe(a);case Sa:case Ta:return new e(+a);case jb:return ye(a,d);case kb:case lb:case mb:case nb:case ob:case pb:case qb:case rb:case sb:return De(a,d);case Ya:return ze(a,d,c);case Za:case db:return new e(a);case bb:return Ae(a);case cb:return Be(a,d,c);case eb:return Ce(a)}}function Bf(a,b){var c=b.length;if(!c)return a;var d=c-1;return b[d]=(c>1?"& ":"")+b[d],b=b.join(c>2?", ":" "),a.replace(Jb,"{\n/* [wrapped with "+b+"] */\n")}function Cf(a){return lm(a)||km(a)||!!(Ak&&a&&a[Ak])}function Df(a,b){return!!(b=null==b?Ia:b)&&("number"==typeof a||Tb.test(a))&&a>-1&&a%1==0&&a<b}function Ef(a,b,c){if(!_h(c))return!1;var d=void 0===b?"undefined":f(b);return!!("number"==d?Ph(c)&&Df(b,c.length):"string"==d&&b in c)&&Oh(c[b],a)}function Ff(a,b){if(lm(a))return!1;var c=void 0===a?"undefined":f(a);return!("number"!=c&&"symbol"!=c&&"boolean"!=c&&null!=a&&!li(a))||(Cb.test(a)||!Bb.test(a)||null!=b&&a in ck(b))}function Gf(a){var b=void 0===a?"undefined":f(a);return"string"==b||"number"==b||"symbol"==b||"boolean"==b?"__proto__"!==a:null===a}function Hf(a){var b=of(a),d=c[b];if("function"!=typeof d||!(b in v.prototype))return!1;if(a===d)return!0;var e=sl(d);return!!e&&a===e[0]}function If(a){return!!nk&&nk in a}function Jf(a){var b=a&&a.constructor;return a===("function"==typeof b&&b.prototype||ik)}function Kf(a){return a===a&&!_h(a)}function Lf(a,b){return function(c){return null!=c&&(c[a]===b&&(b!==fa||a in ck(c)))}}function Mf(a,b){var c=a[1],d=b[1],e=c|d,f=e<(ra|sa|ya),g=d==ya&&c==ua||d==ya&&c==za&&a[7].length<=b[8]||d==(ya|za)&&b[7].length<=b[8]&&c==ua;if(!f&&!g)return a;d&ra&&(a[2]=b[2],e|=c&ra?0:ta);var h=b[3];if(h){var i=a[3];a[3]=i?Ge(i,h,b[4]):h,a[4]=i?X(a[3],la):b[4]}return h=b[5],h&&(i=a[5],a[5]=i?He(i,h,b[6]):h,a[6]=i?X(a[5],la):b[6]),h=b[7],h&&(a[7]=h),d&ya&&(a[8]=null==a[8]?b[8]:Pk(a[8],b[8])),null==a[9]&&(a[9]=b[9]),a[0]=b[0],a[1]=e,a}function Nf(a,b,c,d,e,f){return _h(a)&&_h(b)&&(f.set(b,a),Pd(a,b,fa,Nf,f),f.delete(b)),a}function Of(a){var b=[];if(null!=a)for(var c in ck(a))b.push(c);return b}function Pf(a){return ok.call(a)}function Qf(a,b,c){return b=Ok(b===fa?a.length-1:b,0),function(){for(var d=arguments,e=-1,f=Ok(d.length-b,0),g=Zj(f);++e<f;)g[e]=d[b+e];e=-1;for(var h=Zj(b+1);++e<b;)h[e]=d[e];return h[b]=c(g),i(a,this,h)}}function Rf(a,b){return b.length<2?a:nd(a,ee(b,0,-1))}function Sf(a,b){for(var c=a.length,d=Pk(b.length,c),e=Ie(a);d--;){var f=b[d];a[d]=Df(f,c)?e[f]:fa}return a}function Tf(a,b,c){var d=b+"";return zl(a,Bf(d,Yf(wf(d),c)))}function Uf(a){var b=0,c=0;return function(){var d=Qk(),e=Ea-(d-c);if(c=d,e>0){if(++b>=Da)return arguments[0]}else b=0;return a.apply(fa,arguments)}}function Vf(a,b){var c=-1,d=a.length,e=d-1;for(b=b===fa?d:b;++c<b;){var f=Yd(c,e),g=a[f];a[f]=a[c],a[c]=g}return a.length=b,a}function Wf(a){if("string"==typeof a||li(a))return a;var b=a+"";return"0"==b&&1/a==-Ha?"-0":b}function Xf(a){if(null!=a){try{return kk.call(a)}catch(a){}try{return a+""}catch(a){}}return""}function Yf(a,b){return k(Oa,function(c){var d="_."+c[0];b&c[1]&&!o(a,d)&&a.push(d)}),a.sort()}function Zf(a){if(a instanceof v)return a.clone();var b=new e(a.__wrapped__,a.__chain__);return b.__actions__=Ie(a.__actions__),b.__index__=a.__index__,b.__values__=a.__values__,b}function $f(a,b,c){b=(c?Ef(a,b,c):b===fa)?1:Ok(ri(b),0);var d=null==a?0:a.length;if(!d||b<1)return[];for(var e=0,f=0,g=Zj(Hk(d/b));e<d;)g[f++]=ee(a,e,e+=b);return g}function _f(a){for(var b=-1,c=null==a?0:a.length,d=0,e=[];++b<c;){var f=a[b];f&&(e[d++]=f)}return e}function ag(){var a=arguments.length;if(!a)return[];for(var b=Zj(a-1),c=arguments[0],d=a;d--;)b[d-1]=arguments[d];return r(lm(c)?Ie(c):[c],jd(b,1))}function bg(a,b,c){var d=null==a?0:a.length;return d?(b=c||b===fa?1:ri(b),ee(a,b<0?0:b,d)):[]}function cg(a,b,c){var d=null==a?0:a.length;return d?(b=c||b===fa?1:ri(b),b=d-b,ee(a,0,b<0?0:b)):[]}function dg(a,b){return a&&a.length?oe(a,qf(b,3),!0,!0):[]}function eg(a,b){return a&&a.length?oe(a,qf(b,3),!0):[]}function fg(a,b,c,d){var e=null==a?0:a.length;return e?(c&&"number"!=typeof c&&Ef(a,b,c)&&(c=0,d=e),hd(a,b,c,d)):[]}function gg(a,b,c){var d=null==a?0:a.length;if(!d)return-1;var e=null==c?0:ri(c);return e<0&&(e=Ok(d+e,0)),y(a,qf(b,3),e)}function hg(a,b,c){var d=null==a?0:a.length;if(!d)return-1;var e=d-1;return c!==fa&&(e=ri(c),e=c<0?Ok(d+e,0):Pk(e,d-1)),y(a,qf(b,3),e,!0)}function ig(a){return(null==a?0:a.length)?jd(a,1):[]}function jg(a){return(null==a?0:a.length)?jd(a,Ha):[]}function kg(a,b){return(null==a?0:a.length)?(b=b===fa?1:ri(b),jd(a,b)):[]}function lg(a){for(var b=-1,c=null==a?0:a.length,d={};++b<c;){var e=a[b];d[e[0]]=e[1]}return d}function mg(a){return a&&a.length?a[0]:fa}function ng(a,b,c){var d=null==a?0:a.length;if(!d)return-1;var e=null==c?0:ri(c);return e<0&&(e=Ok(d+e,0)),z(a,b,e)}function og(a){return(null==a?0:a.length)?ee(a,0,-1):[]}function pg(a,b){return null==a?"":Mk.call(a,b)}function qg(a){var b=null==a?0:a.length;return b?a[b-1]:fa}function rg(a,b,c){var d=null==a?0:a.length;if(!d)return-1;var e=d;return c!==fa&&(e=ri(c),e=e<0?Ok(d+e,0):Pk(e,d-1)),b===b?_(a,b,e):y(a,B,e,!0)}function sg(a,b){return a&&a.length?Rd(a,ri(b)):fa}function tg(a,b){return a&&a.length&&b&&b.length?Wd(a,b):a}function ug(a,b,c){return a&&a.length&&b&&b.length?Wd(a,b,qf(c,2)):a}function vg(a,b,c){return a&&a.length&&b&&b.length?Wd(a,b,fa,c):a}function wg(a,b){var c=[];if(!a||!a.length)return c;var d=-1,e=[],f=a.length;for(b=qf(b,3);++d<f;){var g=a[d];b(g,d,a)&&(c.push(g),e.push(d))}return Xd(a,e),c}function xg(a){return null==a?a:Tk.call(a)}function yg(a,b,c){var d=null==a?0:a.length;return d?(c&&"number"!=typeof c&&Ef(a,b,c)?(b=0,c=d):(b=null==b?0:ri(b),c=c===fa?d:ri(c)),ee(a,b,c)):[]}function zg(a,b){return ge(a,b)}function Ag(a,b,c){return he(a,b,qf(c,2))}function Bg(a,b){var c=null==a?0:a.length;if(c){var d=ge(a,b);if(d<c&&Oh(a[d],b))return d}return-1}function Cg(a,b){return ge(a,b,!0)}function Dg(a,b,c){return he(a,b,qf(c,2),!0)}function Eg(a,b){if(null==a?0:a.length){var c=ge(a,b,!0)-1;if(Oh(a[c],b))return c}return-1}function Fg(a){return a&&a.length?ie(a):[]}function Gg(a,b){return a&&a.length?ie(a,qf(b,2)):[]}function Hg(a){var b=null==a?0:a.length;return b?ee(a,1,b):[]}function Ig(a,b,c){return a&&a.length?(b=c||b===fa?1:ri(b),ee(a,0,b<0?0:b)):[]}function Jg(a,b,c){var d=null==a?0:a.length;return d?(b=c||b===fa?1:ri(b),b=d-b,ee(a,b<0?0:b,d)):[]}function Kg(a,b){return a&&a.length?oe(a,qf(b,3),!1,!0):[]}function Lg(a,b){return a&&a.length?oe(a,qf(b,3)):[]}function Mg(a){return a&&a.length?le(a):[]}function Ng(a,b){return a&&a.length?le(a,qf(b,2)):[]}function Og(a,b){return b="function"==typeof b?b:fa,a&&a.length?le(a,fa,b):[]}function Pg(a){if(!a||!a.length)return[];var b=0;return a=n(a,function(a){if(Qh(a))return b=Ok(a.length,b),!0}),I(b,function(b){return q(a,D(b))})}function Qg(a,b){if(!a||!a.length)return[];var c=Pg(a);return null==b?c:q(c,function(a){return i(b,fa,a)})}function Rg(a,b){return re(a||[],b||[],Uc)}function Sg(a,b){return re(a||[],b||[],ce)}function Tg(a){var b=c(a);return b.__chain__=!0,b}function Ug(a,b){return b(a),a}function Vg(a,b){return b(a)}function Wg(){return Tg(this)}function Xg(){return new e(this.value(),this.__chain__)}function Yg(){this.__values__===fa&&(this.__values__=pi(this.value()));var a=this.__index__>=this.__values__.length;return{done:a,value:a?fa:this.__values__[this.__index__++]}}function Zg(){return this}function $g(a){for(var b,c=this;c instanceof d;){var e=Zf(c);e.__index__=0,e.__values__=fa,b?f.__wrapped__=e:b=e;var f=e;c=c.__wrapped__}return f.__wrapped__=a,b}function _g(){var a=this.__wrapped__;if(a instanceof v){var b=a;return this.__actions__.length&&(b=new v(this)),b=b.reverse(),b.__actions__.push({func:Vg,args:[xg],thisArg:fa}),new e(b,this.__chain__)}return this.thru(xg)}function ah(){return pe(this.__wrapped__,this.__actions__)}function bh(a,b,c){var d=lm(a)?m:fd;return c&&Ef(a,b,c)&&(b=fa),d(a,qf(b,3))}function ch(a,b){return(lm(a)?n:id)(a,qf(b,3))}function dh(a,b){return jd(jh(a,b),1)}function eh(a,b){return jd(jh(a,b),Ha)}function fh(a,b,c){return c=c===fa?1:ri(c),jd(jh(a,b),c)}function gh(a,b){return(lm(a)?k:jl)(a,qf(b,3))}function hh(a,b){return(lm(a)?l:kl)(a,qf(b,3))}function ih(a,b,c,d){a=Ph(a)?a:Wi(a),c=c&&!d?ri(c):0;var e=a.length;return c<0&&(c=Ok(e+c,0)),ki(a)?c<=e&&a.indexOf(b,c)>-1:!!e&&z(a,b,c)>-1}function jh(a,b){return(lm(a)?q:Md)(a,qf(b,3))}function kh(a,b,c,d){return null==a?[]:(lm(b)||(b=null==b?[]:[b]),c=d?fa:c,lm(c)||(c=null==c?[]:[c]),Sd(a,b,c))}function lh(a,b,c){var d=lm(a)?s:F,e=arguments.length<3;return d(a,qf(b,4),c,e,jl)}function mh(a,b,c){var d=lm(a)?t:F,e=arguments.length<3;return d(a,qf(b,4),c,e,kl)}function nh(a,b){return(lm(a)?n:id)(a,Bh(qf(b,3)))}function oh(a){return(lm(a)?Fc:ae)(a)}function ph(a,b,c){return b=(c?Ef(a,b,c):b===fa)?1:ri(b),(lm(a)?Gc:be)(a,b)}function qh(a){return(lm(a)?Nc:de)(a)}function rh(a){if(null==a)return 0;if(Ph(a))return ki(a)?aa(a):a.length;var b=vl(a);return b==Ya||b==cb?a.size:Jd(a).length}function sh(a,b,c){var d=lm(a)?u:fe;return c&&Ef(a,b,c)&&(b=fa),d(a,qf(b,3))}function th(a,b){if("function"!=typeof b)throw new fk(ia);return a=ri(a),function(){if(--a<1)return b.apply(this,arguments)}}function uh(a,b,c){return b=c?fa:b,b=a&&null==b?a.length:b,gf(a,ya,fa,fa,fa,fa,b)}function vh(a,b){var c;if("function"!=typeof b)throw new fk(ia);return a=ri(a),function(){return--a>0&&(c=b.apply(this,arguments)),a<=1&&(b=fa),c}}function wh(a,b,c){b=c?fa:b;var d=gf(a,ua,fa,fa,fa,fa,fa,b);return d.placeholder=wh.placeholder,d}function xh(a,b,c){b=c?fa:b;var d=gf(a,va,fa,fa,fa,fa,fa,b);return d.placeholder=xh.placeholder,d}function yh(a,b,c){function d(b){var c=m,d=n;return m=n=fa,s=b,p=a.apply(d,c)}function e(a){return s=a,q=yl(h,b),t?d(a):p}function f(a){var c=a-r,d=a-s,e=b-c;return u?Pk(e,o-d):e}function g(a){var c=a-r,d=a-s;return r===fa||c>=b||c<0||u&&d>=o}function h(){var a=_l();if(g(a))return i(a);q=yl(h,f(a))}function i(a){return q=fa,v&&m?d(a):(m=n=fa,p)}function j(){q!==fa&&ql(q),s=0,m=r=n=q=fa}function k(){return q===fa?p:i(_l())}function l(){var a=_l(),c=g(a);if(m=arguments,n=this,r=a,c){if(q===fa)return e(r);if(u)return q=yl(h,b),d(r)}return q===fa&&(q=yl(h,b)),p}var m,n,o,p,q,r,s=0,t=!1,u=!1,v=!0;if("function"!=typeof a)throw new fk(ia);return b=ti(b)||0,_h(c)&&(t=!!c.leading,u="maxWait"in c,o=u?Ok(ti(c.maxWait)||0,b):o,v="trailing"in c?!!c.trailing:v),l.cancel=j,l.flush=k,l}function zh(a){return gf(a,Aa)}function Ah(a,b){if("function"!=typeof a||null!=b&&"function"!=typeof b)throw new fk(ia);var c=function c(){var d=arguments,e=b?b.apply(this,d):d[0],f=c.cache;if(f.has(e))return f.get(e);var g=a.apply(this,d);return c.cache=f.set(e,g)||f,g};return c.cache=new(Ah.Cache||fc),c}function Bh(a){if("function"!=typeof a)throw new fk(ia);return function(){var b=arguments;switch(b.length){case 0:return!a.call(this);case 1:return!a.call(this,b[0]);case 2:return!a.call(this,b[0],b[1]);case 3:return!a.call(this,b[0],b[1],b[2])}return!a.apply(this,b)}}function Ch(a){return vh(2,a)}function Dh(a,b){if("function"!=typeof a)throw new fk(ia);return b=b===fa?b:ri(b),_d(a,b)}function Eh(a,b){if("function"!=typeof a)throw new fk(ia);return b=b===fa?0:Ok(ri(b),0),_d(function(c){var d=c[b],e=ve(c,0,b);return d&&r(e,d),i(a,this,e)})}function Fh(a,b,c){var d=!0,e=!0;if("function"!=typeof a)throw new fk(ia);return _h(c)&&(d="leading"in c?!!c.leading:d,e="trailing"in c?!!c.trailing:e),yh(a,b,{leading:d,maxWait:b,trailing:e})}function Gh(a){return uh(a,1)}function Hh(a,b){return fm(te(b),a)}function Ih(){if(!arguments.length)return[];var a=arguments[0];return lm(a)?a:[a]}function Jh(a){return ad(a,oa)}function Kh(a,b){return b="function"==typeof b?b:fa,ad(a,oa,b)}function Lh(a){return ad(a,ma|oa)}function Mh(a,b){return b="function"==typeof b?b:fa,ad(a,ma|oa,b)}function Nh(a,b){return null==b||cd(a,b,Ji(b))}function Oh(a,b){return a===b||a!==a&&b!==b}function Ph(a){return null!=a&&$h(a.length)&&!Yh(a)}function Qh(a){return ai(a)&&Ph(a)}function Rh(a){return!0===a||!1===a||ai(a)&&pd(a)==Sa}function Sh(a){return ai(a)&&1===a.nodeType&&!ii(a)}function Th(a){if(null==a)return!0;if(Ph(a)&&(lm(a)||"string"==typeof a||"function"==typeof a.splice||nm(a)||sm(a)||km(a)))return!a.length;var b=vl(a);if(b==Ya||b==cb)return!a.size;if(Jf(a))return!Jd(a).length;for(var c in a)if(lk.call(a,c))return!1;return!0}function Uh(a,b){return Ad(a,b)}function Vh(a,b,c){c="function"==typeof c?c:fa;var d=c?c(a,b):fa;return d===fa?Ad(a,b,fa,c):!!d}function Wh(a){if(!ai(a))return!1;var b=pd(a);return b==Va||b==Ua||"string"==typeof a.message&&"string"==typeof a.name&&!ii(a)}function Xh(a){return"number"==typeof a&&Lk(a)}function Yh(a){if(!_h(a))return!1;var b=pd(a);return b==Wa||b==Xa||b==Ra||b==ab}function Zh(a){return"number"==typeof a&&a==ri(a)}function $h(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=Ia}function _h(a){var b=void 0===a?"undefined":f(a);return null!=a&&("object"==b||"function"==b)}function ai(a){return null!=a&&"object"==(void 0===a?"undefined":f(a))}function bi(a,b){return a===b||Dd(a,b,sf(b))}function ci(a,b,c){return c="function"==typeof c?c:fa,Dd(a,b,sf(b),c)}function di(a){return hi(a)&&a!=+a}function ei(a){if(wl(a))throw new _j(ha);return Ed(a)}function fi(a){return null===a}function gi(a){return null==a}function hi(a){return"number"==typeof a||ai(a)&&pd(a)==Za}function ii(a){if(!ai(a)||pd(a)!=_a)return!1;var b=wk(a);if(null===b)return!0;var c=lk.call(b,"constructor")&&b.constructor;return"function"==typeof c&&c instanceof c&&kk.call(c)==pk}function ji(a){return Zh(a)&&a>=-Ia&&a<=Ia}function ki(a){return"string"==typeof a||!lm(a)&&ai(a)&&pd(a)==db}function li(a){return"symbol"==(void 0===a?"undefined":f(a))||ai(a)&&pd(a)==eb}function mi(a){return a===fa}function ni(a){return ai(a)&&vl(a)==gb}function oi(a){return ai(a)&&pd(a)==hb}function pi(a){if(!a)return[];if(Ph(a))return ki(a)?ba(a):Ie(a);if(Bk&&a[Bk])return U(a[Bk]());var b=vl(a);return(b==Ya?V:b==cb?Y:Wi)(a)}function qi(a){if(!a)return 0===a?a:0;if((a=ti(a))===Ha||a===-Ha){return(a<0?-1:1)*Ja}return a===a?a:0}function ri(a){var b=qi(a),c=b%1;return b===b?c?b-c:b:0}function si(a){return a?_c(ri(a),0,La):0}function ti(a){if("number"==typeof a)return a;if(li(a))return Ka;if(_h(a)){var b="function"==typeof a.valueOf?a.valueOf():a;a=_h(b)?b+"":b}if("string"!=typeof a)return 0===a?a:+a;a=a.replace(Gb,"");var c=Qb.test(a);return c||Sb.test(a)?yc(a.slice(2),c?2:8):Pb.test(a)?Ka:+a}function ui(a){return Je(a,Ki(a))}function vi(a){return _c(ri(a),-Ia,Ia)}function wi(a){return null==a?"":ke(a)}function xi(a,b){var c=il(a);return null==b?c:Xc(c,b)}function yi(a,b){return x(a,qf(b,3),kd)}function zi(a,b){return x(a,qf(b,3),ld)}function Ai(a,b){return null==a?a:ll(a,qf(b,3),Ki)}function Bi(a,b){return null==a?a:ml(a,qf(b,3),Ki)}function Ci(a,b){return a&&kd(a,qf(b,3))}function Di(a,b){return a&&ld(a,qf(b,3))}function Ei(a){return null==a?[]:md(a,Ji(a))}function Fi(a){return null==a?[]:md(a,Ki(a))}function Gi(a,b,c){var d=null==a?fa:nd(a,b);return d===fa?c:d}function Hi(a,b){return null!=a&&xf(a,b,rd)}function Ii(a,b){return null!=a&&xf(a,b,sd)}function Ji(a){return Ph(a)?Dc(a):Jd(a)}function Ki(a){return Ph(a)?Dc(a,!0):Kd(a)}function Li(a,b){var c={};return b=qf(b,3),kd(a,function(a,d,e){Zc(c,b(a,d,e),a)}),c}function Mi(a,b){var c={};return b=qf(b,3),kd(a,function(a,d,e){Zc(c,d,b(a,d,e))}),c}function Ni(a,b){return Oi(a,Bh(qf(b)))}function Oi(a,b){if(null==a)return{};var c=q(nf(a),function(a){return[a]});return b=qf(b),Ud(a,c,function(a,c){return b(a,c[0])})}function Pi(a,b,c){b=ue(b,a);var d=-1,e=b.length;for(e||(e=1,a=fa);++d<e;){var f=null==a?fa:a[Wf(b[d])];f===fa&&(d=e,f=c),a=Yh(f)?f.call(a):f}return a}function Qi(a,b,c){return null==a?a:ce(a,b,c)}function Ri(a,b,c,d){return d="function"==typeof d?d:fa,null==a?a:ce(a,b,c,d)}function Si(a,b,c){var d=lm(a),e=d||nm(a)||sm(a);if(b=qf(b,4),null==c){var f=a&&a.constructor;c=e?d?new f:[]:_h(a)&&Yh(f)?il(wk(a)):{}}return(e?k:kd)(a,function(a,d,e){return b(c,a,d,e)}),c}function Ti(a,b){return null==a||me(a,b)}function Ui(a,b,c){return null==a?a:ne(a,b,te(c))}function Vi(a,b,c,d){return d="function"==typeof d?d:fa,null==a?a:ne(a,b,te(c),d)}function Wi(a){return null==a?[]:L(a,Ji(a))}function Xi(a){return null==a?[]:L(a,Ki(a))}function Yi(a,b,c){return c===fa&&(c=b,b=fa),c!==fa&&(c=ti(c),c=c===c?c:0),b!==fa&&(b=ti(b),b=b===b?b:0),_c(ti(a),b,c)}function Zi(a,b,c){return b=qi(b),c===fa?(c=b,b=0):c=qi(c),a=ti(a),td(a,b,c)}function $i(a,b,c){if(c&&"boolean"!=typeof c&&Ef(a,b,c)&&(b=c=fa),c===fa&&("boolean"==typeof b?(c=b,b=fa):"boolean"==typeof a&&(c=a,a=fa)),a===fa&&b===fa?(a=0,b=1):(a=qi(a),b===fa?(b=a,a=0):b=qi(b)),a>b){var d=a;a=b,b=d}if(c||a%1||b%1){var e=Sk();return Pk(a+e*(b-a+xc("1e-"+((e+"").length-1))),b)}return Yd(a,b)}function _i(a){return Sm(wi(a).toLowerCase())}function aj(a){return(a=wi(a))&&a.replace(Ub,Oc).replace(kc,"")}function bj(a,b,c){a=wi(a),b=ke(b);var d=a.length;c=c===fa?d:_c(ri(c),0,d);var e=c;return(c-=b.length)>=0&&a.slice(c,e)==b}function cj(a){return a=wi(a),a&&zb.test(a)?a.replace(xb,Pc):a}function dj(a){return a=wi(a),a&&Fb.test(a)?a.replace(Eb,"\\$&"):a}function ej(a,b,c){a=wi(a),b=ri(b);var d=b?aa(a):0;if(!b||d>=b)return a;var e=(b-d)/2;return _e(Ik(e),c)+a+_e(Hk(e),c)}function fj(a,b,c){a=wi(a),b=ri(b);var d=b?aa(a):0;return b&&d<b?a+_e(b-d,c):a}function gj(a,b,c){a=wi(a),b=ri(b);var d=b?aa(a):0;return b&&d<b?_e(b-d,c)+a:a}function hj(a,b,c){return c||null==b?b=0:b&&(b=+b),Rk(wi(a).replace(Hb,""),b||0)}function ij(a,b,c){return b=(c?Ef(a,b,c):b===fa)?1:ri(b),$d(wi(a),b)}function jj(){var a=arguments,b=wi(a[0]);return a.length<3?b:b.replace(a[1],a[2])}function kj(a,b,c){return c&&"number"!=typeof c&&Ef(a,b,c)&&(b=c=fa),(c=c===fa?La:c>>>0)?(a=wi(a),a&&("string"==typeof b||null!=b&&!qm(b))&&!(b=ke(b))&&S(a)?ve(ba(a),0,c):a.split(b,c)):[]}function lj(a,b,c){return a=wi(a),c=_c(ri(c),0,a.length),b=ke(b),a.slice(c,c+b.length)==b}function mj(a,b,d){var e=c.templateSettings;d&&Ef(a,b,d)&&(b=fa),a=wi(a),b=xm({},b,e,Sc);var f,g,h=xm({},b.imports,e.imports,Sc),i=Ji(h),j=L(h,i),k=0,l=b.interpolate||Vb,m="__p += '",n=dk((b.escape||Vb).source+"|"+l.source+"|"+(l===Ab?Nb:Vb).source+"|"+(b.evaluate||Vb).source+"|$","g"),o="//# sourceURL="+("sourceURL"in b?b.sourceURL:"lodash.templateSources["+ ++qc+"]")+"\n";a.replace(n,function(b,c,d,e,h,i){return d||(d=e),m+=a.slice(k,i).replace(Wb,Q),c&&(f=!0,m+="' +\n__e("+c+") +\n'"),h&&(g=!0,m+="';\n"+h+";\n__p += '"),d&&(m+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),k=i+b.length,b}),m+="';\n";var p=b.variable;p||(m="with (obj) {\n"+m+"\n}\n"),m=(g?m.replace(tb,""):m).replace(ub,"$1").replace(vb,"$1;"),m="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(f?", __e = _.escape":"")+(g?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+m+"return __p\n}";var q=Tm(function(){return ak(i,o+"return "+m).apply(fa,j)});if(q.source=m,Wh(q))throw q;return q}function nj(a){return wi(a).toLowerCase()}function oj(a){return wi(a).toUpperCase()}function pj(a,b,c){if((a=wi(a))&&(c||b===fa))return a.replace(Gb,"");if(!a||!(b=ke(b)))return a;var d=ba(a),e=ba(b);return ve(d,N(d,e),O(d,e)+1).join("")}function qj(a,b,c){if((a=wi(a))&&(c||b===fa))return a.replace(Ib,"");if(!a||!(b=ke(b)))return a;var d=ba(a);return ve(d,0,O(d,ba(b))+1).join("")}function rj(a,b,c){if((a=wi(a))&&(c||b===fa))return a.replace(Hb,"");if(!a||!(b=ke(b)))return a;var d=ba(a);return ve(d,N(d,ba(b))).join("")}function sj(a,b){var c=Ba,d=Ca;if(_h(b)){var e="separator"in b?b.separator:e;c="length"in b?ri(b.length):c,d="omission"in b?ke(b.omission):d}a=wi(a);var f=a.length;if(S(a)){var g=ba(a);f=g.length}if(c>=f)return a;var h=c-aa(d);if(h<1)return d;var i=g?ve(g,0,h).join(""):a.slice(0,h);if(e===fa)return i+d;if(g&&(h+=i.length-h),qm(e)){if(a.slice(h).search(e)){var j,k=i;for(e.global||(e=dk(e.source,wi(Ob.exec(e))+"g")),e.lastIndex=0;j=e.exec(k);)var l=j.index;i=i.slice(0,l===fa?h:l)}}else if(a.indexOf(ke(e),h)!=h){var m=i.lastIndexOf(e);m>-1&&(i=i.slice(0,m))}return i+d}function tj(a){return a=wi(a),a&&yb.test(a)?a.replace(wb,Qc):a}function uj(a,b,c){return a=wi(a),b=c?fa:b,b===fa?T(a)?ea(a):w(a):a.match(b)||[]}function vj(a){var b=null==a?0:a.length,c=qf();return a=b?q(a,function(a){if("function"!=typeof a[1])throw new fk(ia);return[c(a[0]),a[1]]}):[],_d(function(c){for(var d=-1;++d<b;){var e=a[d];if(i(e[0],this,c))return i(e[1],this,c)}})}function wj(a){return bd(ad(a,ma))}function xj(a){return function(){return a}}function yj(a,b){return null==a||a!==a?b:a}function zj(a){return a}function Aj(a){return Id("function"==typeof a?a:ad(a,ma))}function Bj(a){return Nd(ad(a,ma))}function Cj(a,b){return Od(a,ad(b,ma))}function Dj(a,b,c){var d=Ji(b),e=md(b,d);null!=c||_h(b)&&(e.length||!d.length)||(c=b,b=a,a=this,e=md(b,Ji(b)));var f=!(_h(c)&&"chain"in c&&!c.chain),g=Yh(a);return k(e,function(c){var d=b[c];a[c]=d,g&&(a.prototype[c]=function(){var b=this.__chain__;if(f||b){var c=a(this.__wrapped__);return(c.__actions__=Ie(this.__actions__)).push({func:d,args:arguments,thisArg:a}),c.__chain__=b,c}return d.apply(a,r([this.value()],arguments))})}),a}function Ej(){return Bc._===this&&(Bc._=qk),this}function Fj(){}function Gj(a){return a=ri(a),_d(function(b){return Rd(b,a)})}function Hj(a){return Ff(a)?D(Wf(a)):Vd(a)}function Ij(a){return function(b){return null==a?fa:nd(a,b)}}function Jj(){return[]}function Kj(){return!1}function Lj(){return{}}function Mj(){return""}function Nj(){return!0}function Oj(a,b){if((a=ri(a))<1||a>Ia)return[];var c=La,d=Pk(a,La);b=qf(b),a-=La;for(var e=I(d,b);++c<a;)b(c);return e}function Pj(a){return lm(a)?q(a,Wf):li(a)?[a]:Ie(Al(wi(a)))}function Qj(a){var b=++mk;return wi(a)+b}function Rj(a){return a&&a.length?gd(a,zj,qd):fa}function Sj(a,b){return a&&a.length?gd(a,qf(b,2),qd):fa}function Tj(a){return C(a,zj)}function Uj(a,b){return C(a,qf(b,2))}function Vj(a){return a&&a.length?gd(a,zj,Ld):fa}function Wj(a,b){return a&&a.length?gd(a,qf(b,2),Ld):fa}function Xj(a){return a&&a.length?H(a,zj):0}function Yj(a,b){return a&&a.length?H(a,qf(b,2)):0}b=null==b?Bc:Rc.defaults(Bc.Object(),b,Rc.pick(Bc,pc));var Zj=b.Array,$j=b.Date,_j=b.Error,ak=b.Function,bk=b.Math,ck=b.Object,dk=b.RegExp,ek=b.String,fk=b.TypeError,gk=Zj.prototype,hk=ak.prototype,ik=ck.prototype,jk=b["__core-js_shared__"],kk=hk.toString,lk=ik.hasOwnProperty,mk=0,nk=function(){var a=/[^.]+$/.exec(jk&&jk.keys&&jk.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),ok=ik.toString,pk=kk.call(ck),qk=Bc._,rk=dk("^"+kk.call(lk).replace(Eb,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),sk=Ec?b.Buffer:fa,tk=b.Symbol,uk=b.Uint8Array,vk=sk?sk.allocUnsafe:fa,wk=W(ck.getPrototypeOf,ck),xk=ck.create,yk=ik.propertyIsEnumerable,zk=gk.splice,Ak=tk?tk.isConcatSpreadable:fa,Bk=tk?tk.iterator:fa,Ck=tk?tk.toStringTag:fa,Dk=function(){try{var a=tf(ck,"defineProperty");return a({},"",{}),a}catch(a){}}(),Ek=b.clearTimeout!==Bc.clearTimeout&&b.clearTimeout,Fk=$j&&$j.now!==Bc.Date.now&&$j.now,Gk=b.setTimeout!==Bc.setTimeout&&b.setTimeout,Hk=bk.ceil,Ik=bk.floor,Jk=ck.getOwnPropertySymbols,Kk=sk?sk.isBuffer:fa,Lk=b.isFinite,Mk=gk.join,Nk=W(ck.keys,ck),Ok=bk.max,Pk=bk.min,Qk=$j.now,Rk=b.parseInt,Sk=bk.random,Tk=gk.reverse,Uk=tf(b,"DataView"),Vk=tf(b,"Map"),Wk=tf(b,"Promise"),Xk=tf(b,"Set"),Yk=tf(b,"WeakMap"),Zk=tf(ck,"create"),$k=Yk&&new Yk,_k={},al=Xf(Uk),bl=Xf(Vk),cl=Xf(Wk),dl=Xf(Xk),el=Xf(Yk),fl=tk?tk.prototype:fa,gl=fl?fl.valueOf:fa,hl=fl?fl.toString:fa,il=function(){function a(){}return function(b){if(!_h(b))return{};if(xk)return xk(b);a.prototype=b;var c=new a;return a.prototype=fa,c}}();c.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:Ab,variable:"",imports:{_:c}},c.prototype=d.prototype,c.prototype.constructor=c,e.prototype=il(d.prototype),e.prototype.constructor=e,v.prototype=il(d.prototype),v.prototype.constructor=v,da.prototype.clear=Mb,da.prototype.delete=Xb,da.prototype.get=Yb,da.prototype.has=Zb,da.prototype.set=$b,_b.prototype.clear=ac,_b.prototype.delete=bc,_b.prototype.get=cc,_b.prototype.has=dc,_b.prototype.set=ec,fc.prototype.clear=gc,fc.prototype.delete=hc,fc.prototype.get=ic,fc.prototype.has=lc,fc.prototype.set=mc,nc.prototype.add=nc.prototype.push=oc,nc.prototype.has=tc,uc.prototype.clear=vc,uc.prototype.delete=wc,uc.prototype.get=zc,uc.prototype.has=Ac,uc.prototype.set=Cc;var jl=Oe(kd),kl=Oe(ld,!0),ll=Pe(),ml=Pe(!0),nl=$k?function(a,b){return $k.set(a,b),a}:zj,ol=Dk?function(a,b){return Dk(a,"toString",{configurable:!0,enumerable:!1,value:xj(b),writable:!0})}:zj,pl=_d,ql=Ek||function(a){return Bc.clearTimeout(a)},rl=Xk&&1/Y(new Xk([,-0]))[1]==Ha?function(a){return new Xk(a)}:Fj,sl=$k?function(a){return $k.get(a)}:Fj,tl=Jk?W(Jk,ck):Jj,ul=Jk?function(a){for(var b=[];a;)r(b,tl(a)),a=wk(a);return b}:Jj,vl=pd;(Uk&&vl(new Uk(new ArrayBuffer(1)))!=jb||Vk&&vl(new Vk)!=Ya||Wk&&"[object Promise]"!=vl(Wk.resolve())||Xk&&vl(new Xk)!=cb||Yk&&vl(new Yk)!=gb)&&(vl=function(a){var b=pd(a),c=b==_a?a.constructor:fa,d=c?Xf(c):"";if(d)switch(d){case al:return jb;case bl:return Ya;case cl:return"[object Promise]";case dl:return cb;case el:return gb}return b});var wl=jk?Yh:Kj,xl=Uf(nl),yl=Gk||function(a,b){return Bc.setTimeout(a,b)},zl=Uf(ol),Al=function(a){var b=Ah(a,function(a){return c.size===ka&&c.clear(),a}),c=b.cache;return b}(function(a){var b=[];return Db.test(a)&&b.push(""),a.replace(/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,function(a,c,d,e){b.push(d?e.replace(/\\(\\)?/g,"$1"):c||a)}),b}),Bl=_d(function(a,b){return Qh(a)?ed(a,jd(b,1,Qh,!0)):[]}),Cl=_d(function(a,b){var c=qg(b);return Qh(c)&&(c=fa),Qh(a)?ed(a,jd(b,1,Qh,!0),qf(c,2)):[]}),Dl=_d(function(a,b){var c=qg(b);return Qh(c)&&(c=fa),Qh(a)?ed(a,jd(b,1,Qh,!0),fa,c):[]}),El=_d(function(a){var b=q(a,se);return b.length&&b[0]===a[0]?ud(b):[]}),Fl=_d(function(a){var b=qg(a),c=q(a,se);return b===qg(c)?b=fa:c.pop(),c.length&&c[0]===a[0]?ud(c,qf(b,2)):[]}),Gl=_d(function(a){var b=qg(a),c=q(a,se);return b="function"==typeof b?b:fa,b&&c.pop(),c.length&&c[0]===a[0]?ud(c,fa,b):[]}),Hl=_d(tg),Il=lf(function(a,b){var c=null==a?0:a.length,d=$c(a,b);return Xd(a,q(b,function(a){return Df(a,c)?+a:a}).sort(Ee)),d}),Jl=_d(function(a){return le(jd(a,1,Qh,!0))}),Kl=_d(function(a){var b=qg(a);return Qh(b)&&(b=fa),le(jd(a,1,Qh,!0),qf(b,2))}),Ll=_d(function(a){var b=qg(a);return b="function"==typeof b?b:fa,le(jd(a,1,Qh,!0),fa,b)}),Ml=_d(function(a,b){return Qh(a)?ed(a,b):[]}),Nl=_d(function(a){return qe(n(a,Qh))}),Ol=_d(function(a){var b=qg(a);return Qh(b)&&(b=fa),qe(n(a,Qh),qf(b,2))}),Pl=_d(function(a){var b=qg(a);return b="function"==typeof b?b:fa,qe(n(a,Qh),fa,b)}),Ql=_d(Pg),Rl=_d(function(a){var b=a.length,c=b>1?a[b-1]:fa;return c="function"==typeof c?(a.pop(),c):fa,Qg(a,c)}),Sl=lf(function(a){var b=a.length,c=b?a[0]:0,d=this.__wrapped__,f=function(b){return $c(b,a)};return!(b>1||this.__actions__.length)&&d instanceof v&&Df(c)?(d=d.slice(c,+c+(b?1:0)),d.__actions__.push({func:Vg,args:[f],thisArg:fa}),new e(d,this.__chain__).thru(function(a){return b&&!a.length&&a.push(fa),a})):this.thru(f)}),Tl=Me(function(a,b,c){lk.call(a,c)?++a[c]:Zc(a,c,1)}),Ul=Ve(gg),Vl=Ve(hg),Wl=Me(function(a,b,c){lk.call(a,c)?a[c].push(b):Zc(a,c,[b])}),Xl=_d(function(a,b,c){var d=-1,e="function"==typeof b,f=Ph(a)?Zj(a.length):[];return jl(a,function(a){f[++d]=e?i(b,a,c):wd(a,b,c)}),f}),Yl=Me(function(a,b,c){Zc(a,c,b)}),Zl=Me(function(a,b,c){a[c?0:1].push(b)},function(){return[[],[]]}),$l=_d(function(a,b){if(null==a)return[];var c=b.length;return c>1&&Ef(a,b[0],b[1])?b=[]:c>2&&Ef(b[0],b[1],b[2])&&(b=[b[0]]),Sd(a,jd(b,1),[])}),_l=Fk||function(){return Bc.Date.now()},am=_d(function(a,b,c){var d=ra;if(c.length){var e=X(c,pf(am));d|=wa}return gf(a,d,b,c,e)}),bm=_d(function(a,b,c){var d=ra|sa;if(c.length){var e=X(c,pf(bm));d|=wa}return gf(b,d,a,c,e)}),cm=_d(function(a,b){return dd(a,1,b)}),dm=_d(function(a,b,c){return dd(a,ti(b)||0,c)});Ah.Cache=fc;var em=pl(function(a,b){b=1==b.length&&lm(b[0])?q(b[0],K(qf())):q(jd(b,1),K(qf()))
;var c=b.length;return _d(function(d){for(var e=-1,f=Pk(d.length,c);++e<f;)d[e]=b[e].call(this,d[e]);return i(a,this,d)})}),fm=_d(function(a,b){var c=X(b,pf(fm));return gf(a,wa,fa,b,c)}),gm=_d(function(a,b){var c=X(b,pf(gm));return gf(a,xa,fa,b,c)}),hm=lf(function(a,b){return gf(a,za,fa,fa,fa,b)}),im=cf(qd),jm=cf(function(a,b){return a>=b}),km=xd(function(){return arguments}())?xd:function(a){return ai(a)&&lk.call(a,"callee")&&!yk.call(a,"callee")},lm=Zj.isArray,mm=Hc?K(Hc):yd,nm=Kk||Kj,om=Ic?K(Ic):zd,pm=Jc?K(Jc):Cd,qm=Kc?K(Kc):Fd,rm=Lc?K(Lc):Gd,sm=Mc?K(Mc):Hd,tm=cf(Ld),um=cf(function(a,b){return a<=b}),vm=Ne(function(a,b){if(Jf(b)||Ph(b))return void Je(b,Ji(b),a);for(var c in b)lk.call(b,c)&&Uc(a,c,b[c])}),wm=Ne(function(a,b){Je(b,Ki(b),a)}),xm=Ne(function(a,b,c,d){Je(b,Ki(b),a,d)}),ym=Ne(function(a,b,c,d){Je(b,Ji(b),a,d)}),zm=lf($c),Am=_d(function(a){return a.push(fa,Sc),i(xm,fa,a)}),Bm=_d(function(a){return a.push(fa,Nf),i(Gm,fa,a)}),Cm=Ye(function(a,b,c){a[b]=c},xj(zj)),Dm=Ye(function(a,b,c){lk.call(a,b)?a[b].push(c):a[b]=[c]},qf),Em=_d(wd),Fm=Ne(function(a,b,c){Pd(a,b,c)}),Gm=Ne(function(a,b,c,d){Pd(a,b,c,d)}),Hm=lf(function(a,b){var c={};if(null==a)return c;var d=!1;b=q(b,function(b){return b=ue(b,a),d||(d=b.length>1),b}),Je(a,nf(a),c),d&&(c=ad(c,ma|na|oa));for(var e=b.length;e--;)me(c,b[e]);return c}),Im=lf(function(a,b){return null==a?{}:Td(a,b)}),Jm=ff(Ji),Km=ff(Ki),Lm=Se(function(a,b,c){return b=b.toLowerCase(),a+(c?_i(b):b)}),Mm=Se(function(a,b,c){return a+(c?"-":"")+b.toLowerCase()}),Nm=Se(function(a,b,c){return a+(c?" ":"")+b.toLowerCase()}),Om=Re("toLowerCase"),Pm=Se(function(a,b,c){return a+(c?"_":"")+b.toLowerCase()}),Qm=Se(function(a,b,c){return a+(c?" ":"")+Sm(b)}),Rm=Se(function(a,b,c){return a+(c?" ":"")+b.toUpperCase()}),Sm=Re("toUpperCase"),Tm=_d(function(a,b){try{return i(a,fa,b)}catch(a){return Wh(a)?a:new _j(a)}}),Um=lf(function(a,b){return k(b,function(b){b=Wf(b),Zc(a,b,am(a[b],a))}),a}),Vm=We(),Wm=We(!0),Xm=_d(function(a,b){return function(c){return wd(c,a,b)}}),Ym=_d(function(a,b){return function(c){return wd(a,c,b)}}),Zm=$e(q),$m=$e(m),_m=$e(u),an=bf(),bn=bf(!0),cn=Ze(function(a,b){return a+b},0),dn=ef("ceil"),en=Ze(function(a,b){return a/b},1),fn=ef("floor"),gn=Ze(function(a,b){return a*b},1),hn=ef("round"),jn=Ze(function(a,b){return a-b},0);return c.after=th,c.ary=uh,c.assign=vm,c.assignIn=wm,c.assignInWith=xm,c.assignWith=ym,c.at=zm,c.before=vh,c.bind=am,c.bindAll=Um,c.bindKey=bm,c.castArray=Ih,c.chain=Tg,c.chunk=$f,c.compact=_f,c.concat=ag,c.cond=vj,c.conforms=wj,c.constant=xj,c.countBy=Tl,c.create=xi,c.curry=wh,c.curryRight=xh,c.debounce=yh,c.defaults=Am,c.defaultsDeep=Bm,c.defer=cm,c.delay=dm,c.difference=Bl,c.differenceBy=Cl,c.differenceWith=Dl,c.drop=bg,c.dropRight=cg,c.dropRightWhile=dg,c.dropWhile=eg,c.fill=fg,c.filter=ch,c.flatMap=dh,c.flatMapDeep=eh,c.flatMapDepth=fh,c.flatten=ig,c.flattenDeep=jg,c.flattenDepth=kg,c.flip=zh,c.flow=Vm,c.flowRight=Wm,c.fromPairs=lg,c.functions=Ei,c.functionsIn=Fi,c.groupBy=Wl,c.initial=og,c.intersection=El,c.intersectionBy=Fl,c.intersectionWith=Gl,c.invert=Cm,c.invertBy=Dm,c.invokeMap=Xl,c.iteratee=Aj,c.keyBy=Yl,c.keys=Ji,c.keysIn=Ki,c.map=jh,c.mapKeys=Li,c.mapValues=Mi,c.matches=Bj,c.matchesProperty=Cj,c.memoize=Ah,c.merge=Fm,c.mergeWith=Gm,c.method=Xm,c.methodOf=Ym,c.mixin=Dj,c.negate=Bh,c.nthArg=Gj,c.omit=Hm,c.omitBy=Ni,c.once=Ch,c.orderBy=kh,c.over=Zm,c.overArgs=em,c.overEvery=$m,c.overSome=_m,c.partial=fm,c.partialRight=gm,c.partition=Zl,c.pick=Im,c.pickBy=Oi,c.property=Hj,c.propertyOf=Ij,c.pull=Hl,c.pullAll=tg,c.pullAllBy=ug,c.pullAllWith=vg,c.pullAt=Il,c.range=an,c.rangeRight=bn,c.rearg=hm,c.reject=nh,c.remove=wg,c.rest=Dh,c.reverse=xg,c.sampleSize=ph,c.set=Qi,c.setWith=Ri,c.shuffle=qh,c.slice=yg,c.sortBy=$l,c.sortedUniq=Fg,c.sortedUniqBy=Gg,c.split=kj,c.spread=Eh,c.tail=Hg,c.take=Ig,c.takeRight=Jg,c.takeRightWhile=Kg,c.takeWhile=Lg,c.tap=Ug,c.throttle=Fh,c.thru=Vg,c.toArray=pi,c.toPairs=Jm,c.toPairsIn=Km,c.toPath=Pj,c.toPlainObject=ui,c.transform=Si,c.unary=Gh,c.union=Jl,c.unionBy=Kl,c.unionWith=Ll,c.uniq=Mg,c.uniqBy=Ng,c.uniqWith=Og,c.unset=Ti,c.unzip=Pg,c.unzipWith=Qg,c.update=Ui,c.updateWith=Vi,c.values=Wi,c.valuesIn=Xi,c.without=Ml,c.words=uj,c.wrap=Hh,c.xor=Nl,c.xorBy=Ol,c.xorWith=Pl,c.zip=Ql,c.zipObject=Rg,c.zipObjectDeep=Sg,c.zipWith=Rl,c.entries=Jm,c.entriesIn=Km,c.extend=wm,c.extendWith=xm,Dj(c,c),c.add=cn,c.attempt=Tm,c.camelCase=Lm,c.capitalize=_i,c.ceil=dn,c.clamp=Yi,c.clone=Jh,c.cloneDeep=Lh,c.cloneDeepWith=Mh,c.cloneWith=Kh,c.conformsTo=Nh,c.deburr=aj,c.defaultTo=yj,c.divide=en,c.endsWith=bj,c.eq=Oh,c.escape=cj,c.escapeRegExp=dj,c.every=bh,c.find=Ul,c.findIndex=gg,c.findKey=yi,c.findLast=Vl,c.findLastIndex=hg,c.findLastKey=zi,c.floor=fn,c.forEach=gh,c.forEachRight=hh,c.forIn=Ai,c.forInRight=Bi,c.forOwn=Ci,c.forOwnRight=Di,c.get=Gi,c.gt=im,c.gte=jm,c.has=Hi,c.hasIn=Ii,c.head=mg,c.identity=zj,c.includes=ih,c.indexOf=ng,c.inRange=Zi,c.invoke=Em,c.isArguments=km,c.isArray=lm,c.isArrayBuffer=mm,c.isArrayLike=Ph,c.isArrayLikeObject=Qh,c.isBoolean=Rh,c.isBuffer=nm,c.isDate=om,c.isElement=Sh,c.isEmpty=Th,c.isEqual=Uh,c.isEqualWith=Vh,c.isError=Wh,c.isFinite=Xh,c.isFunction=Yh,c.isInteger=Zh,c.isLength=$h,c.isMap=pm,c.isMatch=bi,c.isMatchWith=ci,c.isNaN=di,c.isNative=ei,c.isNil=gi,c.isNull=fi,c.isNumber=hi,c.isObject=_h,c.isObjectLike=ai,c.isPlainObject=ii,c.isRegExp=qm,c.isSafeInteger=ji,c.isSet=rm,c.isString=ki,c.isSymbol=li,c.isTypedArray=sm,c.isUndefined=mi,c.isWeakMap=ni,c.isWeakSet=oi,c.join=pg,c.kebabCase=Mm,c.last=qg,c.lastIndexOf=rg,c.lowerCase=Nm,c.lowerFirst=Om,c.lt=tm,c.lte=um,c.max=Rj,c.maxBy=Sj,c.mean=Tj,c.meanBy=Uj,c.min=Vj,c.minBy=Wj,c.stubArray=Jj,c.stubFalse=Kj,c.stubObject=Lj,c.stubString=Mj,c.stubTrue=Nj,c.multiply=gn,c.nth=sg,c.noConflict=Ej,c.noop=Fj,c.now=_l,c.pad=ej,c.padEnd=fj,c.padStart=gj,c.parseInt=hj,c.random=$i,c.reduce=lh,c.reduceRight=mh,c.repeat=ij,c.replace=jj,c.result=Pi,c.round=hn,c.runInContext=a,c.sample=oh,c.size=rh,c.snakeCase=Pm,c.some=sh,c.sortedIndex=zg,c.sortedIndexBy=Ag,c.sortedIndexOf=Bg,c.sortedLastIndex=Cg,c.sortedLastIndexBy=Dg,c.sortedLastIndexOf=Eg,c.startCase=Qm,c.startsWith=lj,c.subtract=jn,c.sum=Xj,c.sumBy=Yj,c.template=mj,c.times=Oj,c.toFinite=qi,c.toInteger=ri,c.toLength=si,c.toLower=nj,c.toNumber=ti,c.toSafeInteger=vi,c.toString=wi,c.toUpper=oj,c.trim=pj,c.trimEnd=qj,c.trimStart=rj,c.truncate=sj,c.unescape=tj,c.uniqueId=Qj,c.upperCase=Rm,c.upperFirst=Sm,c.each=gh,c.eachRight=hh,c.first=mg,Dj(c,function(){var a={};return kd(c,function(b,d){lk.call(c.prototype,d)||(a[d]=b)}),a}(),{chain:!1}),c.VERSION="4.17.2",k(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){c[a].placeholder=c}),k(["drop","take"],function(a,b){v.prototype[a]=function(c){var d=this.__filtered__;if(d&&!b)return new v(this);c=c===fa?1:Ok(ri(c),0);var e=this.clone();return d?e.__takeCount__=Pk(c,e.__takeCount__):e.__views__.push({size:Pk(c,La),type:a+(e.__dir__<0?"Right":"")}),e},v.prototype[a+"Right"]=function(b){return this.reverse()[a](b).reverse()}}),k(["filter","map","takeWhile"],function(a,b){var c=b+1,d=c==Fa||3==c;v.prototype[a]=function(a){var b=this.clone();return b.__iteratees__.push({iteratee:qf(a,3),type:c}),b.__filtered__=b.__filtered__||d,b}}),k(["head","last"],function(a,b){var c="take"+(b?"Right":"");v.prototype[a]=function(){return this[c](1).value()[0]}}),k(["initial","tail"],function(a,b){var c="drop"+(b?"":"Right");v.prototype[a]=function(){return this.__filtered__?new v(this):this[c](1)}}),v.prototype.compact=function(){return this.filter(zj)},v.prototype.find=function(a){return this.filter(a).head()},v.prototype.findLast=function(a){return this.reverse().find(a)},v.prototype.invokeMap=_d(function(a,b){return"function"==typeof a?new v(this):this.map(function(c){return wd(c,a,b)})}),v.prototype.reject=function(a){return this.filter(Bh(qf(a)))},v.prototype.slice=function(a,b){a=ri(a);var c=this;return c.__filtered__&&(a>0||b<0)?new v(c):(a<0?c=c.takeRight(-a):a&&(c=c.drop(a)),b!==fa&&(b=ri(b),c=b<0?c.dropRight(-b):c.take(b-a)),c)},v.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},v.prototype.toArray=function(){return this.take(La)},kd(v.prototype,function(a,b){var d=/^(?:filter|find|map|reject)|While$/.test(b),f=/^(?:head|last)$/.test(b),g=c[f?"take"+("last"==b?"Right":""):b],h=f||/^find/.test(b);g&&(c.prototype[b]=function(){var b=this.__wrapped__,i=f?[1]:arguments,j=b instanceof v,k=i[0],l=j||lm(b),m=function(a){var b=g.apply(c,r([a],i));return f&&n?b[0]:b};l&&d&&"function"==typeof k&&1!=k.length&&(j=l=!1);var n=this.__chain__,o=!!this.__actions__.length,p=h&&!n,q=j&&!o;if(!h&&l){b=q?b:new v(this);var s=a.apply(b,i);return s.__actions__.push({func:Vg,args:[m],thisArg:fa}),new e(s,n)}return p&&q?a.apply(this,i):(s=this.thru(m),p?f?s.value()[0]:s.value():s)})}),k(["pop","push","shift","sort","splice","unshift"],function(a){var b=gk[a],d=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",e=/^(?:pop|shift)$/.test(a);c.prototype[a]=function(){var a=arguments;if(e&&!this.__chain__){var c=this.value();return b.apply(lm(c)?c:[],a)}return this[d](function(c){return b.apply(lm(c)?c:[],a)})}}),kd(v.prototype,function(a,b){var d=c[b];if(d){var e=d.name+"";(_k[e]||(_k[e]=[])).push({name:b,func:d})}}),_k[Xe(fa,sa).name]=[{name:"wrapper",func:fa}],v.prototype.clone=E,v.prototype.reverse=$,v.prototype.value=ca,c.prototype.at=Sl,c.prototype.chain=Wg,c.prototype.commit=Xg,c.prototype.next=Yg,c.prototype.plant=$g,c.prototype.reverse=_g,c.prototype.toJSON=c.prototype.valueOf=c.prototype.value=ah,c.prototype.first=c.prototype.head,Bk&&(c.prototype[Bk]=Zg),c}();"object"==f(c(5))&&c(5)?(Bc._=Rc,(d=function(){return Rc}.call(b,c,b,e))!==fa&&(e.exports=d)):Dc?((Dc.exports=Rc)._=Rc,Cc._=Rc):Bc._=Rc}).call(void 0)}).call(b,function(){return this}(),c(4)(a))},function(a,b){"use strict";a.exports=function(a){return a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],a.children=[],a.webpackPolyfill=1),a}},function(a,b){(function(b){a.exports=b}).call(b,{})},function(a,b,c){"use strict";a.exports.Model=c(7),a.exports.Collection=c(12),a.exports.Events=c(8),a.exports.extend=c(10)},function(a,b,c){"use strict";var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e=c(8),f=c(10),g=c(11),h=function(a,b){var c=a||{};b||(b={}),this.cid=g.uniqueId("c"),this.attributes={},b.collection&&(this.collection=b.collection),b.parse&&(c=this.parse(c,b)||{}),c=g.defaults({},c,g.result(this,"defaults")),this.set(c,b),this.changed={},this.initialize.apply(this,arguments)};g.extend(h.prototype,e,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return g.clone(this.attributes)},sync:function(){return Backbone.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return g.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,c){var e,f,h,i,j,k,l,m;if(null==a)return this;if("object"===(void 0===a?"undefined":d(a))?(f=a,c=b):(f={})[a]=b,c||(c={}),!this._validate(f,c))return!1;h=c.unset,j=c.silent,i=[],k=this._changing,this._changing=!0,k||(this._previousAttributes=g.clone(this.attributes),this.changed={}),m=this.attributes,l=this._previousAttributes,this.idAttribute in f&&(this.id=f[this.idAttribute]);for(e in f)b=f[e],g.isEqual(m[e],b)||i.push(e),g.isEqual(l[e],b)?delete this.changed[e]:this.changed[e]=b,h?delete m[e]:m[e]=b;if(!j){i.length&&(this._pending=c);for(var n=0,o=i.length;n<o;n++)this.trigger("change:"+i[n],this,m[i[n]],c)}if(k)return this;if(!j)for(;this._pending;)c=this._pending,this._pending=!1,this.trigger("change",this,c);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,g.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var c in this.attributes)b[c]=void 0;return this.set(b,g.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!g.isEmpty(this.changed):g.has(this.changed,a)},changedAttributes:function(a){if(!a)return!!this.hasChanged()&&g.clone(this.changed);var b,c=!1,d=this._changing?this._previousAttributes:this.attributes;for(var e in a)g.isEqual(d[e],b=a[e])||((c||(c={}))[e]=b);return c},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return g.clone(this._previousAttributes)},fetch:function(a){a=a?g.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;return a.success=function(d){if(!b.set(b.parse(d,a),a))return!1;c&&c(b,d,a),b.trigger("sync",b,d,a)},wrapError(this,a),this.sync("read",this,a)},save:function(a,b,c){var e,f,h,i=this.attributes;if(null==a||"object"===(void 0===a?"undefined":d(a))?(e=a,c=b):(e={})[a]=b,c=g.extend({validate:!0},c),e&&!c.wait){if(!this.set(e,c))return!1}else if(!this._validate(e,c))return!1;e&&c.wait&&(this.attributes=g.extend({},i,e)),void 0===c.parse&&(c.parse=!0);var j=this,k=c.success;return c.success=function(a){j.attributes=i;var b=j.parse(a,c);if(c.wait&&(b=g.extend(e||{},b)),g.isObject(b)&&!j.set(b,c))return!1;k&&k(j,a,c),j.trigger("sync",j,a,c)},wrapError(this,c),f=this.isNew()?"create":c.patch?"patch":"update","patch"!==f||c.attrs||(c.attrs=e),h=this.sync(f,this,c),e&&c.wait&&(this.attributes=i),h},destroy:function(a){a=a?g.clone(a):{};var b=this,c=a.success,d=function(){b.stopListening(),b.trigger("destroy",b,b.collection,a)};if(a.success=function(e){(a.wait||b.isNew())&&d(),c&&c(b,e,a),b.isNew()||b.trigger("sync",b,e,a)},this.isNew())return a.success(),!1;wrapError(this,a);var e=this.sync("delete",this,a);return a.wait||d(),e},url:function(){var a=g.result(this,"urlRoot")||g.result(this.collection,"url")||urlError();return this.isNew()?a:a.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},g.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=g.extend({},this.attributes,a);var c=this.validationError=this.validate(a,b)||null;return!c||(this.trigger("invalid",this,c,g.extend(b,{validationError:c})),!1)}});var i=["keys","values","pairs","invert","pick","omit","chain","isEmpty"];g.each(i,function(a){g[a]&&(h.prototype[a]=function(){var b=slice.call(arguments);return b.unshift(this.attributes),g[a].apply(g,b)})}),h.extend=f,a.exports=h},function(a,b,c){"use strict";a.exports=c(9)},function(a,b,c){"use strict";var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};!function(){var c,e=Array.prototype.forEach,f=Object.prototype.hasOwnProperty,g=Array.prototype.slice,h=0,i=function(){return{keys:Object.keys||function(a){if("object"!==(void 0===a?"undefined":d(a))&&"function"!=typeof a||null===a)throw new TypeError("keys() called on a non-object");var b,c=[];for(b in a)a.hasOwnProperty(b)&&(c[c.length]=b);return c},uniqueId:function(a){var b=++h+"";return a?a+b:b},has:function(a,b){return f.call(a,b)},each:function(a,b,c){if(null!=a)if(e&&a.forEach===e)a.forEach(b,c);else if(a.length===+a.length)for(var d=0,f=a.length;d<f;d++)b.call(c,a[d],d,a);else for(var g in a)this.has(a,g)&&b.call(c,a[g],g,a)},once:function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}}}}();c={on:function(a,b,c){return k(this,"on",a,[b,c])&&b?(this._events||(this._events={}),(this._events[a]||(this._events[a]=[])).push({callback:b,context:c,ctx:c||this}),this):this},once:function(a,b,c){if(!k(this,"once",a,[b,c])||!b)return this;var d=this,e=i.once(function(){d.off(a,e),b.apply(this,arguments)});return e._callback=b,this.on(a,e,c)},off:function(a,b,c){var d,e,f,g,h,j,l,m;if(!this._events||!k(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;for(g=a?[a]:i.keys(this._events),h=0,j=g.length;h<j;h++)if(a=g[h],f=this._events[a]){if(this._events[a]=d=[],b||c)for(l=0,m=f.length;l<m;l++)e=f[l],(b&&b!==e.callback&&b!==e.callback._callback||c&&c!==e.context)&&d.push(e);d.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=g.call(arguments,1);if(!k(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&l(c,b),d&&l(d,arguments),this},stopListening:function(a,b,c){var e=this._listeners;if(!e)return this;var f=!b&&!c;"object"===(void 0===b?"undefined":d(b))&&(c=this),a&&((e={})[a._listenerId]=a);for(var g in e)e[g].off(b,c,this),f&&delete this._listeners[g];return this}};var j=/\s+/,k=function(a,b,c,e){if(!c)return!0;if("object"===(void 0===c?"undefined":d(c))){for(var f in c)a[b].apply(a,[f,c[f]].concat(e));return!1}if(j.test(c)){for(var g=c.split(j),h=0,i=g.length;h<i;h++)a[b].apply(a,[g[h]].concat(e));return!1}return!0},l=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}},m={listenTo:"on",listenToOnce:"once"};i.each(m,function(a,b){c[b]=function(b,c,e){return(this._listeners||(this._listeners={}))[b._listenerId||(b._listenerId=i.uniqueId("l"))]=b,"object"===(void 0===c?"undefined":d(c))&&(e=this),b[a](c,e,this),this}}),c.bind=c.on,c.unbind=c.off,c.mixin=function(a){var b=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return i.each(b,function(b){a[b]=this[b]},this),a},void 0!==a&&a.exports&&(b=a.exports=c),b.BackboneEvents=c}()},function(a,b,c){var d,e,f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};!function(g){"object"===f(b)?a.exports=g():(d=g,void 0!==(e="function"==typeof d?d.call(b,c,b,a):d)&&(a.exports=e))}(function(){"use strict";var a={has:function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},extend:function(a){for(var b=1;b<arguments.length;++b){var c=arguments[b];if(c)for(var d in c)a[d]=c[d]}return a}};return function(b,c){var d,e=this;d=b&&a.has(b,"constructor")?b.constructor:function(){return e.apply(this,arguments)},a.extend(d,e,c);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,b&&a.extend(d.prototype,b),d.__super__=e.prototype,d}})},function(a,b,c){var d,e,f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};(function(){function c(a){function b(b,c,d,e,f,g){for(;f>=0&&f<g;f+=a){var h=e?e[f]:f;d=c(d,b[h],h,b)}return d}return function(c,d,e,f){d=y(d,f,4);var g=!F(c)&&x.keys(c),h=(g||c).length,i=a>0?0:h-1;return arguments.length<3&&(e=c[g?g[i]:i],i+=a),b(c,d,e,g,i,h)}}function g(a){return function(b,c,d){c=z(c,d);for(var e=E(b),f=a>0?0:e-1;f>=0&&f<e;f+=a)if(c(b[f],f,b))return f;return-1}}function h(a,b,c){return function(d,e,f){var g=0,h=E(d);if("number"==typeof f)a>0?g=f>=0?f:Math.max(f+h,g):h=f>=0?Math.min(f+1,h):f+h+1;else if(c&&f&&h)return f=c(d,e),d[f]===e?f:-1;if(e!==e)return f=b(p.call(d,g,h),x.isNaN),f>=0?f+g:-1;for(f=a>0?g:h-1;f>=0&&f<h;f+=a)if(d[f]===e)return f;return-1}}function i(a,b){var c=K.length,d=a.constructor,e=x.isFunction(d)&&d.prototype||m,f="constructor";for(x.has(a,f)&&!x.contains(b,f)&&b.push(f);c--;)(f=K[c])in a&&a[f]!==e[f]&&!x.contains(b,f)&&b.push(f)}var j=this,k=j._,l=Array.prototype,m=Object.prototype,n=Function.prototype,o=l.push,p=l.slice,q=m.toString,r=m.hasOwnProperty,s=Array.isArray,t=Object.keys,u=n.bind,v=Object.create,w=function(){},x=function a(b){return b instanceof a?b:this instanceof a?void(this._wrapped=b):new a(b)};void 0!==a&&a.exports&&(b=a.exports=x),b._=x,x.VERSION="1.8.3";var y=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},z=function(a,b,c){return null==a?x.identity:x.isFunction(a)?y(a,b,c):x.isObject(a)?x.matcher(a):x.property(a)};x.iteratee=function(a,b){return z(a,b,1/0)};var A=function(a,b){return function(c){var d=arguments.length;if(d<2||null==c)return c;for(var e=1;e<d;e++)for(var f=arguments[e],g=a(f),h=g.length,i=0;i<h;i++){var j=g[i];b&&void 0!==c[j]||(c[j]=f[j])}return c}},B=function(a){if(!x.isObject(a))return{};if(v)return v(a);w.prototype=a;var b=new w;return w.prototype=null,b},C=function(a){return function(b){return null==b?void 0:b[a]}},D=Math.pow(2,53)-1,E=C("length"),F=function(a){var b=E(a);return"number"==typeof b&&b>=0&&b<=D};x.each=x.forEach=function(a,b,c){b=y(b,c);var d,e;if(F(a))for(d=0,e=a.length;d<e;d++)b(a[d],d,a);else{var f=x.keys(a);for(d=0,e=f.length;d<e;d++)b(a[f[d]],f[d],a)}return a},x.map=x.collect=function(a,b,c){b=z(b,c);for(var d=!F(a)&&x.keys(a),e=(d||a).length,f=Array(e),g=0;g<e;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a)}return f},x.reduce=x.foldl=x.inject=c(1),x.reduceRight=x.foldr=c(-1),x.find=x.detect=function(a,b,c){var d;if(void 0!==(d=F(a)?x.findIndex(a,b,c):x.findKey(a,b,c))&&-1!==d)return a[d]},x.filter=x.select=function(a,b,c){var d=[];return b=z(b,c),x.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d},x.reject=function(a,b,c){return x.filter(a,x.negate(z(b)),c)},x.every=x.all=function(a,b,c){b=z(b,c);for(var d=!F(a)&&x.keys(a),e=(d||a).length,f=0;f<e;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return!1}return!0},x.some=x.any=function(a,b,c){b=z(b,c);for(var d=!F(a)&&x.keys(a),e=(d||a).length,f=0;f<e;f++){var g=d?d[f]:f;if(b(a[g],g,a))return!0}return!1},x.contains=x.includes=x.include=function(a,b,c,d){return F(a)||(a=x.values(a)),("number"!=typeof c||d)&&(c=0),x.indexOf(a,b,c)>=0},x.invoke=function(a,b){var c=p.call(arguments,2),d=x.isFunction(b);return x.map(a,function(a){var e=d?b:a[b];return null==e?e:e.apply(a,c)})},x.pluck=function(a,b){return x.map(a,x.property(b))},x.where=function(a,b){return x.filter(a,x.matcher(b))},x.findWhere=function(a,b){return x.find(a,x.matcher(b))},x.max=function(a,b,c){var d,e,f=-1/0,g=-1/0;if(null==b&&null!=a){a=F(a)?a:x.values(a);for(var h=0,i=a.length;h<i;h++)(d=a[h])>f&&(f=d)}else b=z(b,c),x.each(a,function(a,c,d){((e=b(a,c,d))>g||e===-1/0&&f===-1/0)&&(f=a,g=e)});return f},x.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=F(a)?a:x.values(a);for(var h=0,i=a.length;h<i;h++)(d=a[h])<f&&(f=d)}else b=z(b,c),x.each(a,function(a,c,d){((e=b(a,c,d))<g||e===1/0&&f===1/0)&&(f=a,g=e)});return f},x.shuffle=function(a){for(var b,c=F(a)?a:x.values(a),d=c.length,e=Array(d),f=0;f<d;f++)b=x.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},x.sample=function(a,b,c){return null==b||c?(F(a)||(a=x.values(a)),a[x.random(a.length-1)]):x.shuffle(a).slice(0,Math.max(0,b))},x.sortBy=function(a,b,c){return b=z(b,c),x.pluck(x.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(c<d||void 0===d)return-1}return a.index-b.index}),"value")};var G=function(a){return function(b,c,d){var e={};return c=z(c,d),x.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};x.groupBy=G(function(a,b,c){x.has(a,c)?a[c].push(b):a[c]=[b]}),x.indexBy=G(function(a,b,c){a[c]=b}),x.countBy=G(function(a,b,c){x.has(a,c)?a[c]++:a[c]=1}),x.toArray=function(a){return a?x.isArray(a)?p.call(a):F(a)?x.map(a,x.identity):x.values(a):[]},x.size=function(a){return null==a?0:F(a)?a.length:x.keys(a).length},x.partition=function(a,b,c){b=z(b,c);var d=[],e=[];return x.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},x.first=x.head=x.take=function(a,b,c){if(null!=a)return null==b||c?a[0]:x.initial(a,a.length-b)},x.initial=function(a,b,c){return p.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},x.last=function(a,b,c){if(null!=a)return null==b||c?a[a.length-1]:x.rest(a,Math.max(0,a.length-b))},x.rest=x.tail=x.drop=function(a,b,c){return p.call(a,null==b||c?1:b)},x.compact=function(a){return x.filter(a,x.identity)};var H=function a(b,c,d,e){for(var f=[],g=0,h=e||0,i=E(b);h<i;h++){var j=b[h];if(F(j)&&(x.isArray(j)||x.isArguments(j))){c||(j=a(j,c,d));var k=0,l=j.length;for(f.length+=l;k<l;)f[g++]=j[k++]}else d||(f[g++]=j)}return f};x.flatten=function(a,b){return H(a,b,!1)},x.without=function(a){return x.difference(a,p.call(arguments,1))},x.uniq=x.unique=function(a,b,c,d){x.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=z(c,d));for(var e=[],f=[],g=0,h=E(a);g<h;g++){var i=a[g],j=c?c(i,g,a):i;b?(g&&f===j||e.push(i),f=j):c?x.contains(f,j)||(f.push(j),e.push(i)):x.contains(e,i)||e.push(i)}return e},x.union=function(){return x.uniq(H(arguments,!0,!0))},x.intersection=function(a){for(var b=[],c=arguments.length,d=0,e=E(a);d<e;d++){var f=a[d];if(!x.contains(b,f)){for(var g=1;g<c&&x.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},x.difference=function(a){var b=H(arguments,!0,!0,1);return x.filter(a,function(a){return!x.contains(b,a)})},x.zip=function(){return x.unzip(arguments)},x.unzip=function(a){for(var b=a&&x.max(a,E).length||0,c=Array(b),d=0;d<b;d++)c[d]=x.pluck(a,d);return c},x.object=function(a,b){for(var c={},d=0,e=E(a);d<e;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},x.findIndex=g(1),x.findLastIndex=g(-1),x.sortedIndex=function(a,b,c,d){c=z(c,d,1);for(var e=c(b),f=0,g=E(a);f<g;){var h=Math.floor((f+g)/2);c(a[h])<e?f=h+1:g=h}return f},x.indexOf=h(1,x.findIndex,x.sortedIndex),x.lastIndexOf=h(-1,x.findLastIndex),x.range=function(a,b,c){null==b&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;f<d;f++,a+=c)e[f]=a;return e};var I=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=B(a.prototype),g=a.apply(f,e);return x.isObject(g)?g:f};x.bind=function(a,b){if(u&&a.bind===u)return u.apply(a,p.call(arguments,1));if(!x.isFunction(a))throw new TypeError("Bind must be called on a function");var c=p.call(arguments,2);return function d(){return I(a,d,b,this,c.concat(p.call(arguments)))}},x.partial=function(a){var b=p.call(arguments,1);return function c(){for(var d=0,e=b.length,f=Array(e),g=0;g<e;g++)f[g]=b[g]===x?arguments[d++]:b[g];for(;d<arguments.length;)f.push(arguments[d++]);return I(a,c,this,this,f)}},x.bindAll=function(a){var b,c,d=arguments.length;if(d<=1)throw new Error("bindAll must be passed function names");for(b=1;b<d;b++)c=arguments[b],a[c]=x.bind(a[c],a);return a},x.memoize=function(a,b){var c=function c(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return x.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},x.delay=function(a,b){var c=p.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},x.defer=x.partial(x.delay,x,1),x.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=!1===c.leading?0:x.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=x.now();h||!1!==c.leading||(h=j);var k=b-(j-h);return d=this,e=arguments,k<=0||k>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),g||(d=e=null)):g||!1===c.trailing||(g=setTimeout(i,k)),f}},x.debounce=function(a,b,c){var d,e,f,g,h,i=function i(){var j=x.now()-g;j<b&&j>=0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=x.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},x.wrap=function(a,b){return x.partial(b,a)},x.negate=function(a){return function(){return!a.apply(this,arguments)}},x.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},x.after=function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}},x.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),a<=1&&(b=null),c}},x.once=x.partial(x.before,2);var J=!{toString:null}.propertyIsEnumerable("toString"),K=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];x.keys=function(a){if(!x.isObject(a))return[];if(t)return t(a);var b=[];for(var c in a)x.has(a,c)&&b.push(c);return J&&i(a,b),b},x.allKeys=function(a){if(!x.isObject(a))return[];var b=[];for(var c in a)b.push(c);return J&&i(a,b),b},x.values=function(a){for(var b=x.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=a[b[e]];return d},x.mapObject=function(a,b,c){b=z(b,c);for(var d,e=x.keys(a),f=e.length,g={},h=0;h<f;h++)d=e[h],g[d]=b(a[d],d,a);return g},x.pairs=function(a){for(var b=x.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=[b[e],a[b[e]]];return d},x.invert=function(a){for(var b={},c=x.keys(a),d=0,e=c.length;d<e;d++)b[a[c[d]]]=c[d];return b},x.functions=x.methods=function(a){var b=[];for(var c in a)x.isFunction(a[c])&&b.push(c);return b.sort()},x.extend=A(x.allKeys),x.extendOwn=x.assign=A(x.keys),x.findKey=function(a,b,c){b=z(b,c);for(var d,e=x.keys(a),f=0,g=e.length;f<g;f++)if(d=e[f],b(a[d],d,a))return d},x.pick=function(a,b,c){var d,e,f={},g=a;if(null==g)return f;x.isFunction(b)?(e=x.allKeys(g),d=y(b,c)):(e=H(arguments,!1,!1,1),d=function(a,b,c){return b in c},g=Object(g));for(var h=0,i=e.length;h<i;h++){var j=e[h],k=g[j];d(k,j,g)&&(f[j]=k)}return f},x.omit=function(a,b,c){if(x.isFunction(b))b=x.negate(b);else{var d=x.map(H(arguments,!1,!1,1),String);b=function(a,b){return!x.contains(d,b)}}return x.pick(a,b,c)},x.defaults=A(x.allKeys,!0),x.create=function(a,b){var c=B(a);return b&&x.extendOwn(c,b),c},x.clone=function(a){return x.isObject(a)?x.isArray(a)?a.slice():x.extend({},a):a},x.tap=function(a,b){return b(a),a},x.isMatch=function(a,b){var c=x.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;f<d;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return!1}return!0};var L=function a(b,c,d,e){if(b===c)return 0!==b||1/b==1/c;if(null==b||null==c)return b===c;b instanceof x&&(b=b._wrapped),c instanceof x&&(c=c._wrapped);var g=q.call(b);if(g!==q.call(c))return!1;switch(g){case"[object RegExp]":case"[object String]":return""+b==""+c;case"[object Number]":return+b!=+b?+c!=+c:0==+b?1/+b==1/c:+b==+c;case"[object Date]":case"[object Boolean]":return+b==+c}var h="[object Array]"===g;if(!h){if("object"!=(void 0===b?"undefined":f(b))||"object"!=(void 0===c?"undefined":f(c)))return!1;var i=b.constructor,j=c.constructor;if(i!==j&&!(x.isFunction(i)&&i instanceof i&&x.isFunction(j)&&j instanceof j)&&"constructor"in b&&"constructor"in c)return!1}d=d||[],e=e||[];for(var k=d.length;k--;)if(d[k]===b)return e[k]===c;if(d.push(b),e.push(c),h){if((k=b.length)!==c.length)return!1;for(;k--;)if(!a(b[k],c[k],d,e))return!1}else{var l,m=x.keys(b);if(k=m.length,x.keys(c).length!==k)return!1;for(;k--;)if(l=m[k],!x.has(c,l)||!a(b[l],c[l],d,e))return!1}return d.pop(),e.pop(),!0};x.isEqual=function(a,b){return L(a,b)},x.isEmpty=function(a){return null==a||(F(a)&&(x.isArray(a)||x.isString(a)||x.isArguments(a))?0===a.length:0===x.keys(a).length)},x.isElement=function(a){return!(!a||1!==a.nodeType)},x.isArray=s||function(a){return"[object Array]"===q.call(a)},x.isObject=function(a){var b=void 0===a?"undefined":f(a);return"function"===b||"object"===b&&!!a},x.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){x["is"+a]=function(b){return q.call(b)==="[object "+a+"]"}}),x.isArguments(arguments)||(x.isArguments=function(a){return x.has(a,"callee")}),"function"!=typeof/./&&"object"!=("undefined"==typeof Int8Array?"undefined":f(Int8Array))&&(x.isFunction=function(a){return"function"==typeof a||!1}),x.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},x.isNaN=function(a){return x.isNumber(a)&&a!==+a},
x.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"===q.call(a)},x.isNull=function(a){return null===a},x.isUndefined=function(a){return void 0===a},x.has=function(a,b){return null!=a&&r.call(a,b)},x.noConflict=function(){return j._=k,this},x.identity=function(a){return a},x.constant=function(a){return function(){return a}},x.noop=function(){},x.property=C,x.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},x.matcher=x.matches=function(a){return a=x.extendOwn({},a),function(b){return x.isMatch(b,a)}},x.times=function(a,b,c){var d=Array(Math.max(0,a));b=y(b,c,1);for(var e=0;e<a;e++)d[e]=b(e);return d},x.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},x.now=Date.now||function(){return(new Date).getTime()};var M={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},N=x.invert(M),O=function(a){var b=function(b){return a[b]},c="(?:"+x.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};x.escape=O(M),x.unescape=O(N),x.result=function(a,b,c){var d=null==a?void 0:a[b];return void 0===d&&(d=c),x.isFunction(d)?d.call(a):d};var P=0;x.uniqueId=function(a){var b=++P+"";return a?a+b:b},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Q={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},R=function(a){return"\\"+Q[a]};x.template=function(a,b,c){!b&&c&&(b=c),b=x.defaults({},b,x.templateSettings);var d=RegExp([(b.escape||/(.)^/).source,(b.interpolate||/(.)^/).source,(b.evaluate||/(.)^/).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(/\\|'|\r|\n|\u2028|\u2029/g,R),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(a){throw a.source=f,a}var h=function(a){return g.call(this,a,x)};return h.source="function("+(b.variable||"obj")+"){\n"+f+"}",h},x.chain=function(a){var b=x(a);return b._chain=!0,b};var S=function(a,b){return a._chain?x(b).chain():b};x.mixin=function(a){x.each(x.functions(a),function(b){var c=x[b]=a[b];x.prototype[b]=function(){var a=[this._wrapped];return o.apply(a,arguments),S(this,c.apply(x,a))}})},x.mixin(x),x.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=l[a];x.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],S(this,c)}}),x.each(["concat","join","slice"],function(a){var b=l[a];x.prototype[a]=function(){return S(this,b.apply(this._wrapped,arguments))}}),x.prototype.value=function(){return this._wrapped},x.prototype.valueOf=x.prototype.toJSON=x.prototype.value,x.prototype.toString=function(){return""+this._wrapped},d=[],void 0!==(e=function(){return x}.apply(b,d))&&(a.exports=e)}).call(void 0)},function(a,b,c){"use strict";var d=c(8),e=c(10),f=c(11),g=c(7),h=[],i=h.slice,j=function(a,b){b||(b={}),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,f.extend({silent:!0},b))},k={add:!0,remove:!0,merge:!0},l={add:!0,remove:!1};f.extend(j.prototype,d,{model:g,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return Backbone.sync.apply(this,arguments)},add:function(a,b){return this.set(a,f.extend({merge:!1},b,l))},remove:function(a,b){var c=!f.isArray(a);a=c?[a]:f.clone(a),b||(b={});for(var d=0,e=a.length;d<e;d++){var g=a[d]=this.get(a[d]);if(g){var h=this.modelId(g.attributes);null!=h&&delete this._byId[h],delete this._byId[g.cid];var i=this.indexOf(g);this.models.splice(i,1),this.length--,b.silent||(b.index=i,g.trigger("remove",g,this,b)),this._removeReference(g,b)}}return c?a[0]:a},set:function(a,b){b=f.defaults({},b,k),b.parse&&(a=this.parse(a,b));var c=!f.isArray(a);a=c?a?[a]:[]:a.slice();for(var d,e,g,h,i,j=b.at,l=this.comparator&&null==j&&!1!==b.sort,m=f.isString(this.comparator)?this.comparator:null,n=[],o=[],p={},q=b.add,r=b.merge,s=b.remove,t=!(l||!q||!s)&&[],u=0,v=a.length;u<v;u++){if(g=a[u],h=this.get(g))s&&(p[h.cid]=!0),r&&g!==h&&(g=this._isModel(g)?g.attributes:g,b.parse&&(g=h.parse(g,b)),h.set(g,b),l&&!i&&h.hasChanged(m)&&(i=!0)),a[u]=h;else if(q){if(!(e=a[u]=this._prepareModel(g,b)))continue;n.push(e),this._addReference(e,b)}e=h||e,e&&(d=this.modelId(e.attributes),!t||!e.isNew()&&p[d]||t.push(e),p[d]=!0)}if(s){for(var u=0,v=this.length;u<v;u++)p[(e=this.models[u]).cid]||o.push(e);o.length&&this.remove(o,b)}if(n.length||t&&t.length)if(l&&(i=!0),this.length+=n.length,null!=j)for(var u=0,v=n.length;u<v;u++)this.models.splice(j+u,0,n[u]);else{t&&(this.models.length=0);for(var w=t||n,u=0,v=w.length;u<v;u++)this.models.push(w[u])}if(i&&this.sort({silent:!0}),!b.silent){for(var x=null!=j?f.clone(b):b,u=0,v=n.length;u<v;u++)null!=j&&(x.index=j+u),(e=n[u]).trigger("add",e,this,x);(i||t&&t.length)&&this.trigger("sort",this,b)}return c?a[0]:a},reset:function(a,b){b||(b={});for(var c=0,d=this.models.length;c<d;c++)this._removeReference(this.models[c],b);return b.previousModels=this.models,this._reset(),a=this.add(a,f.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),a},push:function(a,b){return this.add(a,f.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return this.add(a,f.extend({at:0},b))},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(){return i.apply(this.models,arguments)},get:function(a){if(null!=a){var b=this.modelId(this._isModel(a)?a.attributes:a);return this._byId[a]||this._byId[b]||this._byId[a.cid]}},at:function(a){return a<0&&(a+=this.length),this.models[a]},where:function(a,b){return f.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),f.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(f.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return f.invoke(this.models,"get",a)},fetch:function(a){a=a?f.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success,c=this;return a.success=function(d){var e=a.reset?"reset":"set";c[e](d,a),b&&b(c,d,a),c.trigger("sync",c,d,a)},wrapError(this,a),this.sync("read",this,a)},create:function(a,b){if(b=b?f.clone(b):{},!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var c=this,d=b.success;return b.success=function(a,e){b.wait&&c.add(a,b),d&&d(a,e,b)},a.save(null,b),a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(a){return a[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(this._isModel(a))return a.collection||(a.collection=this),a;b=b?f.clone(b):{},b.collection=this;var c=new this.model(a,b);return c.validationError?(this.trigger("invalid",this,c.validationError,b),!1):c},_isModel:function(a){return a instanceof g},_addReference:function(a,b){this._byId[a.cid]=a;var c=this.modelId(a.attributes);null!=c&&(this._byId[c]=a),a.on("all",this._onModelEvent,this)},_removeReference:function(a,b){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){if("add"!==a&&"remove"!==a||c===this){if("destroy"===a&&this.remove(b,d),"change"===a){var e=this.modelId(b.previousAttributes()),f=this.modelId(b.attributes);e!==f&&(null!=e&&delete this._byId[e],null!=f&&(this._byId[f]=b))}this.trigger.apply(this,arguments)}}});var m=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample","partition"];f.each(m,function(a){f[a]&&(j.prototype[a]=function(){var b=i.call(arguments);return b.unshift(this.models),f[a].apply(f,b)})});var n=["groupBy","countBy","sortBy","indexBy"];f.each(n,function(a){f[a]&&(j.prototype[a]=function(b,c){var d=f.isFunction(b)?b:function(a){return a.get(b)};return f[a](this.models,d,c)})}),j.extend=e,a.exports=j},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(2),e=c(3),f=c(6).Collection,g=f.extend({model:d.sel,initialize:function(a,b){if(void 0!==b&&null!==b)return this.g=b.g,this.listenTo(this.g,"residue:click",function(a){return this._handleE(a.evt,new d.possel({xStart:a.rowPos,xEnd:a.rowPos,seqId:a.seqId}))}),this.listenTo(this.g,"row:click",function(a){return this._handleE(a.evt,new d.rowsel({seqId:a.seqId}))}),this.listenTo(this.g,"column:click",function(a){return this._handleE(a.evt,new d.columnsel({xStart:a.rowPos,xEnd:a.rowPos+a.stepSize-1}))})},getSelForRow:function(a){return this.filter(function(b){return b.inRow(a)})},getSelForColumns:function(a){return this.filter(function(b){return b.inColumn(a)})},addJSON:function(a){return this.add(this._fromJSON(a))},_fromJSON:function(a){switch(a.type){case"column":return new d.columnsel(a);case"row":return new d.rowsel(a);case"pos":return new d.possel(a)}},resetJSON:function(a){return a=a.map(this._fromJSON),this.reset(a)},getBlocksForRow:function(a,b){for(var c=this.filter(function(b){return b.inRow(a)}),d=[],e=0;e<c.length;e++){if("break"===function(a,e){var e=c[a];if("row"===e.attributes.type)return d=function(){var a=[],c=0;if(0<=b)for(;c<=b;)a.push(c++);else for(;c>=b;)a.push(c--);return a}(),"break";d=d.concat(function(){var a=[],b=e.attributes.xStart;if(e.attributes.xStart<=e.attributes.xEnd)for(;b<=e.attributes.xEnd;)a.push(b++);else for(;b>=e.attributes.xEnd;)a.push(b--);return a}())}(e,void 0))break}return d},getAllColumnBlocks:function(a){var b=(a.maxLen,a.withPos,[]),c=void 0;c=a.withPos?this.filter(function(a){return null!=a.get("xStart")}):this.filter(function(a){return"column"===a.get("type")});for(var d=0;d<c.length;d++)!function(a,d){var d=c[a];b=b.concat(function(){var a=[],b=d.attributes.xStart;if(d.attributes.xStart<=d.attributes.xEnd)for(;b<=d.attributes.xEnd;)a.push(b++);else for(;b>=d.attributes.xEnd;)a.push(b--);return a}())}(d,void 0);return b=(0,e.uniq)(b)},invertRow:function(a){var b=this.where({type:"row"});b=b.map(function(a){return a.attributes.seqId});for(var c,f=(0,e.filter)(a,function(a){return!(b.indexOf(a)>=0)}),g=[],h=0;h<f.length;h++){var c=f[h];g.push(new d.rowsel({seqId:c}))}return this.reset(g)},invertCol:function(a){var b=this.where({type:"column"}).reduce(function(a,b){return a.concat(function(){var a=[],c=b.attributes.xStart;if(b.attributes.xStart<=b.attributes.xEnd)for(;c<=b.attributes.xEnd;)a.push(c++);else for(;c>=b.attributes.xEnd;)a.push(c--);return a}())},[]),c=(0,e.filter)(a,function(a){return!(b.indexOf(a)>=0)});if(0!==c.length){for(var f,g=[],h=c[0],i=h,j=0;j<c.length;j++)f=c[j],i+1===f?i=f:(g.push(new d.columnsel({xStart:h,xEnd:i})),h=i=f);return h!==i&&g.push(new d.columnsel({xStart:h,xEnd:c[c.length-1]})),this.reset(g)}},_handleE:function(a,b){return a.ctrlKey||a.metaKey?this.add(b):this.reset([b])},_reduceColumns:function(){return this.each(function(a,b,c){for(var d=(0,e.filter)(c,function(a){return"column"===a.get("type")}),f=a.get("xStart"),g=a.get("xEnd"),h=(0,e.filter)(d,function(a){return a.get("xEnd")===f-1}),i=0;i<h.length;i++){h[i].set("xEnd",f)}for(var j=(0,e.filter)(d,function(a){return a.get("xStart")===g+1}),k=0;k<j.length;k++){j[k].set("xStart",g)}if(h.length>0||j.length>0)return console.log("removed el"),a.collection.remove(a)})}});b.default=g},function(a,b,c){"use strict";var d=c(11),e=c(8),f=c(10),g=c(15),h=function(a){this.cid=d.uniqueId("view"),a||(a={}),d.extend(this,d.pick(a,i)),this._ensureElement(),this.initialize.apply(this,arguments)},i=["model","collection","el","id","attributes","className","tagName","events"];d.extend(h.prototype,e,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(a){return this.undelegateEvents(),this._setElement(a),this.delegateEvents(),this},_setElement:function(a){this.$el=a instanceof g?a:g(a),this.el=this.$el[0]},delegateEvents:function(a){if(!a&&!(a=d.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var c=a[b];if(d.isFunction(c)||(c=this[a[b]]),c){var e=b.match(/^(\S+)\s*(.*)$/);this.delegate(e[1],e[2],d.bind(c,this))}}return this},delegate:function(a,b,c){this.$el.on(a+".delegateEvents"+this.cid,b,c)},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(a,b,c){this.$el.off(a+".delegateEvents"+this.cid,b,c)},_createElement:function(a){return document.createElement(a)},_ensureElement:function(){if(this.el)this.setElement(d.result(this,"el"));else{var a=d.extend({},d.result(this,"attributes"));this.id&&(a.id=d.result(this,"id")),this.className&&(a.class=d.result(this,"className")),this.setElement(this._createElement(d.result(this,"tagName"))),this._setAttributes(a)}},_setAttributes:function(a){this.$el.attr(a)}}),h.extend=f,a.exports=h},function(a,b,c){var d;(function(a){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};!function(f){function g(a){var b=a.length,c=void 0===a?"undefined":e(a);return!t(c)&&a!==f&&(!(1!==a.nodeType||!b)||(u(c)||0===b||"number"==typeof b&&b>0&&b-1 in a))}function h(a,b){var c,d;this.originalEvent=a,d=function(a,b){"preventDefault"===a?this[a]=function(){return this.defaultPrevented=!0,b[a]()}:"stopImmediatePropagation"===a?this[a]=function(){return this.immediatePropagationStopped=!0,b[a]()}:t(b[a])?this[a]=function(){return b[a]()}:this[a]=b[a]};for(c in a)(a[c]||"function"==typeof a[c])&&d.call(this,c,a);v.extend(this,b,{isImmediatePropagationStopped:function(){return!!this.immediatePropagationStopped}})}var i,j=f.$,k=f.jBone,l=/^<(\w+)\s*\/?>$/,m=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,n=[].slice,o=[].splice,p=Object.keys,q=document,r=function(a){return"string"==typeof a},s=function(a){return a instanceof Object},t=function(a){return"[object Function]"==={}.toString.call(a)},u=function(a){return Array.isArray(a)},v=function(a,b){return new i.init(a,b)};v.noConflict=function(){return f.$=j,f.jBone=k,v},i=v.fn=v.prototype={init:function(a,b){var c,d,e,f;if(!a)return this;if(r(a)){if(d=l.exec(a))return this[0]=q.createElement(d[1]),this.length=1,s(b)&&this.attr(b),this;if((d=m.exec(a))&&d[1]){for(f=q.createDocumentFragment(),e=q.createElement("div"),e.innerHTML=a;e.lastChild;)f.appendChild(e.firstChild);return c=n.call(f.childNodes),v.merge(this,c)}if(v.isElement(b))return v(b).find(a);try{return c=q.querySelectorAll(a),v.merge(this,c)}catch(a){return this}}return a.nodeType?(this[0]=a,this.length=1,this):t(a)?a():a instanceof v?a:v.makeArray(a,this)},pop:[].pop,push:[].push,reverse:[].reverse,shift:[].shift,sort:[].sort,splice:[].splice,slice:[].slice,indexOf:[].indexOf,forEach:[].forEach,unshift:[].unshift,concat:[].concat,join:[].join,every:[].every,some:[].some,filter:[].filter,map:[].map,reduce:[].reduce,reduceRight:[].reduceRight,length:0},i.constructor=v,i.init.prototype=i,v.setId=function(a){var b=a.jid;a===f?b="window":void 0===a.jid&&(a.jid=b=++v._cache.jid),v._cache.events[b]||(v._cache.events[b]={})},v.getData=function(a){a=a instanceof v?a[0]:a;var b=a===f?"window":a.jid;return{jid:b,events:v._cache.events[b]}},v.isElement=function(a){return a&&a instanceof v||a instanceof HTMLElement||r(a)},v._cache={events:{},jid:0},i.pushStack=function(a){return v.merge(this.constructor(),a)},v.merge=function(a,b){for(var c=b.length,d=a.length,e=0;e<c;)a[d++]=b[e++];return a.length=d,a},v.contains=function(a,b){return a.contains(b)},v.extend=function(a){var b;return o.call(arguments,1).forEach(function(c){if(b=a,c)for(var d in c)b[d]=c[d]}),a},v.makeArray=function(a,b){var c=b||[];return null!==a&&(g(a)?v.merge(c,r(a)?[a]:a):c.push(a)),c},v.unique=function(a){if(null==a)return[];for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c];b.indexOf(e)<0&&b.push(e)}return b},v.Event=function(a,b){var c,d;return a.type&&!b&&(b=a,a=a.type),c=a.split(".").splice(1).join("."),d=a.split(".")[0],a=q.createEvent("Event"),a.initEvent(d,!0,!0),v.extend(a,{namespace:c,isDefaultPrevented:function(){return a.defaultPrevented}},b)},v.event={add:function(a,b,c,d,e){v.setId(a);var f,g,h,i=function(b){v.event.dispatch.call(a,b)},j=v.getData(a).events;for(b=b.split(" "),g=b.length;g--;)h=b[g],f=h.split(".")[0],j[f]=j[f]||[],j[f].length?i=j[f][0].fn:a.addEventListener&&a.addEventListener(f,i,!1),j[f].push({namespace:h.split(".").splice(1).join("."),fn:i,selector:e,data:d,originfn:c})},remove:function(a,b,c,d){var e,f,g=function(a,b,d,e,f){var g;(c&&f.originfn===c||!c)&&(g=f.fn),a[b][d].fn===g&&(a[b].splice(d,1),a[b].length||e.removeEventListener(b,g))},h=v.getData(a).events;if(h)return!b&&h?p(h).forEach(function(b){for(f=h[b],e=f.length;e--;)g(h,b,e,a,f[e])}):void b.split(" ").forEach(function(b){var c,i=b.split(".")[0],j=b.split(".").splice(1).join(".");if(h[i])for(f=h[i],e=f.length;e--;)c=f[e],(!j||j&&c.namespace===j)&&(!d||d&&c.selector===d)&&g(h,i,e,a,c);else j&&p(h).forEach(function(b){for(f=h[b],e=f.length;e--;)c=f[e],c.namespace.split(".")[0]===j.split(".")[0]&&g(h,b,e,a,c)})})},trigger:function(a,b){var c=[];r(b)?c=b.split(" ").map(function(a){return v.Event(a)}):(b=b instanceof Event?b:v.Event(b),c=[b]),c.forEach(function(b){b.type&&a.dispatchEvent&&a.dispatchEvent(b)})},dispatch:function(a){for(var b,c,d,e,f,g=0,i=0,j=this,k=v.getData(j).events[a.type],l=k.length,m=[],n=[];g<l;g++)m.push(k[g]);for(g=0,l=m.length;g<l&&~k.indexOf(m[g])&&(!e||!e.isImmediatePropagationStopped());g++)if(c=null,f={},d=m[g],d.data&&(f.data=d.data),d.selector){if(~(n=v(j).find(d.selector)).indexOf(a.target)&&(c=a.target)||j!==a.target&&j.contains(a.target)){if(!c)for(b=n.length,i=0;i<b;i++)n[i]&&n[i].contains(a.target)&&(c=n[i]);if(!c)continue;f.currentTarget=c,e=new h(a,f),a.namespace&&a.namespace!==d.namespace||d.originfn.call(c,e)}}else e=new h(a,f),a.namespace&&a.namespace!==d.namespace||d.originfn.call(j,e)}},i.on=function(a,b,c,d){var e=this.length,f=0;if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),!d)return this;for(;f<e;f++)v.event.add(this[f],a,d,c,b);return this},i.one=function(a){var b,c=arguments,d=0,e=this.length,f=n.call(c,1,c.length-1),g=n.call(c,-1)[0];for(b=function(b){var c=v(b);a.split(" ").forEach(function(a){var d=function d(e){c.off(a,d),g.call(b,e)};c.on.apply(c,[a].concat(f,d))})};d<e;d++)b(this[d]);return this},i.trigger=function(a){var b=0,c=this.length;if(!a)return this;for(;b<c;b++)v.event.trigger(this[b],a);return this},i.off=function(a,b,c){var d=0,e=this.length;for(t(b)&&(c=b,b=void 0);d<e;d++)v.event.remove(this[d],a,c,b);return this},i.find=function(a){for(var b=[],c=0,d=this.length;c<d;c++)!function(c){t(c.querySelectorAll)&&[].forEach.call(c.querySelectorAll(a),function(a){b.push(a)})}(this[c]);return v(b)},i.get=function(a){return null!=a?a<0?this[a+this.length]:this[a]:n.call(this)},i.eq=function(a){return v(this[a])},i.parent=function(){for(var a,b=[],c=0,d=this.length;c<d;c++)!~b.indexOf(a=this[c].parentElement)&&a&&b.push(a);return v(b)},i.toArray=function(){return n.call(this)},i.is=function(){var a=arguments;return this.some(function(b){return b.tagName.toLowerCase()===a[0]})},i.has=function(){var a=arguments;return this.some(function(b){return b.querySelectorAll(a[0]).length})},i.add=function(a,b){return this.pushStack(v.unique(v.merge(this.get(),v(a,b))))},i.attr=function(a,b){var c,d=arguments,e=0,f=this.length;if(r(a)&&1===d.length)return this[0]&&this[0].getAttribute(a);for(2===d.length?c=function(c){c.setAttribute(a,b)}:s(a)&&(c=function(b){p(a).forEach(function(c){b.setAttribute(c,a[c])})});e<f;e++)c(this[e]);return this},i.removeAttr=function(a){for(var b=0,c=this.length;b<c;b++)this[b].removeAttribute(a);return this},i.val=function(a){var b=0,c=this.length;if(0===arguments.length)return this[0]&&this[0].value;for(;b<c;b++)this[b].value=a;return this},i.css=function(a,b){var c,d=arguments,e=0,g=this.length;if(r(a)&&1===d.length)return this[0]&&f.getComputedStyle(this[0])[a];for(2===d.length?c=function(c){c.style[a]=b}:s(a)&&(c=function(b){p(a).forEach(function(c){b.style[c]=a[c]})});e<g;e++)c(this[e]);return this},i.data=function(a,b){var c,d=arguments,e={},f=0,g=this.length,h=function(a,b,c){s(c)?(a.jdata=a.jdata||{},a.jdata[b]=c):a.dataset[b]=c},i=function(a){return"true"===a||"false"!==a&&a};if(0===d.length)return this[0].jdata&&(e=this[0].jdata),p(this[0].dataset).forEach(function(a){e[a]=i(this[0].dataset[a])},this),e;if(1===d.length&&r(a))return this[0]&&i(this[0].dataset[a]||this[0].jdata&&this[0].jdata[a]);for(1===d.length&&s(a)?c=function(b){p(a).forEach(function(c){h(b,c,a[c])})}:2===d.length&&(c=function(c){h(c,a,b)});f<g;f++)c(this[f]);return this},i.removeData=function(a){for(var b,c,d=0,e=this.length;d<e;d++)if(b=this[d].jdata,c=this[d].dataset,a)b&&b[a]&&delete b[a],delete c[a];else{for(a in b)delete b[a];for(a in c)delete c[a]}return this},i.addClass=function(a){for(var b=0,c=0,d=this.length,e=a?a.trim().split(/\s+/):[];b<d;b++)for(c=0,c=0;c<e.length;c++)this[b].classList.add(e[c]);return this},i.removeClass=function(a){for(var b=0,c=0,d=this.length,e=a?a.trim().split(/\s+/):[];b<d;b++)for(c=0,c=0;c<e.length;c++)this[b].classList.remove(e[c]);return this},i.toggleClass=function(a,b){var c=0,d=this.length,e="toggle";if(!0===b&&(e="add")||!1===b&&(e="remove"),a)for(;c<d;c++)this[c].classList[e](a);return this},i.hasClass=function(a){var b=0,c=this.length;if(a)for(;b<c;b++)if(this[b].classList.contains(a))return!0;return!1},i.html=function(a){var b,c=arguments;return 1===c.length&&void 0!==a?this.empty().append(a):0===c.length&&(b=this[0])?b.innerHTML:this},i.append=function(a){var b,c=0,d=this.length;for(r(a)&&m.exec(a)?a=v(a):s(a)||(a=document.createTextNode(a)),a=a instanceof v?a:v(a),b=function(b,c){a.forEach(function(a){c?b.appendChild(a.cloneNode(!0)):b.appendChild(a)})};c<d;c++)b(this[c],c);return this},i.appendTo=function(a){return v(a).append(this),this},i.empty=function(){for(var a,b=0,c=this.length;b<c;b++)for(a=this[b];a.lastChild;)a.removeChild(a.lastChild);return this},i.remove=function(){var a,b=0,c=this.length;for(this.off();b<c;b++)a=this[b],delete a.jdata,a.parentNode&&a.parentNode.removeChild(a);return this},"object"===e(a)&&a&&"object"===e(a.exports)?a.exports=v:(void 0!==(d=function(){return v}.call(b,c,b,a))&&(a.exports=d),f.jBone=f.$=v)}(window)}).call(b,c(4)(a))},function(a,b,c){"use strict";function d(a){var b=a.parentNode,c=a.nextSibling;return b.removeChild(a),function(){c?b.insertBefore(a,c):b.appendChild(a)}}var e=c(11),f=c(14),g=function(a){for(var b;b=a.lastChild;)a.removeChild(b)};a.exports=f.extend({renderSubviews:function(){var a=this.el,b=void 0!=a.parentNode;if(b)var c=d(a);g(a);for(var f,h,i=document.createDocumentFragment(),j=this._views(),k=e.sortBy(j,function(a){return a.ordering}),l=0;l<k.length;l++)f=k[l],f.render(),null!=(h=f.el)&&i.appendChild(h);return a.appendChild(i),b&&c(),a},addView:function(a,b){var c=this._views();if(null==b)throw"Invalid plugin. ";return null==b.ordering&&(b.ordering=a),c[a]=b},removeViews:function(){var a,b,c=this._views();for(b in c)a=c[b],a.undelegateEvents(),a.unbind(),null!=a.removeViews&&a.removeViews(),a.remove();return this.views={}},removeView:function(a){var b=this._views();return b[a].remove(),delete b[a]},getView:function(a){return this._views()[a]},remove:function(){return this.removeViews(),f.prototype.remove.apply(this)},_views:function(){return null==this.views&&(this.views={}),this.views}})},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(18),f=d(e),g=c(22),h=d(g),i=c(40),j=d(i),k=c(41),l=d(k),m=c(42),n=d(m),o=c(13),p=d(o),q=c(49),r=d(q),s=c(51),t=d(s),u=c(50),v=d(u),w=c(52),x=d(w),y=c(46),z=d(y),A=c(53),B=d(A),C=c(113),D=d(C),E=c(115),F=d(E),G=c(122),H=d(G),I=c(16),J=c(57),K=c(126),L=c(15),M=I.extend({initialize:function(a){var b=this;if(void 0!==a&&null!==a||(a={}),null==a.colorscheme&&(a.colorscheme={}),null==a.columns&&(a.columns={}),null==a.conf&&(a.conf={}),null==a.vis&&(a.vis={}),null==a.visorder&&(a.visorder={}),null==a.zoomer&&(a.zoomer={}),null==a.conserv&&(a.conserv={}),null==a.scale&&(a.scale={}),this.g=J.mixin({}),this.seqs=this.g.seqs=new f.default(a.seqs,this.g),this.g.config=new l.default(a.conf),this.g.package=new n.default(this.g),this.g.selcol=new p.default([],{g:this.g}),this.g.user=new r.default,this.g.vis=new t.default(a.vis,{model:this.seqs}),this.g.visorder=new v.default(a.visorder),this.g.zoomer=new x.default(a.zoomer,{g:this.g,model:this.seqs}),this.g.scale=new z.default(a.scale,{g:this.g}),this.g.conservationConfig=a.conserv,"localhost"===window.location.hostname&&this.g.config.set("debug",!0),this._loadSeqs(a),this.u={},this.u.file=new D.default(this),this.u.proxy=new H.default({g:this.g}),this.u.tree=new F.default(this),!0===this.g.config.get("eventBus")&&this.startEventBus(),this.g.config.get("dropImport")){var c={dragover:this.dragOver,drop:this.dropFile};this.delegateEvents(c)}return a.importURL&&this.u.file.importURL(a.importURL,function(){return b.render()}),this.draw(),this.m()},_loadSeqs:function(a){var b=this.seqs.pluck("seq");return this.g.stats=new K(this.seqs,{useGaps:!0}),this.g.stats.alphabetSize=this.g.config.get("alphabetSize"),this.g.columns=new j.default(a.columns,this.g.stats),this.g.colorscheme=new h.default(a.colorscheme,b,this.g.stats),this.g.zoomer.setEl(this.el,this.seqs)},importURL:function(){return this.u.file.importURL.apply(this.u.file,arguments)},m:function(){var a={};return a.model=c(127),a.selection=c(2),a.selcol=c(13),a.view=c(14),a.boneView=c(16),this.m=a},draw:function(){var a=this;return this.removeViews(),this.addView("stage",new B.default({model:this.seqs,g:this.g})),this.$el.addClass("biojs_msa_div"),L(window).on("resize",function(b){var c=function(){return this.g.zoomer.autoResize()};return setTimeout(c.bind(a),5)})},dragOver:function(a){return a.preventDefault(),a.target.className="hover",!1},dropFile:function(a){a.preventDefault();var b=a.target.files||a.dataTransfer.files;return this.u.file.importFiles(b),!1},startEventBus:function(){var a=this,b=["config","columns","colorscheme","selcol","vis","visorder","zoomer"];return function(){for(var c,d=[],e=0;e<b.length;e++)c=b[e],d.push(a._proxyToG(c));return d}()},_proxyToG:function(a){return this.listenTo(this.g[a],"all",function(b,c,d,e){if("change"!==b)return void 0!==e&&null!==e?this.g.trigger(a+":"+b,d,c,e):this.g.trigger(a+":"+b,d,c)})},render:function(){return void 0!==this.seqs&&0!==this.seqs.length||console.log("warning. empty seqs."),this.renderSubviews(),this.g.vis.set("loaded",!0),this}});b.default=M},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(19),f=d(e),g=c(20),h=d(g),i=c(6).Collection,j=i.extend({model:f.default,constructor:function(a,b){var c=this;return i.apply(this,arguments),this.g=b,this.on("add reset remove",function(){return c.lengthCache=null,c._bindSeqsWithFeatures()},this),this.on("reset",function(){return c._autoSetRefSeq()}),this._autoSetRefSeq(),this.lengthCache=null,this.features={},this},getMaxLength:function(){return 0===this.models.length?0:(null===this.lengthCache&&(this.lengthCache=this.max(function(a){return a.get("seq").length}).get("seq").length),this.lengthCache)},prev:function(a,b){var c=this.indexOf(a)-1;return c<0&&b&&(c=this.length-1),this.at(c)},next:function(a,b){var c=this.indexOf(a)+1;return c===this.length&&b&&(c=0),this.at(c)},calcHiddenSeqs:function(a){for(var b=a,c=0;0<b?c<=b:c>=b;0<b?c++:c--)this.at(c).get("hidden")&&b++;return b-a},addFeatures:function(a){var b=this;if(null!=a.config){var c=a;a=a.seqs,null!=c.config.colors&&function(){var b=c.config.colors;_.each(a,function(a){return _.each(a,function(a){if(null!=b[a.feature])return a.fillColor=b[a.feature]})})}()}return _.isEmpty(this.features)?this.features=a:_.each(a,function(a,c){return b.features.hasOwnProperty(c)?b.features[c]=_.union(b.features[c],a):b.features[c]=a}),this._bindSeqsWithFeatures()},_bindSeqWithFeatures:function(a){var b=this.features[a.attributes.name];b&&(a.attributes.features=new h.default(b),a.attributes.features.assignRows(),a.attributes.height=a.attributes.features.getCurrentHeight()+1)},_bindSeqsWithFeatures:function(){var a=this;return this.each(function(b){return a._bindSeqWithFeatures(b)})},removeAllFeatures:function(){return delete this.features},_autoSetRefSeq:function(){if(this.length>0)return this.at(0).set("ref",!0)},setRef:function(a){var b=this.get(a);return this.each(function(c){if(a.cid)return b.cid===c.cid?c.set("ref",!0):c.set("ref",!1)}),this.g.config.set("hasRef",!0),this.trigger("change:reference",a)}});b.default=j},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(20),e=function(a){return a&&a.__esModule?a:{default:a}}(d),f=c(6).Model,g=f.extend({defaults:{name:"",id:"",seq:"",height:1,ref:!1},initialize:function(){if(this.set("grey",[]),null==this.get("features"))return this.set("features",new e.default)}});b.default=g},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(3),e=c(21),f=function(a){return a&&a.__esModule?a:{default:a}}(e),g=c(6).Collection,h=g.extend({model:f.default,constructor:function(){return this.startOnCache=[],this.on("all",function(){return this.startOnCache=[]},this),g.apply(this,arguments)},startOn:function(a){return null==this.startOnCache[a]&&(this.startOnCache[a]=this.where({xStart:a})),this.startOnCache[a]},contains:function(a){return this.reduce(function(b,c){return c||b.contains(a)},!1)},getFeatureOnRow:function(a,b){return this.filter(function(c){return c.get("row")===a&&c.get("xStart")<=b&&b<=c.get("xEnd")})},assignRows:function(){var a=this.max(function(a){return a.get("xEnd")}).attributes.xEnd,b=function(){for(var b=[],c=0;0<a?c<=a:c>=a;0<a?c++:c--)b.push(0);return b}();return this.each(function(a){for(var c=0,d=a.get("xStart"),e=a.get("xEnd"),f=d;d<e?f<=e:f>=e;d<e?f++:f--)b[f]>c&&(c=b[f]),b[f]++;return a.set("row",c)}),(0,d.max)(b)},getCurrentHeight:function(){return this.max(function(a){return a.get("row")}).attributes.row+1},getMinRows:function(){var a=this.max(function(a){return a.get("xEnd")}).attributes.xEnd,b=function(){for(var b=[],c=0;0<a?c<=a:c>=a;0<a?c++:c--)b.push(0);return b}();return this.each(function(a){return function(){for(var c=[],d=a.get("xStart"),e=a.get("xEnd"),f=d;d<e?f<=e:f>=e;f++)c.push(b[f]++);return c}()}),(0,d.max)(b)}});b.default=h},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(6).Model,e=d.extend({defaults:{xStart:-1,xEnd:-1,height:-1,text:"",fillColor:"red",strokeColor:"black",validate:!0,row:0},initialize:function(a){if(null!=a.start&&this.set("xStart",a.start-1),null!=a.end&&this.set("xEnd",a.end-1),
null!=a.attributes&&(null!=a.attributes.Name&&this.set("text",a.attributes.Name),null!=a.attributes.Color&&this.set("fillColor",a.attributes.Color)),this.attributes.xEnd<this.attributes.xStart&&console.warn("invalid feature range for",this.attributes),!_.isNumber(this.attributes.xStart)||!_.isNumber(this.attributes.xEnd))return console.warn("please provide numeric feature ranges",a),this.set("xStart",parseInt(this.attributes.xStart)),this.set("xEnd",parseInt(this.attributes.xEnd))},validate:function(){if(isNaN(this.attributes.xStart||isNaN(this.attributes.xEnd)))return"features need integer start and end."},contains:function(a){return this.attributes.xStart<=a&&a<=this.attributes.xEnd}});b.default=e},function(a,b,c){"use strict";var d=c(23),e=c(6).Model;a.exports=e.extend({defaults:{scheme:"taylor",colorBackground:!0,showLowerCase:!0,opacity:.6},initialize:function(a,b,c){return this.colors=new d({seqs:b,conservation:function(){return c.scale(c.conservation())}}),c.on("reset",function(){if("dyn"===this.getSelectedScheme().type){var a;if(a="reset",this.getSelectedScheme().indexOf(a)>=0)return this.getSelectedScheme().reset()}},this)},addStaticScheme:function(a,b){return this.colors.addStaticScheme(a,b)},addDynScheme:function(a,b){return this.colors.addDynScheme(a,b)},getScheme:function(a){return this.colors.getScheme(a)},getSelectedScheme:function(){return this.colors.getScheme(this.get("scheme"))}})},function(a,b,c){"use strict";function d(a){if(null==a||"object"!=(void 0===a?"undefined":e(a)))return a;var b=a.constructor();for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},f=c(24),g=f.stat,h=f.dyn,i=c(25),j=c(26),k=c(27),l=c(28),m=c(29),n=c(30),o=c(31),p=c(32),q=c(33),r=c(34),s=c(35),t=c(36),u=c(37),v=c(38),w={buried:i,buried_index:i,cinema:j,clustal2:l,clustal:k,helix:m,helix_propensity:m,hydro:n,lesk:o,mae:p,nucleotide:q,purine:r,purine_pyrimidine:r,strand:s,strand_propensity:s,taylor:t,turn:u,turn_propensity:u,zappo:v},x=c(39),y={pid:x},z=function(a){this.maps=d(w),this.dyn=d(y),this.opt=a};a.exports=z,z.getScheme=function(a){return w[a]},z.prototype.getScheme=function(a){var b=this.maps[a];return void 0===b&&(b={},void 0!=this.dyn[a])?new h(this.dyn[a],this.opt):new g(b)},z.prototype.addStaticScheme=function(a,b){this.maps[a]=b},z.prototype.addDynScheme=function(a,b){this.dyn[a]=b}},function(a,b){"use strict";var c=function(a){this.defaultColor="#ffffff",this.type="static",this.map=a,this.getColor=function(a){return void 0!==this.map[a]?this.map[a]:this.defaultColor}},d=function(a,b){this.type="dyn",this.opt=b,void 0!==a.init?(a.init.call(this),this.getColor=a.run,this.reset=a.init):this.getColor=a};a.exports.stat=c,a.exports.dyn=d},function(a,b){"use strict";a.exports={A:"#00a35c",R:"#00fc03",N:"#00eb14",D:"#00eb14",C:"#0000ff",Q:"#00f10e",E:"#00f10e",G:"#009d62",H:"#00d52a",I:"#0054ab",L:"#007b84",K:"#00ff00",M:"#009768",F:"#008778",P:"#00e01f",S:"#00d52a",T:"#00db24",W:"#00a857",Y:"#00e619",V:"#005fa0",B:"#00eb14",X:"#00b649",Z:"#00f10e"}},function(a,b){"use strict";a.exports={A:"#BBBBBB",B:"grey",C:"yellow",D:"red",E:"red",F:"magenta",G:"brown",H:"#00FFFF",I:"#BBBBBB",J:"#fff",K:"#00FFFF",L:"#BBBBBB",M:"#BBBBBB",N:"green",O:"#fff",P:"brown",Q:"green",R:"#00FFFF",S:"green",T:"green",U:"#fff",V:"#BBBBBB",W:"magenta",X:"grey",Y:"magenta",Z:"grey",Gap:"grey"}},function(a,b){"use strict";a.exports={A:"orange",B:"#fff",C:"green",D:"red",E:"red",F:"blue",G:"orange",H:"red",I:"green",J:"#fff",K:"red",L:"green",M:"green",N:"#fff",O:"#fff",P:"orange",Q:"#fff",R:"red",S:"orange",T:"orange",U:"#fff",V:"green",W:"blue",X:"#fff",Y:"blue",Z:"#fff",Gap:"#fff"}},function(a,b){"use strict";a.exports={A:"#80a0f0",R:"#f01505",N:"#00ff00",D:"#c048c0",C:"#f08080",Q:"#00ff00",E:"#c048c0",G:"#f09048",H:"#15a4a4",I:"#80a0f0",L:"#80a0f0",K:"#f01505",M:"#80a0f0",F:"#80a0f0",P:"#ffff00",S:"#00ff00",T:"#00ff00",W:"#80a0f0",Y:"#15a4a4",V:"#80a0f0",B:"#fff",X:"#fff",Z:"#fff"}},function(a,b){"use strict";a.exports={A:"#e718e7",R:"#6f906f",N:"#1be41b",D:"#778877",C:"#23dc23",Q:"#926d92",E:"#ff00ff",G:"#00ff00",H:"#758a75",I:"#8a758a",L:"#ae51ae",K:"#a05fa0",M:"#ef10ef",F:"#986798",P:"#00ff00",S:"#36c936",T:"#47b847",W:"#8a758a",Y:"#21de21",V:"#857a85",B:"#49b649",X:"#758a75",Z:"#c936c9"}},function(a,b){"use strict";a.exports={A:"#ad0052",B:"#0c00f3",C:"#c2003d",D:"#0c00f3",E:"#0c00f3",F:"#cb0034",G:"#6a0095",H:"#1500ea",I:"#ff0000",J:"#fff",K:"#0000ff",L:"#ea0015",M:"#b0004f",N:"#0c00f3",O:"#fff",P:"#4600b9",Q:"#0c00f3",R:"#0000ff",S:"#5e00a1",T:"#61009e",U:"#fff",V:"#f60009",W:"#5b00a4",X:"#680097",Y:"#4f00b0",Z:"#0c00f3"}},function(a,b){"use strict";a.exports={A:" orange",B:" #fff",C:" green",D:" red",E:" red",F:" green",G:" orange",H:" magenta",I:" green",J:" #fff",K:" red",L:" green",M:" green",N:" magenta",O:" #fff",P:" green",Q:" magenta",R:" red",S:" orange",T:" orange",U:" #fff",V:" green",W:" green",X:" #fff",Y:" green",Z:" #fff",Gap:" #fff"}},function(a,b){"use strict";a.exports={A:" #77dd88",B:" #fff",C:" #99ee66",D:" #55bb33",E:" #55bb33",F:" #9999ff",G:" #77dd88",H:" #5555ff",I:" #66bbff",J:" #fff",K:" #ffcc77",L:" #66bbff",M:" #66bbff",N:" #55bb33",O:" #fff",P:" #eeaaaa",Q:" #55bb33",R:" #ffcc77",S:" #ff4455",T:" #ff4455",U:" #fff",V:" #66bbff",W:" #9999ff",X:" #fff",Y:" #9999ff",Z:" #fff",Gap:" #fff"}},function(a,b){"use strict";a.exports={A:" #64F73F",C:" #FFB340",G:" #EB413C",T:" #3C88EE",U:" #3C88EE"}},function(a,b){"use strict";a.exports={A:" #FF83FA",C:" #40E0D0",G:" #FF83FA",R:" #FF83FA",T:" #40E0D0",U:" #40E0D0",Y:" #40E0D0"}},function(a,b){"use strict";a.exports={A:"#5858a7",R:"#6b6b94",N:"#64649b",D:"#2121de",C:"#9d9d62",Q:"#8c8c73",E:"#0000ff",G:"#4949b6",H:"#60609f",I:"#ecec13",L:"#b2b24d",K:"#4747b8",M:"#82827d",F:"#c2c23d",P:"#2323dc",S:"#4949b6",T:"#9d9d62",W:"#c0c03f",Y:"#d3d32c",V:"#ffff00",B:"#4343bc",X:"#797986",Z:"#4747b8"}},function(a,b){"use strict";a.exports={A:"#ccff00",R:"#0000ff",N:"#cc00ff",D:"#ff0000",C:"#ffff00",Q:"#ff00cc",E:"#ff0066",G:"#ff9900",H:"#0066ff",I:"#66ff00",L:"#33ff00",K:"#6600ff",M:"#00ff00",F:"#00ff66",P:"#ffcc00",S:"#ff3300",T:"#ff6600",W:"#00ccff",Y:"#00ffcc",V:"#99ff00",B:"#fff",X:"#fff",Z:"#fff"}},function(a,b){"use strict";a.exports={A:"#2cd3d3",R:"#708f8f",N:"#ff0000",D:"#e81717",C:"#a85757",Q:"#3fc0c0",E:"#778888",G:"#ff0000",H:"#708f8f",I:"#00ffff",L:"#1ce3e3",K:"#7e8181",M:"#1ee1e1",F:"#1ee1e1",P:"#f60909",S:"#e11e1e",T:"#738c8c",W:"#738c8c",Y:"#9d6262",V:"#07f8f8",B:"#f30c0c",X:"#7c8383",Z:"#5ba4a4"}},function(a,b){"use strict";a.exports={A:"#ffafaf",R:"#6464ff",N:"#00ff00",D:"#ff0000",C:"#ffff00",Q:"#00ff00",E:"#ff0000",G:"#ff00ff",H:"#6464ff",I:"#ffafaf",L:"#ffafaf",K:"#6464ff",M:"#ffafaf",F:"#ffc800",P:"#ff00ff",S:"#00ff00",T:"#00ff00",W:"#ffc800",Y:"#ffc800",V:"#ffafaf",B:"#fff",X:"#fff",Z:"#fff"}},function(a,b){"use strict";var c;a.exports=c={},c.init=function(){this.cons=this.opt.conservation()},c.run=function(a,b){var c=this.cons[b.pos];return c>.8?"#6464ff":c>.6?"#9da5ff":c>.4?"#cccccc":"#ffffff"}},function(a,b,c){"use strict";var d=c(6).Model;a.exports=d.extend({initialize:function(a,b){return null==this.get("hidden")&&this.set("hidden",[]),this.stats=b},calcHiddenColumns:function(a){for(var b=this.get("hidden"),c=a,d=0;d<b.length;d++)b[d]<=c&&c++;return c-a}})},function(a,b,c){"use strict";var d=c(6).Model;a.exports=d.extend({defaults:{registerMouseHover:!1,registerMouseClicks:!0,importProxy:"https://cors-anywhere.herokuapp.com/",importProxyStripHttp:!0,eventBus:!0,alphabetSize:20,dropImport:!1,debug:!1,hasRef:!1,bootstrapMenu:!1,manualRendering:!1}})},function(a,b,c){"use strict";var d=c(43),e=c(6).Model;a.exports=e.extend({initialize:function(a){return this.g=a},development:{"msa-tnt":"/node_modules/msa-tnt/build/bundle.js","biojs-io-newick":"/node_modules/biojs-io-newick/build/biojs-io-newick.min.js"},loadPackage:function(a,b){try{var e=c(45)(a);return b(e)}catch(c){return d.default.loadScript(this._pkgURL(a),b)}},loadPackages:function(a,b){var c=this,e=d.default.joinCb(function(){return b()},a.length);return a.forEach(function(a){return c.loadPackage(a,e)})},_pkgURL:function(a){return this.development[a]}})},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(44),e={loadScript:function(a,b){var c=d.mk("script");return c.type="text/javascript",c.src=a,c.async=!0,c.onload=c.onreadystatechange=function(){if(!(a||this.readyState&&"complete"!==this.readyState)){var a=!0;return b()}},document.getElementsByTagName("script")[0].parentNode.appendChild(c)},joinCb:function(a,b,c){b=b||1;var d=0,e=function(a,b){return void 0===a||null===a?f():function(){var c;return c="apply",a.indexOf(c)>=0&&a.apply(b,arguments),f()}},f=function(){if(++d===b)return a.call(c)};return e}};b.default=e},function(a,b,c){(function(a){"use strict";var b={};b.d=b.defaultValue=function(a,b){return void 0===a?"function"==typeof a?b():b:a},b.id=function(a){return document.getElementById(a)},b.mk=function(a){return document.createElement(a)},void 0!==a&&void 0!==a.exports&&(a.exports=b)}).call(b,c(4)(a))},function(a,b,c){function d(a){return c(e(a))}function e(a){return f[a]||function(){throw new Error("Cannot find module '"+a+"'.")}()}var f={"./StageScale":46,"./StageScale.js":46,"./colorscheme":22,"./colorscheme.js":22,"./columns":40,"./columns.js":40,"./config":41,"./config.js":41,"./package":42,"./package.js":42,"./selection/Selection":2,"./selection/Selection.js":2,"./selection/SelectionCol":13,"./selection/SelectionCol.js":13,"./selection/index":48,"./selection/index.js":48,"./user":49,"./user.js":49,"./visOrdering":50,"./visOrdering.js":50,"./visibility":51,"./visibility.js":51,"./zoomer":52,"./zoomer.js":52};d.keys=function(){return Object.keys(f)},d.resolve=e,a.exports=d,d.id=45},function(a,b,c){"use strict";var d=c(6).Model;c(47);a.exports=d.extend({constructor:function(a,b){return this.g=b.g,d.apply(this,arguments),this},defaults:{currentSize:5,step:1,originalSize:!1,scaleCategories:[{columnWidth:1,markerStepSize:20,stepSize:0},{columnWidth:3,markerStepSize:20,stepSize:0},{columnWidth:5,markerStepSize:10,stepSize:0},{columnWidth:9,markerStepSize:5,stepSize:1},{columnWidth:15,markerStepSize:2,stepSize:1},{columnWidth:20,markerStepSize:1,stepSize:1},{columnWidth:30,markerStepSize:1,stepSize:1},{columnWidth:45,markerStepSize:1,stepSize:1}]},initialize:function(a){var b=this.get("scaleCategories"),c=this.g.zoomer.get("columnWidth")||this._getScaleInfo().columnWidth,d=_.find(b,{columnWidth:c});if(!d){var e=this._insertScaleCategory(c);d=b[e],this.set("currentSize",e+1)}var f=this.get("currentSize");return this.set("originalSize",f),this.setSize(f),this},_insertScaleCategory:function(a){var b=this.get("scaleCategories"),c=_.findLastIndex(b,function(b){return b.columnWidth<a}),d=b[c],e=c+1,f={columnWidth:a,markerStepSize:d.markerStepSize,stepSize:d.markerStepSize};return b.splice(e,0,f),this.set("scaleCategories",b),e},getSizeRange:function(){return[1,this.get("scaleCategories").length]},bigger:function(){return this.setSize(this.get("currentSize")+this.get("step"))},smaller:function(){return this.setSize(this.get("currentSize")-this.get("step"))},reset:function(){return this.setSize(this.get("originalSize"))},setSize:function(a){var b=this.getSizeRange();a=parseInt(a),a=a<b[0]?b[0]:a>b[1]?b[1]:a,this.set("currentSize",a);var c=this._getScaleInfo();return this.g.zoomer.set({columnWidth:c.columnWidth,stepSize:c.stepSize,markerStepSize:c.markerStepSize}),this},getSize:function(){return this.get("currentSize")},_getScaleInfo:function(){var a=this.getSize(),b=this.get("scaleCategories");if(a>0&&a<=b.length)return b[a-1];console.error("out of bounds")}})},function(a,b,c){"use strict";!function(c){function d(a,b){if(!(this instanceof d))return new d(a,b);this.domain=[],this.range=[],Array.isArray(a)&&(this.domain=a),Array.isArray(b)&&(this.range=b);var c=function(a){if("number"!=typeof a)return null;var b=this.domain[0],c=this.domain[1],d=this.range[0],e=this.range[1];return"number"!==d&&"number"!=typeof e&&(d=b,e=c),d+(e-d)/(c-b)*(a-b)}.bind(this);return c.domain=function(a){return Array.isArray(a)&&(this.domain=a),c}.bind(this),c.range=function(a){return Array.isArray(a)&&(this.range=a),c}.bind(this),c}void 0!==a&&a.exports&&(b=a.exports=d),b.LinearScale=d}()},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(13);Object.defineProperty(b,"SelectionManager",{enumerable:!0,get:function(){return d.SelectionManager}})},function(a,b,c){"use strict";var d=c(6).Model;a.exports=d.extend({defaults:{searchText:""}})},function(a,b,c){"use strict";var d=c(6).Model;a.exports=d.extend({defaults:{searchBox:-10,overviewBox:30,headerBox:-1,alignmentBody:0,scaleSlider:50}})},function(a,b,c){"use strict";var d=c(6).Model;a.exports=d.extend({defaults:{sequences:!0,markers:!0,metacell:!1,conserv:!1,overviewbox:!1,seqlogo:!1,gapHeader:!1,leftHeader:!0,scaleslider:!1,labels:!0,labelName:!0,labelId:!0,labelPartition:!1,labelCheckbox:!1,metaGaps:!0,metaIdentity:!0,metaLinks:!0},constructor:function(a,b){return this.calcDefaults(b.model),d.apply(this,arguments)},initialize:function(){return this.listenTo(this,"change:metaLinks change:metaIdentity change:metaGaps",function(){return this.trigger("change:metacell")},this),this.listenTo(this,"change:labelName change:labelId change:labelPartition change:labelCheckbox",function(){return this.trigger("change:labels")},this),this.listenTo(this,"change:markers change:conserv change:seqlogo change:gapHeader",function(){return this.trigger("change:header")},this)},calcDefaults:function(a){if(a.length>0){var b=a.at(0),c=b.get("ids");if(void 0!==c&&0===Object.keys(c).length)return this.defaults.metaLinks=!1}}})},function(a,b,c){"use strict";var d=c(6).Model;a.exports=d.extend({constructor:function(a,b){return this.calcDefaults(b.model),d.apply(this,arguments),this.g=b.g,this.listenTo(this,"change:labelIdLength change:labelNameLength change:labelPartLength change:labelCheckLength",function(){return this.trigger("change:labelWidth",this.getLabelWidth())},this),this.listenTo(this,"change:metaLinksWidth change:metaIdentWidth change:metaGapWidth",function(){return this.trigger("change:metaWidth",this.getMetaWidth())},this),this},defaults:{alignmentWidth:"auto",alignmentHeight:225,columnWidth:15,rowHeight:15,autoResize:!0,labelIdLength:20,labelNameLength:100,labelPartLength:15,labelCheckLength:15,labelFontsize:13,labelLineHeight:"13px",markerFontsize:"10px",stepSize:1,markerStepSize:2,markerHeight:20,residueFont:"13",canvasEventScale:1,minLetterDrawSize:11,boxRectHeight:2,boxRectWidth:2,overviewboxPaddingTop:10,metaGapWidth:35,metaIdentWidth:40,_alignmentScrollLeft:0,_alignmentScrollTop:0},calcDefaults:function(a){return a.getMaxLength()<200&&a.length<30&&(this.defaults.boxRectWidth=this.defaults.boxRectHeight=5),this},getAlignmentWidth:function(a){return this.get("autoResize")&&void 0!==a?this.get("columnWidth")*a:void 0===this.get("alignmentWidth")||"auto"===this.get("alignmentWidth")||0===this.get("alignmentWidth")?this._adjustWidth():this.get("alignmentWidth")},setLeftOffset:function(a){var b=a;return b=Math.max(0,b),b-=this.g.columns.calcHiddenColumns(b),this.set("_alignmentScrollLeft",b*this.get("columnWidth"))},setTopOffset:function(a){for(var b=Math.max(0,a-1),c=0,d=0;0<b?d<=b:d>=b;0<b?d++:d--){c+=this.model.at(d).attributes.height||1}return this.set("_alignmentScrollTop",c*this.get("rowHeight"))},getLeftBlockWidth:function(){var a=0;return this.g.vis.get("labels")&&(a+=this.getLabelWidth()),this.g.vis.get("metacell")&&(a+=this.getMetaWidth()),a},getMetaWidth:function(){var a=0;return this.g.vis.get("metaGaps")&&(a+=this.get("metaGapWidth")),this.g.vis.get("metaIdentity")&&(a+=this.get("metaIdentWidth")),this.g.vis.get("metaLinks")&&(a+=this.get("metaLinksWidth")),a},getLabelWidth:function(){var a=0;return this.g.vis.get("labelName")&&(a+=this.get("labelNameLength")),this.g.vis.get("labelId")&&(a+=this.get("labelIdLength")),this.g.vis.get("labelPartition")&&(a+=this.get("labelPartLength")),this.g.vis.get("labelCheckbox")&&(a+=this.get("labelCheckLength")),a},_adjustWidth:function(){if(void 0!==this.el&&void 0!==this.model){if(null!=this.el.parentNode&&0!==this.el.parentNode.offsetWidth)var a=this.el.parentNode.offsetWidth;else a=document.body.clientWidth-35;var b=a-this.getLeftBlockWidth(),c=this.getAlignmentWidth(this.model.getMaxLength()-this.g.columns.get("hidden").length),d=Math.min(b,c);return d=Math.floor(d/this.get("columnWidth"))*this.get("columnWidth"),this.attributes.alignmentWidth=d}},autoResize:function(){if(this.get("autoResize"))return this._adjustWidth(this.el,this.model)},autoHeight:function(a){var b=this.getMaxAlignmentHeight();return void 0!==a&&a>0&&(b=Math.min(b,a)),this.set("alignmentHeight",b)},setEl:function(a,b){return this.el=a,this.model=b},_checkScrolling:function(a,b){var c=a[0],d=a[1];return this.set("_alignmentScrollLeft",c,b),this.set("_alignmentScrollTop",d,b)},getMaxAlignmentHeight:function(){var a=0;return this.model.each(function(b){return a+=b.attributes.height||1}),a*this.get("rowHeight")},getMaxAlignmentWidth:function(){return this.model.getMaxLength()*this.get("columnWidth")}})},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(3),f=c(54),g=d(f),h=c(87),i=d(h),j=c(110),k=d(j),l=c(111),m=d(l),n=c(112),o=d(n),p=c(16),q=p.extend({initialize:function(a){return this.g=a.g,this.draw(),this.listenTo(this.g.stats,"reset",function(){return this.rerender()}),this.listenTo(this.model,"change:hidden",(0,e.debounce)(this.rerender,10)),this.listenTo(this.model,"sort",this.rerender),this.listenTo(this.model,"add",function(){return console.log("seq add")}),this.listenTo(this.g.vis,"change:sequences",this.rerender),this.listenTo(this.g.vis,"change:overviewbox",this.rerender),this.listenTo(this.g.visorder,"change",this.rerender),this.listenTo(this.g.zoomer,"change:columnWidth",this.rerender),this.listenTo(this.g.vis,"change:scaleslider",this.rerender),this},draw:function(){if(this.removeViews(),this.g.vis.get("overviewbox")){var a=new k.default({model:this.model,g:this.g});a.ordering=this.g.visorder.get("overviewBox"),this.addView("overviewBox",a)}var b=new i.default({model:this.model,g:this.g});b.ordering=this.g.visorder.get("headerBox"),this.addView("headerBox",b);var c=new m.default({model:this.model,g:this.g});c.ordering=this.g.visorder.get("searchBox"),this.addView("searchbox",c);var d=new g.default({model:this.model,g:this.g});if(d.ordering=this.g.visorder.get("alignmentBody"),this.addView("body",d),this.g.vis.get("scaleslider")){var e=new o.default({model:this.g.scale,g:this.g});e.ordering=this.g.visorder.get("scaleSlider"),this.addView("scaleSlider",e)}return this},render:function(a){return this.renderSubviews(),this.el.className="biojs_msa_stage",this},rerender:function(){if(!this.g.config.get("manualRendering"))return this.draw(),this.render()}});b.default=q},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(55),f=d(e),g=c(62),h=d(g),i=c(16),j=i.extend({initialize:function(a){this.g=a.g;var b=new h.default({model:this.model,g:this.g});if(b.ordering=-1,this.addView("labelblock",b),this.g.vis.get("sequences")){var c=new f.default({model:this.model,g:this.g});c.ordering=0,this.addView("seqblock",c)}return this.listenTo(this.g.zoomer,"change:alignmentHeight",this.adjustHeight),this.listenTo(this.g.zoomer,"change:alignmentWidth",this.adjustWidth),this.listenTo(this.g.columns,"change:hidden",this.adjustHeight),this},render:function(){return this.renderSubviews(),this.el.className="biojs_msa_albody",this.el.style.whiteSpace="nowrap",this.adjustHeight(),this.adjustWidth(),this},adjustHeight:function(){return"auto"===this.g.zoomer.get("alignmentHeight")?this.el.style.height=this.g.zoomer.get("rowHeight")*this.model.length+5:this.el.style.height=this.g.zoomer.get("alignmentHeight")},adjustWidth:function(){return this.el.style.width=this.getWidth()},getWidth:function(){var a=0;return a+=this.g.zoomer.getLeftBlockWidth(),this.g.vis.get("sequences")&&(a+=this.g.zoomer.get("alignmentWidth")),a}});b.default=j},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g=c(3),h=c(56),i=d(h),j=c(58),k=d(j),l=c(59),m=d(l),n=c(60),o=d(n),p=c(16),q=c(61),r=c(15),s=p.extend({tagName:"canvas",initialize:function(a){return this.g=a.g,this.listenTo(this.g.zoomer,"change:_alignmentScrollLeft change:_alignmentScrollTop",function(a,b,c){if(null==(void 0!==c&&null!==c?c.origin:void 0)||"canvasseq"!==c.origin)return this.render()}),this.listenTo(this.g.columns,"change:hidden",this.render),this.listenTo(this.g.zoomer,"change:alignmentWidth change:alignmentHeight",this.render),this.listenTo(this.g.colorscheme,"change",this.render),this.listenTo(this.g.selcol,"reset add",this.render),this.listenTo(this.model,"reset add",this.render),this.el.style.display="inline-block",this.el.style.overflowX="hidden",this.el.style.overflowY="hidden",this.el.className="biojs_msa_seqblock",this.ctx=this.el.getContext("2d"),this.cache=new i.default(this.g),this.coordsCache=new o.default(this.g,this.model),this.listenTo(this.g.zoomer,"change:residueFont",function(){return this.cache=new i.default(this.g),this.render()}),this.sel=new k.default(this.g,this.ctx),this._setColor(),this.throttleTime=0,this.throttleCounts=0,null!=document.documentElement.style.webkitAppearance?this.throttledDraw=function(){var a=+new Date;if(this.draw(),this.throttleTime+=+new Date-a,++this.throttleCounts>15){var b=Math.ceil(this.throttleTime/this.throttleCounts);return console.log("avgDrawTime/WebKit",b),this.throttledDraw=this.draw}}:this.throttledDraw=(0,g.throttle)(this.throttledDraw,30),this.manageEvents()},throttledDraw:function(){var a=+new Date;if(this.draw(),this.throttleTime+=+new Date-a,++this.throttleCounts>15){var b=Math.ceil(this.throttleTime/this.throttleCounts);return console.log("avgDrawTime",b),b*=1.2,b=Math.max(20,b),this.throttledDraw=_.throttle(this.draw,b)}},manageEvents:function(){var a={};return a.mousedown="_onmousedown",a.touchstart="_ontouchstart",this.g.config.get("registerMouseClicks")&&(a.dblclick="_onclick"),this.g.config.get("registerMouseHover")&&(a.mousein="_onmousein",a.mouseout="_onmouseout"),a.mousewheel="_onmousewheel",a.DOMMouseScroll="_onmousewheel",this.delegateEvents(a),this.listenTo(this.g.config,"change:registerMouseHover",this.manageEvents),this.listenTo(this.g.config,"change:registerMouseClick",this.manageEvents),this.dragStart=[]},_setColor:function(){return this.color=this.g.colorscheme.getSelectedScheme()},draw:function(){if(this.el.width=this.el.width,null!=this.seqDrawer&&this.model.length>0)return this.seqDrawer.drawLetters(),this.seqDrawer.drawRows(this.sel._appendSelection,this.sel),this.seqDrawer.drawRows(this.drawFeatures,this)},drawFeatures:function(a){var b=this,c=this.g.zoomer.get("columnWidth"),d=this.g.zoomer.get("rowHeight");if(a.model.attributes.height>1){var e=function(){var e=b.ctx;return a.model.attributes.features.each(function(b){e.fillStyle=b.attributes.fillColor||"red",e.strokeStyle=b.attributes.strokeColor||"black";var f=b.attributes.xEnd-b.attributes.xStart+1,g=(b.attributes.row+1)*d;e.beginPath(),e.rect(b.attributes.xStart*c+a.xZero,g+a.yZero,c*f,d),e.stroke(),e.fill()}),e.fillStyle="black",e.font=b.g.zoomer.get("residueFont")+"px mono",e.textBaseline="middle",e.textAlign="center",{v:a.model.attributes.features.each(function(b){var f=b.attributes.xEnd-b.attributes.xStart+1,g=(b.attributes.row+1)*d;return e.fillText(b.attributes.text,a.xZero+b.attributes.xStart*c+f/2*c,a.yZero+.5*d+g)})}}();if("object"===(void 0===e?"undefined":f(e)))return e.v}},render:function(){return this.el.setAttribute("height",this.g.zoomer.get("alignmentHeight")+"px"),this.el.setAttribute("width",this.g.zoomer.getAlignmentWidth()+"px"),this.g.zoomer._checkScrolling(this._checkScrolling([this.g.zoomer.get("_alignmentScrollLeft"),this.g.zoomer.get("_alignmentScrollTop")]),{header:"canvasseq"}),this._setColor(),this.seqDrawer=new m.default(this.g,this.ctx,this.model,{width:this.el.width,height:this.el.height,color:this.color,cache:this.cache}),this.throttledDraw(),this},_onmousemove:function(a,b){if(0!==this.dragStart.length){var c=q.abs(a),d=[c[0]-this.dragStart[0],c[1]-this.dragStart[1]],e=this.g.zoomer.get("canvasEventScale");b&&(e=3);for(var f=0;f<=1;f++)d[f]=d[f]*e;for(var g=[this.dragStartScroll[0]-d[0],this.dragStartScroll[1]-d[1]],h=0;h<=1;h++)g[h]=Math.round(g[h]);var i=this._checkScrolling(g);this.g.zoomer._checkScrolling(i,{origin:"canvasseq"});for(var j=0;j<=1;j++)i[j]!==g[j]&&(0===i[j]?(this.dragStart[j]=c[j],this.dragStartScroll[j]=0):this.dragStart[j]=c[j]-i[j]);return this.throttledDraw(),null!=a.preventDefault?(a.preventDefault(),a.stopPropagation()):void 0}},_ontouchmove:function(a){return this._onmousemove(a.changedTouches[0],!0),a.preventDefault(),a.stopPropagation()},_onmousedown:function(a){var b=this;return this.dragStart=q.abs(a),this.dragStartScroll=[this.g.zoomer.get("_alignmentScrollLeft"),this.g.zoomer.get("_alignmentScrollTop")],r(document.body).on("mousemove.overmove",function(a){return b._onmousemove(a)}),r(document.body).on("mouseup.overup",function(){return b._cleanup()}),a.preventDefault()},_ontouchstart:function(a){var b=this;return this.dragStart=q.abs(a.changedTouches[0]),this.dragStartScroll=[this.g.zoomer.get("_alignmentScrollLeft"),this.g.zoomer.get("_alignmentScrollTop")],r(document.body).on("touchmove.overtmove",function(a){return b._ontouchmove(a)}),r(document.body).on("touchend.overtend touchleave.overtleave touchcancel.overtcanel",function(a){return b._touchCleanup(a)})},_onmousewinout:function(a){if(a.toElement===document.body.parentNode)return this._cleanup()},_cleanup:function(){return this.dragStart=[],r(document.body).off(".overmove"),r(document.body).off(".overup"),r(document.body).off(".overout")},_touchCleanup:function(a){return a.changedTouches.length>0&&this._onmousemove(a.changedTouches[0],!0),this.dragStart=[],r(document.body).off(".overtmove"),r(document.body).off(".overtend"),r(document.body).off(".overtleave"),r(document.body).off(".overtcancel")},_onmousewheel:function(a){var b=q.wheelDelta(a);return this.g.zoomer.set("_alignmentScrollLeft",this.g.zoomer.get("_alignmentScrollLeft")+b[0]),this.g.zoomer.set("_alignmentScrollTop",this.g.zoomer.get("_alignmentScrollTop")+b[1]),a.preventDefault()},_onclick:function(a){var b=this._getClickPos(a);return void 0!==b&&null!==b&&(null!=b.feature?this.g.trigger("feature:click",b):this.g.trigger("residue:click",b)),this.throttledDraw()},_onmousein:function(a){var b=this._getClickPos(a);return void 0!==b&&null!==b&&(null!=b.feature?this.g.trigger("feature:mousein",b):this.g.trigger("residue:mousein",b)),this.throttledDraw()},_onmouseout:function(a){var b=this._getClickPos(a);return void 0!==b&&null!==b&&(null!=b.feature?this.g.trigger("feature:mouseout",b):this.g.trigger("residue:mouseout",b)),this.throttledDraw()},_getClickPos:function(a){var b=q.rel(a);b[0]+=this.g.zoomer.get("_alignmentScrollLeft");var c=Math.floor(b[0]/this.g.zoomer.get("columnWidth")),d=this.seqDrawer._getSeqForYClick(b[1]),f=e(d,2),g=f[0],h=f[1];c+=this.g.columns.calcHiddenColumns(c),g+=this.model.calcHiddenSeqs(g),c=Math.max(0,c),g=Math.max(0,g);var i=this.model.at(g).get("id");if(!(h>0))return{seqId:i,rowPos:c,evt:a};var j=this.model.at(g).get("features").getFeatureOnRow(h-1,c);if(0!==j.length){var k=j[0];return console.log(j[0].attributes),{seqId:i,feature:k,rowPos:c,evt:a}}},_checkScrolling:function(a){for(var b=[this.coordsCache.maxScrollWidth,this.coordsCache.maxScrollHeight],c=0;c<=1;c++)a[c]>b[c]&&(a[c]=b[c]),a[c]<0&&(a[c]=0);return a}});b.default=s},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=(c(57),function(){function a(b){d(this,a),this.g=b,this.cache={},this.cacheHeight=0,this.cacheWidth=0}return e(a,[{key:"getFontTile",value:function(a,b,c){return b===this.cacheWidth&&c===this.cacheHeight||(this.cacheHeight=c,this.cacheWidth=b,this.cache={}),void 0===this.cache[a]&&this.createTile(a,b,c),this.cache[a]}},{key:"createTile",value:function(a,b,c){var d=this.cache[a]=document.createElement("canvas");return d.width=b,d.height=c,this.ctx=d.getContext("2d"),this.ctx.font=this.g.zoomer.get("residueFont")+"px mono",this.ctx.textBaseline="middle",this.ctx.textAlign="center",this.ctx.fillText(a,b/2,c/2,b)}}]),a}());b.default=f},function(a,b,c){"use strict";var d=c(8);d.onAll=function(a,b){return this.on("all",a,b),this},d.oldMixin=d.mixin,d.mixin=function(a){d.oldMixin(a);for(var b=["onAll"],c=0;c<b.length;c++){var e=b[c];a[e]=this[e]}return a},a.exports=d},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(3),e=function(a,b){return this.g=a,this.ctx=b,this};_.extend(e.prototype,{_getSelection:function(a){var b=a.get("seq").length,c=[],e=this.g.selcol.getSelForRow(a.get("id")),f=(0,d.find)(e,function(a){return"row"===a.get("type")});if(void 0!==f&&null!==f)for(var g=b-1,h=0;h<=g;h++)c.push(h);else if(e.length>0)for(var i,j=0;j<e.length;j++){i=e[j];for(var k=i.get("xStart"),l=i.get("xEnd"),m=k;m<=l;m++)c.push(m)}return c},_appendSelection:function(a){var b=this,c=a.model.get("seq"),d=this._getSelection(a.model),e=this._getPrevNextSelection(a.model),f=e[0],g=e[1];this.g.zoomer.get("columnWidth"),this.g.zoomer.get("rowHeight");if(0!==d.length){var h=0;return function(){for(var e=[],i=c.length-1,j=0;j<=i;j++)!function(c){e.push(function(){if(a.hidden.indexOf(c)>=0)return h++;var e=c-h;return d.indexOf(c)>=0&&(0===e||d.indexOf(c-1)<0)?b._renderSelection({n:c,k:e,selection:d,mPrevSel:f,mNextSel:g,xZero:a.xZero,yZero:a.yZero,model:a.model}):void 0}())}(j);return e}()}},_renderSelection:function(a){for(var b=a.xZero,c=a.yZero,d=a.n,e=a.k,f=a.selection,g=a.mPrevSel,h=a.mNextSel,i=0,j=a.model.get("seq").length-1,k=d;k<=j&&f.indexOf(k)>=0;k++)i++;var l=this.g.zoomer.get("columnWidth"),m=this.g.zoomer.get("rowHeight"),n=l*i+1,o=this.g.columns.get("hidden");this.ctx.beginPath();var p=this.ctx.lineWidth;this.ctx.lineWidth=3;var q=this.ctx.strokeStyle;this.ctx.strokeStyle="#FF0000",b+=e*l;for(var r=0,s=i-1,t=0;t<=s;t++){var u=d+t;o.indexOf(u)>=0||(void 0!==g&&null!==g&&g.indexOf(u)>=0||(this.ctx.moveTo(b+r,c),this.ctx.lineTo(r+l+b,c)),void 0!==h&&null!==h&&h.indexOf(u)>=0||(this.ctx.moveTo(r+b,m+c),this.ctx.lineTo(r+l+b,m+c)),r+=l)}return this.ctx.moveTo(b,c),this.ctx.lineTo(b,m+c),this.ctx.moveTo(b+n,c),this.ctx.lineTo(b+n,m+c),this.ctx.stroke(),this.ctx.strokeStyle=q,this.ctx.lineWidth=p},_getPrevNextSelection:function(a){var b=a.collection.prev(a),c=a.collection.next(a),d=void 0,e=void 0;return void 0!==b&&null!==b&&(d=this._getSelection(b)),
void 0!==c&&null!==c&&(e=this._getSelection(c)),[d,e]}}),b.default=e},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),e=c(3),f={updateConfig:function(){this.rectWidth=this.g.zoomer.get("columnWidth"),this.rectHeight=this.g.zoomer.get("rowHeight")},drawLetters:function(){return this.updateConfig(),this.ctx.globalAlpha=this.g.colorscheme.get("opacity"),this.drawSeqs(function(a){return this.drawSeq(a,this._drawRect)}),this.ctx.globalAlpha=1,this.rectWidth>=this.g.zoomer.get("minLetterDrawSize")&&this.drawSeqs(function(a){return this.drawSeq(a,this._drawLetter)}),this},drawSeqs:function(a,b){var c=this.g.columns.get("hidden");b=b||this;for(var e=this.getStartSeq(),f=d(e,2),g=f[0],h=f[1],i=g;i<this.model.length;i++){var j=this.model.at(i);if(!j.get("hidden")){a.call(b,{model:j,yPos:h,y:i,hidden:c});if((h+=(j.attributes.height||1)*this.rectHeight)>this.height)break}}},drawRows:function(a,b){return this.drawSeqs(function(c){return this.drawRow(c,a,b)})},drawRow:function(a,b,c){var d=this.g.zoomer.get("columnWidth"),e=Math.max(0,Math.abs(Math.ceil(-this.g.zoomer.get("_alignmentScrollLeft")/d))),f=-Math.abs(-this.g.zoomer.get("_alignmentScrollLeft")%d),g=f-e*d,h=a.yPos;return b.call(c,{model:a.model,xZero:g,yZero:h,hidden:a.hidden})},getStartSeq:function(){for(var a=Math.max(0,Math.floor(this.g.zoomer.get("_alignmentScrollTop")/this.rectHeight))+1,b=0,c=0;b<a&&c<this.model.length;)b+=this.model.at(c).attributes.height||1,c++;return[c-1,-Math.max(0,this.g.zoomer.get("_alignmentScrollTop")-b*this.rectHeight+(this.model.at(c-1).attributes.height||1)*this.rectHeight)]},_getSeqForYClick:function(a){for(var b=this.getStartSeq(),c=d(b,2),e=c[0],f=c[1],g=f%this.rectHeight,h=Math.max(0,Math.floor((a-g)/this.rectHeight))+1,i=0,j=e;i<h&&j<this.model.length;)i+=this.model.at(j).attributes.height||1,j++;return[j-1,Math.max(0,Math.floor(a/this.rectHeight)-i+(this.model.at(j-1).get("height")||1))]},drawSeq:function(a,b){for(var c=a.model.get("seq"),d=a.yPos,e=this.rectWidth,f=this.rectHeight,g=Math.max(0,Math.abs(Math.ceil(-this.g.zoomer.get("_alignmentScrollLeft")/e))),h=-Math.abs(-this.g.zoomer.get("_alignmentScrollLeft")%e),i={rectWidth:e,rectHeight:f,yPos:d,y:a.y},j=this.width,k=g;k<c.length;k++){var l=c[k];if(l=l.toUpperCase(),i.x=k,i.c=l,i.xPos=h,a.hidden.indexOf(k)<0&&(b(this,i),(h+=e)>j))break}},_drawRect:function(a,b){var c=a.color.getColor(b.c,{pos:b.x,y:b.y});if(void 0!==c&&null!==c)return a.ctx.fillStyle=c,a.ctx.fillRect(b.xPos,b.yPos,b.rectWidth,b.rectHeight)},_drawLetter:function(a,b){return a.ctx.drawImage(a.cache.getFontTile(b.c,b.rectWidth,b.rectHeight),b.xPos,b.yPos,b.rectWidth,b.rectHeight)}},g=function(a,b,c,d){return this.g=a,this.ctx=b,this.model=c,this.width=d.width,this.height=d.height,this.color=d.color,this.cache=d.cache,this.rectHeight=this.g.zoomer.get("rowHeight"),this.rectWidth=this.g.zoomer.get("columnWidth"),this};(0,e.extend)(g.prototype,f),b.default=g},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(3),e=c(57),f={setMaxScrollHeight:function(){return this.maxScrollHeight=this.g.zoomer.getMaxAlignmentHeight()-this.g.zoomer.get("alignmentHeight")},setMaxScrollWidth:function(){return this.maxScrollWidth=this.g.zoomer.getMaxAlignmentWidth()-this.g.zoomer.getAlignmentWidth()}},g=function(a,b){return this.g=a,this.model=b,this.maxScrollWidth=0,this.maxScrollHeight=0,this.setMaxScrollHeight(),this.setMaxScrollWidth(),this.listenTo(this.g.zoomer,"change:rowHeight",this.setMaxScrollHeight),this.listenTo(this.g.zoomer,"change:columnWidth",this.setMaxScrollWidth),this.listenTo(this.g.zoomer,"change:alignmentWidth",this.setMaxScrollWidth),this.listenTo(this.g.zoomer,"change:alignmentHeight",this.setMaxScrollHeight),this.listenTo(this.model,"add change reset",function(){return this.setMaxScrollHeight(),this.setMaxScrollWidth()},this),this};(0,d.extend)(g.prototype,f),e.mixin(g.prototype),b.default=g},function(a,b){"use strict";a.exports={rel:function(a){var b,c,d,e;return b=a.offsetX,c=a.offsetY,void 0==b&&(d=e.getBoundingClientRect(),e=a.target||a.srcElement,void 0==b&&(b=a.clientX-d.left,c=a.clientY-d.top),void 0==b&&(b=a.pageX-e.offsetLeft,c=a.pageY-e.offsetTop),void 0==b)?void console.log(a,"no mouse event defined. your browser sucks"):[b,c]},abs:function(a){var b,c;return b=a.pageX,c=a.pageY,void 0==b&&(b=a.layerX,c=a.layerY),void 0==b&&(b=a.clientX,c=a.clientY),void 0==b&&(b=a.x,c=a.y),[b,c]},wheelDelta:function(a){var b;return b=[a.deltaX,a.deltaY],void 0==b[0]&&a.mozMovementX&&(b=[0,a.mozMovementX]),isNaN(b[0])&&(b[0]=0),isNaN(b[1])&&(b[1]=0),b}}},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(63),e=function(a){return a&&a.__esModule?a:{default:a}}(d),f=c(16),g=f.extend({initialize:function(a){var b=this;return this.g=a.g,this.draw(),this.listenTo(this.g.zoomer,"change:_alignmentScrollTop",this._adjustScrollingTop),this.g.vis.once("change:loaded",this._adjustScrollingTop,this),this.listenTo(this.g.zoomer,"change:alignmentHeight",this._setHeight),this.listenTo(this.model,"change:reference",this.draw),this.listenTo(this.model,"reset add remove",function(){return b.draw(),b.render()})},draw:function(){this.removeViews(),console.log("redraw columns",this.model.length);for(var a=0;a<this.model.length;a++)if(!this.model.at(a).get("hidden")){var b=new e.default({model:this.model.at(a),g:this.g});b.ordering=a,this.addView("row_"+a,b)}},events:{scroll:"_sendScrollEvent"},_sendScrollEvent:function(){return this.g.zoomer.set("_alignmentScrollTop",this.el.scrollTop,{origin:"label"})},_adjustScrollingTop:function(){return this.el.scrollTop=this.g.zoomer.get("_alignmentScrollTop")},render:function(){return this.renderSubviews(),this.el.className="biojs_msa_labelblock",this.el.style.display="inline-block",this.el.style.verticalAlign="top",this.el.style.overflowY="auto",this.el.style.overflowX="hidden",this.el.style.fontSize=this.g.zoomer.get("labelFontsize")+"px",this.el.style.lineHeight=""+this.g.zoomer.get("labelLineHeight"),this._setHeight(),this},_setHeight:function(){return this.el.style.height=this.g.zoomer.get("alignmentHeight")+"px"}});b.default=g},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(64),f=d(e),g=c(66),h=d(g),i=c(16),j=i.extend({initialize:function(a){return this.g=a.g,this.draw(),this.listenTo(this.g.vis,"change:labels",this.drawR),this.listenTo(this.g.vis,"change:metacell",this.drawR),this.listenTo(this.g.zoomer,"change:rowHeight",function(){return this.el.style.height=this.g.zoomer.get("rowHeight")+"px"}),this.listenTo(this.g.selcol,"change reset add",this.setSelection)},draw:function(){if(this.removeViews(),this.g.vis.get("labels")&&this.addView("labels",new f.default({model:this.model,g:this.g})),this.g.vis.get("metacell")){var a=new h.default({model:this.model,g:this.g});return this.addView("metacell",a)}},drawR:function(){return this.draw(),this.render()},render:function(){return this.renderSubviews(),this.el.setAttribute("class","biojs_msa_labelrow"),this.el.style.height=this.g.zoomer.get("rowHeight")*(this.model.attributes.height||1)+"px",this.setSelection(),this},setSelection:function(){return this.g.selcol.getSelForRow(this.model.id).length>0?this.el.style.fontWeight="bold":this.el.style.fontWeight="normal"}});b.default=j},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(14),e=c(65),f=d.extend({initialize:function(a){return this.seq=a.seq,this.g=a.g,this.manageEvents()},manageEvents:function(){var a={};return this.g.config.get("registerMouseClicks")&&(a.click="_onclick"),a.mousein="_onmousein",a.mouseout="_onmouseout",this.delegateEvents(a),this.listenTo(this.g.config,"change:registerMouseHover",this.manageEvents),this.listenTo(this.g.config,"change:registerMouseClick",this.manageEvents),this.listenTo(this.g.vis,"change:labelName change:labelId change:labelPartition change:labelCheckbox",this.render),this.listenTo(this.g.zoomer,"change:labelIdLength change:labelNameLength change:labelPartLength change:labelCheckLength",this.render),this.listenTo(this.g.zoomer,"change:labelFontSize change:labelLineHeight change:labelWidth change:rowHeight",this.render)},render:function(){if(e.removeAllChilds(this.el),this.el.style.width=this.g.zoomer.getLabelWidth()+"px",this.el.setAttribute("class","biojs_msa_labels"),this.g.vis.get("labelCheckbox")){var a=document.createElement("input");a.setAttribute("type","checkbox"),a.value=this.model.get("id"),a.name="seq",a.style.width=this.g.zoomer.get("labelCheckLength")+"px",this.el.appendChild(a)}if(this.g.vis.get("labelId")){var b=document.createElement("span"),c=this.model.get("id");isNaN(c)||c++,b.textContent=c,b.style.width=this.g.zoomer.get("labelIdLength")+"px",b.style.display="inline-block",this.el.appendChild(b)}if(this.g.vis.get("labelPartition")){var d=document.createElement("span");d.style.width=this.g.zoomer.get("labelPartLength")+"px",d.textContent=this.model.get("partition"),d.style.display="inline-block",this.el.appendChild(b),this.el.appendChild(d)}if(this.g.vis.get("labelName")){var f=document.createElement("span");f.textContent=this.model.get("name"),this.model.get("ref")&&this.g.config.get("hasRef")&&(f.style.fontWeight="bold"),f.style.width=this.g.zoomer.get("labelNameLength")+"px",this.el.appendChild(f)}return this.el.style.overflow=scroll,this.el.style.fontSize=this.g.zoomer.get("labelFontsize")+"px",this},_onclick:function(a){var b=this.model.get("id");return this.g.trigger("row:click",{seqId:b,evt:a})},_onmousein:function(a){var b=this.model.get("id");return this.g.trigger("row:mousein",{seqId:b,evt:a})},_onmouseout:function(a){var b=this.model.get("id");return this.g.trigger("row:mouseout",{seqId:b,evt:a})}});b.default=f},function(a,b){"use strict";var c={};c.removeToInsertLater=function(a){var b,c;return c=a.parentNode,b=a.nextSibling,c.removeChild(a),function(){b?c.insertBefore(a,b):c.appendChild(a)}},c.removeAllChilds=function(a){var b;for(b=0;a.firstChild;)b++,a.removeChild(a.firstChild)},a.exports=c},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=(c(67),c(3)),e=c(14),f=c(65),g=e.extend({className:"biojs_msa_metaview",initialize:function(a){return this.g=a.g,this.listenTo(this.g.vis,"change:metacell",this.render),this.listenTo(this.g.zoomer,"change:metaWidth",this.render)},events:{click:"_onclick",mousein:"_onmousein",mouseout:"_onmouseout"},render:function(){f.removeAllChilds(this.el),this.el.style.display="inline-block";var a=this.g.zoomer.getMetaWidth();if(this.el.style.width=a-10,this.el.style.paddingRight=5,this.el.style.paddingLeft=5,this.el.style.fontSize=this.g.zoomer.get("labelFontsize")-2+"px",this.g.vis.get("metaGaps")){var b=this.model.get("seq"),c=(0,d.reduce)(b,function(a,b){return"-"===b?++a:void 0},0);c=(100*c/b.length).toFixed(0)+"%";var e=document.createElement("span");e.textContent=c,e.style.display="inline-block",e.style.width=35,this.el.appendChild(e)}if(this.g.vis.get("metaIdentity")){var g=this.g.stats.identity()[this.model.id],h=document.createElement("span");this.model.get("ref")&&this.g.config.get("hasRef")?h.textContent="ref.":void 0!==g&&null!==g&&(h.textContent=g.toFixed(2)),h.style.display="inline-block",h.style.width=40,this.el.appendChild(h)}},_onclick:function(a){return this.g.trigger("meta:click",{seqId:this.model.get("id",{evt:a})})},_onmousein:function(a){return this.g.trigger("meta:mousein",{seqId:this.model.get("id",{evt:a})})},_onmouseout:function(a){return this.g.trigger("meta:mouseout",{seqId:this.model.get("id",{evt:a})})}});b.default=g},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0}),b.version=b.xhr=b.seqs=b.parser=b.newick=b.matrix=b.gff=b.fasta=b.clustal=void 0;var e=c(68),f=d(e),g=c(78),h=d(g),i=c(80),j=d(i),k=c(83),l=d(k),m=c(84),n=d(m),o=c(69),p=d(o),q=c(77),r=d(q);b.clustal=f.default,b.fasta=h.default,b.gff=j.default,b.matrix=l.default,b.newick=n.default,b.parser=p.default,b.seqs=r.default;var s=c(70);b.xhr=s;var t="imported";"undefined"!=typeof IO_VERSION&&(t=IO_VERSION);b.version=t},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(69),f=d(e),g=c(77),h=d(g),i=void 0;b.default=i={parse:function(a){var b=[];if("[object Array]"===Object.prototype.toString.call(a))var c=a;else var c=a.split("\n");if(!1===c[0].slice(0,6))throw new Error("Invalid CLUSTAL Header");for(var d=0,e=1,f=0;d<c.length;){d++;var g=c[d];if(null!=g&&0!==g.length)if(0!==g.trim().length){if(!h.default.contains(g,"*")){1===e&&(f=0,e=0);var i=/^(?:\s*)(\S+)(?:\s+)(\S+)(?:\s*)(\d*)(?:\s*|$)/g,j=i.exec(g);if(null!=j){var k=j[1].trim(),l=j[2].trim();if(f>=b.length){var m=h.default.getMeta(k.trim());k=m.name;var n=new h.default.model(l,k,f);n.ids=m.ids||{},n.details=m.details||{};var o=Object.keys(n.ids);o.length>0&&(n.id=n.ids[o[0]]),b.push(n)}else b[f].seq+=l;f++}else console.log("parse error",g)}}else e=1;else e=1}return b=b.filter(function(a){return-1===a.seq.search(/[:.*]/i)&&-1===a.name.search(/[:.*]/i)})}},f.default.mixin(i)},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e=c(70),f={};b.default=f,f.read=function(a,b){var c=function(a){return function(c,d,e){return f._onRetrieval(c,e,b,a)}}(this);return void 0===b?new Promise(function(d,f){b=function(a,b){a?f(a):d(b)},e(a,c)}):e(a,c)},f._onRetrieval=function(a,b,c,d){var e=void 0;return void 0!==a&&(e=d.parse(b)),c.call(d,a,e)},f.extend=function(a,b){return extend(f,a,b)},f.mixin=function(a){var b=["read"];return"object"!==(void 0===a?"undefined":d(a))&&(a=a.prototype),b.forEach(function(b){a[b]=f[b]},this),a}},function(a,b,c){"use strict";function d(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function e(a,b,c){var d=a;return k(b)?(c=b,"string"==typeof a&&(d={uri:a})):d=m(b,{uri:a}),d.callback=c,d}function f(a,b,c){return b=e(a,b,c),g(b)}function g(a){function b(){4===k.readyState&&g()}function c(){var a=void 0;if(a=k.response?k.response:k.responseText||h(k),u)try{a=JSON.parse(a)}catch(a){}return a}function e(a){return clearTimeout(o),a instanceof Error||(a=new Error(""+(a||"Unknown XMLHttpRequest Error"))),a.statusCode=0,j(a,v)}function g(){if(!n){var b;clearTimeout(o),b=a.useXDR&&void 0===k.status?200:1223===k.status?204:k.status;var d=v,e=null;return 0!==b?(d={body:c(),statusCode:b,method:q,headers:{},url:p,rawRequest:k},k.getAllResponseHeaders&&(d.headers=l(k.getAllResponseHeaders()))):e=new Error("Internal XMLHttpRequest Error"),j(e,d,d.body)}}if(void 0===a.callback)throw new Error("callback argument missing");var i=!1,j=function(b,c,d){i||(i=!0,a.callback(b,c,d))},k=a.xhr||null;k||(k=a.cors||a.useXDR?new f.XDomainRequest:new f.XMLHttpRequest);var m,n,o,p=k.url=a.uri||a.url,q=k.method=a.method||"GET",r=a.body||a.data||null,s=k.headers=a.headers||{},t=!!a.sync,u=!1,v={body:void 0,headers:{},statusCode:0,method:q,url:p,rawRequest:k};if("json"in a&&!1!==a.json&&(u=!0,s.accept||s.Accept||(s.Accept="application/json"),"GET"!==q&&"HEAD"!==q&&(s["content-type"]||s["Content-Type"]||(s["Content-Type"]="application/json"),r=JSON.stringify(!0===a.json?r:a.json))),k.onreadystatechange=b,k.onload=g,k.onerror=e,k.onprogress=function(){},k.onabort=function(){n=!0},k.ontimeout=e,k.open(q,p,!t,a.username,a.password),t||(k.withCredentials=!!a.withCredentials),!t&&a.timeout>0&&(o=setTimeout(function(){if(!n){n=!0,k.abort("timeout");var a=new Error("XMLHttpRequest timeout");a.code="ETIMEDOUT",e(a)}},a.timeout)),k.setRequestHeader)for(m in s)s.hasOwnProperty(m)&&k.setRequestHeader(m,s[m]);else if(a.headers&&!d(a.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in a&&(k.responseType=a.responseType),"beforeSend"in a&&"function"==typeof a.beforeSend&&a.beforeSend(k),k.send(r),k}function h(a){if("document"===a.responseType)return a.responseXML;var b=204===a.status&&a.responseXML&&"parsererror"===a.responseXML.documentElement.nodeName;return""!==a.responseType||b?null:a.responseXML}function i(){}var j=c(71),k=c(72),l=c(73),m=c(76);a.exports=f,f.XMLHttpRequest=j.XMLHttpRequest||i,f.XDomainRequest="withCredentials"in new f.XMLHttpRequest?f.XMLHttpRequest:j.XDomainRequest,function(a,b){for(var c=0;c<a.length;c++)b(a[c])}(["get","put","post","patch","head","delete"],function(a){f["delete"===a?"del":a]=function(b,c,d){return c=e(b,c,d),c.method=a.toUpperCase(),g(c)}})},function(a,b){(function(b){"use strict";"undefined"!=typeof window?a.exports=window:void 0!==b?a.exports=b:"undefined"!=typeof self?a.exports=self:a.exports={}}).call(b,function(){return this}())},function(a,b){"use strict";function c(a){var b=d.call(a);return"[object Function]"===b||"function"==typeof a&&"[object RegExp]"!==b||"undefined"!=typeof window&&(a===window.setTimeout||a===window.alert||a===window.confirm||a===window.prompt)}a.exports=c;var d=Object.prototype.toString},function(a,b,c){"use strict";var d=c(74),e=c(75),f=function(a){return"[object Array]"===Object.prototype.toString.call(a)};a.exports=function(a){if(!a)return{};var b={};return e(d(a).split("\n"),function(a){var c=a.indexOf(":"),e=d(a.slice(0,c)).toLowerCase(),g=d(a.slice(c+1));void 0===b[e]?b[e]=g:f(b[e])?b[e].push(g):b[e]=[b[e],g]}),b}},function(a,b){"use strict";function c(a){return a.replace(/^\s*|\s*$/g,"")}b=a.exports=c,b.left=function(a){return a.replace(/^\s*/,"")},b.right=function(a){return a.replace(/\s*$/,"")}},function(a,b,c){"use strict";function d(a,b,c){if(!h(b))throw new TypeError("iterator must be a function");arguments.length<3&&(c=this),"[object Array]"===i.call(a)?e(a,b,c):"string"==typeof a?f(a,b,c):g(a,b,c)}function e(a,b,c){for(var d=0,e=a.length;d<e;d++)j.call(a,d)&&b.call(c,a[d],d,a)}function f(a,b,c){for(var d=0,e=a.length;d<e;d++)b.call(c,a.charAt(d),d,a)}function g(a,b,c){for(var d in a)j.call(a,d)&&b.call(c,a[d],d,a)}var h=c(72);a.exports=d;var i=Object.prototype.toString,j=Object.prototype.hasOwnProperty},function(a,b){"use strict";function c(){for(var a={},b=0;b<arguments.length;b++){var c=arguments[b];for(var e in c)d.call(c,e)&&(a[e]=c[e])}return a}a.exports=c;var d=Object.prototype.hasOwnProperty},function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c={};b.default=c,c.getMeta=function(a){var b,c,d=!1,e=!1,f={},g={},h=a.split(" ");if(h.length>=1?(d=h.shift(),e=h.join(" ")):d=a,d){var i=d.split("|");for(b=i.pop(),g.en=b;0!=i.length;){var j=i.shift(),k=i.shift();f[j]=k}}else b=d;if(e){var l=e.split("=");if(l.length>1){var m,n;l.length;l.forEach(function(a){a=a.trim();var b,d=a.split(" ");if(d.length>1?(n=d.pop(),b=d.join(" ")):b=a,m){var e=m.toLowerCase();g[e]=b}else c=b;m=n})}else c=l.shift()}var o={name:b,ids:f,details:g};return c&&(o.desc=c),o};var d={sp:{link:"http://www.uniprot.org/%s",name:"Uniprot"},tr:{link:"http://www.uniprot.org/%s",name:"Trembl"},gb:{link:"http://www.ncbi.nlm.nih.gov/nuccore/%s",name:"Genbank"},pdb:{link:"http://www.rcsb.org/pdb/explore/explore.do?structureId=%s",name:"PDB"}};c.buildLinks=function(a){var b={};return a=a||{},Object.keys(a).forEach(function(c){if(c in d){var e=d[c],f=e.link.replace("%s",a[c]);b[e.name]=f}}),b},c.contains=function(a,b){return-1!=="".indexOf.call(a,b,0)},c.splitNChars=function(a,b){var c,d;b=b||80;var e=[];for(c=0,d=a.length-1;c<=d;c+=b)e.push(a.substr(c,b));return e},c.reverse=function(a){return a.split("").reverse().join("")},c.complement=function(a){var b=a+"",c=[[/g/g,"0"],[/c/g,"1"],[/0/g,"c"],[/1/g,"g"],[/G/g,"0"],[/C/g,"1"],[/0/g,"C"],[/1/g,"G"],[/a/g,"0"],[/t/g,"1"],[/0/g,"t"],[/1/g,"a"],[/A/g,"0"],[/T/g,"1"],[/0/g,"T"],[/1/g,"A"]];for(var d in c)b=b.replace(c[d][0],c[d][1]);return b},c.reverseComplement=function(a){return c.reverse(c.complement(a))},c.model=function(a,b,c){this.seq=a,this.name=b,this.id=c,this.ids={}}},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(77),f=d(e),g=c(79),h=d(g),i=c(69),j=d(i),k=void 0;b.default=k={getMeta:f.default.getMeta,extend:function(a){var b=(0,h.default)(k);return k.getMeta=a,b},parse:function(a){var b=[];if(!a||0===a.length)return[];"[object Array]"!==Object.prototype.toString.call(a)&&(a=a.split("\n"));for(var c=k,d=c.getMeta,e=0;e<a.length;e++){var g=a[e];if(">"===g[0]||";"===g[0]){var h=g.slice(1).trim(),i=d(h.trim());h=i.name;var j=i.id||b.length,l=new f.default.model("",i.name,j);l.ids=i.ids||{},l.details=i.details||{},b.push(l)}else l.seq+=g}return b},write:function(a,b){for(var c="",d=0;d<a.length;d++){var e=a[d];null!=b&&(e=b(e)),c+=">"+e.name+"\n",c+=f.default.splitNChars(e.seq,80).join("\n"),c+="\n"}return c}},j.default.mixin(k)},function(a,b){"use strict";function c(a,b,c){for(var d=[],e=a<b,f=c?e?b+1:b-1:b,g=a;e?g<f:g>f;e?g++:g--)d.push(g);return d}Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(a){a=a||{};for(var b=c(0,arguments.length,!1),d=0;d<b.length;d++){var e=b[d];if(arguments[e])for(var f=0;f<arguments[e].length;f++){var g=arguments[e][f];arguments[e].hasOwnProperty(g)&&(a[g]=arguments[e][g])}}return a}},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(69),f=d(e),g=c(81),h=d(g),i=c(82),j=d(i),k=function(){};f.default.mixin(k),b.default=k,k.parseLines=function(a){var b=a.split("\n"),c={},d=[];c.type=k._guessType(b);var e=0;if("jalview"===c.type){var f=j.default.readHeader(b);e=f.offset,c.colors=f.colors,d=f.features}for(var g=e;g<b.length;g++){var h=b[g];0!==h.length&&"#"!==h[0]&&(void 0!==(h=k.parseLine(h))&&d.push(h))}return{features:d,config:c}},k._guessType=function(a){return"##gff-version 3"===a[0].substring(0,15)?"gff3":a[0].indexOf("#")<0&&2===a[0].split("\t").length?"jalview":"gff3"},k.parseSeqs=k.parse=function(a){var b=k.parseLines(a),c={};return b.features.forEach(function(a){var b=a.seqname;void 0===c[b]&&(c[b]=[]),delete a.seqname,c[b].push(a)}),delete b.features,b.seqs=c,b},k.parseLine=function(a){var b={},c=a.split(/\s+/);if(1!==c.length){b.seqname=c[0],b.source=c[1],b.feature=c[2],b.start=parseInt(c[3]),b.end=parseInt(c[4]),b.score=c[5],b.strand=c[6],b.frame=c[7];var d=c.slice(8).join(" ");return Object.keys(b).forEach(function(a){"string"==typeof b[a]&&(b[a]=b[a].trim()),"."===b[a]&&(b[a]=void 0)}),b.score&&(b.score=parseFloat(b.score)),b.frame&&(b.frame=parseInt(b.frame)),b.attributes=h.default.extractKeys(d),b}},k.exportLine=function(a){var b=Object.keys(a.attributes).map(function(b){return b+"="+a.attributes[b]}).join(";"),c=[a.seqname,a.source,a.feature,a.start,a.end,a.score,a.strand,a.frame,b];return c=c.map(function(a){return void 0===a?".":a}),c.join("\t")},k.exportLines=function(a){return"##gff-version 3\n"+a.map(k.exportLine).join("\n")},k.exportSeqs=k.export=function(a){var b=[],c=function(a){a.seqname=d,b.push(a)};for(var d in a)a[d].forEach(c);return k.exportLines(b)},k.utils=h.default},function(a,b){"use strict";function c(a){var b={};return a.split(";").forEach(function(a){var c,d,e;a.indexOf("=")>0?(c=a.split("="),d=c[0],e=c[1],b[d]=e):a.indexOf(" ")>0&&(c=a.split(" "),d=c[0],e=c[1].replace(/"/g,""),b[d]=e)}),b}function d(a){var b=a.toString(16);return 1===b.length?"0"+b:b}function e(a,b,c){return 3===a.length?e(a[0],a[1],a[2]):"#"+d(a)+d(b)+d(c)}Object.defineProperty(b,"__esModule",{value:!0}),b.extractKeys=c,b.rgbToHex=e,b.default={extractKeys:c,rgbToHex:e}},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(81),e={};b.default=e,e.readHeader=function(a){for(var b,c={},d=0,f=[];d<a.length;d++){var g=a[d];if(g.indexOf("#")>=0)break;var h=g.split(/\t/),i=h[0].trim();if("GFF"===i)break;if(2===h.length)if("startgroup"===i)b=h[1].trim();else{if("endgroup"===i){b="";continue}c[h[0]]=e.parseColor(h[1])}else if(h.length>=5){var j=e.parseLine(h);b&&(j.attributes.Parent=b),f.push(j)}}return{offset:d,colors:c,features:f}},e.parseColor=function(a){return a.indexOf(",")>=0?(0,d.rgbToHex)(a.split(",").map(function(a){return parseInt(a)})):6===a.length&&parseInt(a.charAt(0),16)<=16&&"bisque"!==a?"#"+a:a},e.parseLine=function(a){var b={attributes:{}};return b.attributes.Name=a[0].trim(),b.seqname=a[1].trim(),b.start=parseInt(a[3]),b.end=parseInt(a[4]),b.feature=a[5].trim(),"ID_NOT_SPECIFIED"===b.seqname&&(b.seqname=a[2].trim()),b}},function(a,b,c){"use strict";var d=c(69),e=function(a){return a&&a.__esModule?a:{default:a}}(d),f=function a(b){return this.constructor!=a?new a(b):(this.matrix={},this.parsingOrder=[],void 0!=b&&this.parse(b),this)};e.default.mixin(f),a.exports=f,f.prototype.parse=function(a){return a.split("\n").forEach(function(a){this.parseLine(a)}.bind(this)),this.buildMatrix(),this.matrix},f.read=function(a,b){return(new f).read(a,b)},f.parse=function(a){return(new f).parse(a)},f.prototype.parseLine=function(a){var b=a.charAt(0);if("#"!==b){this.parsingOrder.push(b);for(var c=a.substring(1),d=c.split(/\s+/).filter(function(a){return a.length>0}).map(function(a){return parseInt(a)}),e={},f=0;f<d.length;f++)e[this.parsingOrder[f]]=d[f];this.matrix[b]=e}},f.prototype.export=function(){return f.export(this.matrix)},f.export=function(a){var b=[],c=1;"matrix"in a&&(a=a.matrix);for(var d in a){for(var e=d,f=Object.keys(a[d]),g=0;g<c;g++)e+="\t"+a[d][f[g]];b.push(e),c++}return b.join("\n")},f.prototype.buildMatrix=function(){for(var a=this.parsingOrder.length-1;a>=0;a--){var b=this.parsingOrder[a],c=this.matrix[b];for(var d in c)this.matrix[d][b]=c[d]}}},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0}),b.parseNhx=b.parse=void 0;var e=c(85),f=d(e),g=c(86),h=d(g),i={};i.parse=f.default,i.parseNhx=h.default,b.default=i,b.parse=f.default,b.parseNhx=h.default},function(a,b){"use strict";function c(a){for(var b=[],c={},d=a.split(/\s*(;|\(|\)|,|:)\s*/),e=0;e<d.length;e++){var f=d[e],g=void 0;switch(f){case"(":g={},c.children=[g],b.push(c),c=g;break;case",":g={},b[b.length-1].children.push(g),c=g;break;case")":c=b.pop();break;case":":break;default:var h=d[e-1];")"==h||"("==h||","==h?c.name=f:":"==h&&(c.branch_length=parseFloat(f))}}return c}Object.defineProperty(b,"__esModule",{value:!0}),b.default=c},function(a,b){"use strict";function c(a){for(var b=[],c={},e=a.split(/\s*(;|\(|\)|\[|\]|,|:|=)\s*/),f=0;f<e.length;f++){var g=e[f],h=void 0;switch(g){case"(":h={},c.children=[h],b.push(c),c=h;break;case",":h={},b[b.length-1].children.push(h),c=h;break;case")":c=b.pop();break;case":":break;default:var i=e[f-1];if(")"==i||"("==i||","==i)c.name=g;else if(":"==i){void 0===g||d(g);isNaN(g)||(c.branch_length=parseFloat(g))}else if("="==i){var j=e[f-2];switch(j){case"D":c.duplication=g;break;case"G":c.gene_id=g;break;case"T":c.taxon_id=g}}else;}}return c}Object.defineProperty(b,"__esModule",{value:!0});var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};b.default=c},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(88),f=d(e),g=c(89),h=d(g),i=c(16),j=i.extend({initialize:function(a){var b=this;return this.g=a.g,this.draw(),this.listenTo(this.g.vis,"change:labels change:metacell change:leftHeader",function(){return b.draw(),b.render()})},draw:function(){if(this.removeViews(),this.g.vis.get("leftHeader")&&(this.g.vis.get("labels")||this.g.vis.get("metacell"))){var a=new f.default({model:this.model,g:this.g});a.ordering=-50,this.addView("lHeader",a)}var b=new h.default({model:this.model,g:this.g});return b.ordering=0,this.addView("rHeader",b)},render:function(){return this.renderSubviews(),this.el.className="biojs_msa_header"}});b.default=j},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(44),e=c(14),f=c(65),g=e.extend({className:"biojs_msa_headers",initialize:function(a){return this.g=a.g,this.listenTo(this.g.vis,"change:metacell change:labels",this.render),this.listenTo(this.g.zoomer,"change:labelWidth change:metaWidth",this.render)},render:function(){f.removeAllChilds(this.el);var a=0;return a+=this.g.zoomer.getLeftBlockWidth(),this.el.style.width=a+"px",this.g.vis.get("labels")&&this.el.appendChild(this.labelDOM()),this.g.vis.get("metacell")&&this.el.appendChild(this.metaDOM()),this.el.style.display="inline-block",this.el.style.fontSize=this.g.zoomer.get("markerFontsize"),this},labelDOM:function(){var a=d.mk("div");if(a.style.width=this.g.zoomer.getLabelWidth(),a.style.display="inline-block",this.g.vis.get("labelCheckbox")&&a.appendChild(this.addEl(".",10)),this.g.vis.get("labelId")&&a.appendChild(this.addEl("ID",this.g.zoomer.get("labelIdLength"))),this.g.vis.get("labelPartition")&&a.appendChild(this.addEl("part",15)),this.g.vis.get("labelName")){var b=this.addEl("Label");a.appendChild(b)}return a},addEl:function(a,b){var c=document.createElement("span");return c.textContent=a,void 0!==b&&null!==b&&(c.style.width=b+"px"),c.style.display="inline-block",c},metaDOM:function(){var a=d.mk("div");return a.style.width=this.g.zoomer.getMetaWidth(),a.style.display="inline-block",this.g.vis.get("metaGaps")&&a.appendChild(this.addEl("Gaps",this.g.zoomer.get("metaGapWidth"))),this.g.vis.get("metaIdentity")&&a.appendChild(this.addEl("Ident",this.g.zoomer.get("metaIdentWidth"))),a}});b.default=g},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(90),f=d(e),g=c(92),h=d(g),i=c(93),j=d(i),k=c(109),l=d(k),m=c(16),n=m.extend({initialize:function(a){return this.g=a.g,this.blockEvents=!1,this.listenTo(this.g.vis,"change:header",function(){return this.draw(),this.render()}),this.listenTo(this.g.vis,"change",this._setSpacer),this.listenTo(this.g.zoomer,"change:alignmentWidth",this._setWidth),this.listenTo(this.g.zoomer,"change:_alignmentScrollLeft",this._adjustScrollingLeft),this.listenTo(this.g.columns,"change:hidden",function(){return this.draw(),this.render()}),this.draw(),this.g.vis.once("change:loaded",this._adjustScrollingLeft,this)},events:{scroll:"_sendScrollEvent"},draw:function(){if(this.removeViews(),this.g.vis.get("conserv")){var a=new h.default({model:this.model,g:this.g});a.ordering=-20,this.addView("conserv",a)}if(this.g.vis.get("markers")){var b=new f.default({model:this.model,g:this.g});b.ordering=-10,this.addView("marker",b)}if(this.g.vis.get("seqlogo")){var c=new j.default({model:this.model,g:this.g});c.ordering=-30,this.addView("seqlogo",c)}if(this.g.vis.get("gapHeader")){var d=new l.default({model:this.model,g:this.g});return d.ordering=-25,this.addView("gapview",d)}},render:function(){return this.renderSubviews(),this._setSpacer(),this.el.className="biojs_msa_rheader",this.el.style.overflowX="auto",this.el.style.display="inline-block",this._setWidth(),this._adjustScrollingLeft(),this},_sendScrollEvent:function(){return this.blockEvents||this.g.zoomer.set("_alignmentScrollLeft",this.el.scrollLeft,{origin:"header"}),this.blockEvents=!1},_adjustScrollingLeft:function(a,b,c){if(null==(void 0!==c&&null!==c?c.origin:void 0)||"header"!==c.origin){var d=this.g.zoomer.get("_alignmentScrollLeft");return this.blockEvents=!0,
this.el.scrollLeft=d}},_setSpacer:function(){return this.el.style.marginLeft=this._getLabelWidth()+"px"},_getLabelWidth:function(){var a=0;return this.g.vis.get("leftHeader")||(a+=this.g.zoomer.getLeftBlockWidth()),a},_setWidth:function(){return this.el.style.width=this.g.zoomer.getAlignmentWidth()+"px"}});b.default=n},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(91),e=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(d),f=c(14),g=c(65),h=c(15),i=f.extend({className:"biojs_msa_marker",initialize:function(a){return this.g=a.g,this.listenTo(this.g.zoomer,"change:stepSize change:labelWidth change:columnWidth change:markerStepSize change:markerFontsize",this.render),this.listenTo(this.g.vis,"change:labels change:metacell",this.render),this.manageEvents()},render:function(){g.removeAllChilds(this.el);var a=this.g.zoomer.get("markerFontsize"),b=this.g.zoomer.get("columnWidth"),c=this.g.zoomer.get("stepSize"),d=this.g.zoomer.get("markerStepSize"),e=this.g.columns.get("hidden");this.el.style.fontSize=a;for(var f=document.createElement("span"),h=this.model.getMaxLength(),i=0;i<h;i++)if(e.indexOf(i)>=0){var j=this.markerHidden(i,c);j&&f.appendChild(j),i+=c}else{var k=document.createElement("span");k.className="msa-col-header",k.style.width=b+"px",k.style.display="inline-block",k.textContent=(i+1)%d==0?i+1:(i+1)%c==0?".":" ",k.rowPos=i,f.appendChild(k)}return this.el.appendChild(f),this},markerHidden:function(a,b){for(var c=this,d=this.g.columns.get("hidden").slice(0),f=Math.max(0,a-b),g=!0,i=f;i<=a;i++)g&=d.indexOf(i)>=0;if(!g){for(var j=this.model.getMaxLength(),k=0,l=-1,m=a;m<=j&&(l>=0||(l=d.indexOf(m)),d.indexOf(m)>=0);m++)k++;var n=e.base({height:10,width:10});n.style.position="relative";var o=e.polygon({points:"0,0 5,5 10,0",style:"fill:lime;stroke:purple;stroke-width:1"});return h(o).on("click",function(a){return d.splice(l,k),c.g.columns.set("hidden",d)}),n.appendChild(o),n}},manageEvents:function(){var a={};return this.g.config.get("registerMouseClicks")&&(a.click="_onclick"),this.g.config.get("registerMouseHover")&&(a.mousein="_onmousein",a.mouseout="_onmouseout"),this.delegateEvents(a),this.listenTo(this.g.config,"change:registerMouseHover",this.manageEvents),this.listenTo(this.g.config,"change:registerMouseClick",this.manageEvents)},_onclick:function(a){var b=a.target.rowPos,c=this.g.zoomer.get("stepSize");return this.g.trigger("column:click",{rowPos:b,stepSize:c,evt:a})},_onmousein:function(a){var b=this.g.zoomer.get("stepSize"*a.rowPos),c=this.g.zoomer.get("stepSize");return this.g.trigger("column:mousein",{rowPos:b,stepSize:c,evt:a})},_onmouseout:function(a){var b=this.g.zoomer.get("stepSize"*a.rowPos),c=this.g.zoomer.get("stepSize");return this.g.trigger("column:mouseout",{rowPos:b,stepSize:c,evt:a})}});b.default=i},function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c="http://www.w3.org/2000/svg",d=function(a,b){for(var c in b){var d=b[c];a.setAttributeNS(null,c,d)}return a},e=function(a){var b=document.createElementNS(c,"svg");return b.setAttribute("width",a.width),b.setAttribute("height",a.height),b},f=function(a){var b=document.createElementNS(c,"rect");return d(b,a)},g=function(a){var b=document.createElementNS(c,"line");return d(b,a)},h=function(a){var b=document.createElementNS(c,"polygon");return d(b,a)};b.base=e,b.line=g,b.rect=f,b.polygon=h},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e=c(91),f=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(e),g=c(14),h=c(65),i=g.extend({className:"biojs_msa_conserv",initialize:function(a){this.g=a.g,this.listenTo(this.g.zoomer,"change:stepSize change:labelWidth change:columnWidth",this.render),this.listenTo(this.g.vis,"change:labels change:metacell",this.render),this.listenTo(this.g.columns,"change:scaling",this.render),this.listenTo(this.g.stats,"reset",this.render);var b=_.extend({},{fillColor:["#660","#ff0"],strokeColor:"#330",maxHeight:20,rectStyler:function(a,b){return a}},this.g.conservationConfig);return this.fillColor=b.fillColor,this.strokeColor=b.strokeColor,this.maxHeight=b.maxHeight,this.rectStyler=b.rectStyler,this.manageEvents()},colorer:function(a){var b=this,c=function(){return"none"};if("string"==typeof a)c=function(){return a};else if(Array.isArray(a)){2!=a.length&&console.error("ERROR: colorRange array should have exactly two elements",a);var e="undefined"!=typeof d3&&!!d3.scale,f="undefined"!=typeof d3_scale;e||f?function(){var d=e?d3.scale.linear():d3_scale.scaleLinear(),f=d.domain([0,b.maxHeight]).range(a);c=function(a){return f(a.height)}}():(console.warn("providing a [min/max] range as input requires d3 to be included - only using the first color"),c=function(b){return a[0]})}else console.warn("expected colorRange to be '#rgb' or ['#rgb', '#rgb']",a,"("+(void 0===a?"undefined":d(a))+")");return c},render:function(){var a=this.g.stats.scale(this.g.stats.conservation());h.removeAllChilds(this.el);var b=this.model.getMaxLength(),c=this.g.zoomer.get("columnWidth"),d=this.maxHeight,e=c*(b-this.g.columns.get("hidden").length),g=f.base({height:d,width:e});g.style.display="inline-block",g.style.cursor="pointer";for(var i=(this.rectData,this.colorer(this.fillColor)),j=this.colorer(this.strokeColor),k=this.rectStyler,l=this.g.zoomer.get("stepSize"),m=this.g.columns.get("hidden"),n=0,o=0;o<b;)if(m.indexOf(o)>=0)o+=l;else{e=c*l;for(var p=0,q=l-1,r=0;0<q?r<=q:r>=q;0<q?r++:r--)p+=a[o];var s=d*(p/l),t={x:n,y:d-s,maxheight:d,width:e-c/4,height:s,rowPos:o},u=f.rect(t);u.style.stroke=j(t),u.style.fill=i(t),"function"==typeof k&&k(u,t),u.rowPos=o,g.appendChild(u),n+=e,o+=l}return this.el.appendChild(g),this},_onclick:function(a){var b=this,c=a.target.rowPos,d=this.g.zoomer.get("stepSize");return function(){for(var e=[],f=d-1,g=0;0<f?g<=f:g>=f;0<f?g++:g--)e.push(b.g.trigger("bar:click",{rowPos:c+g,evt:a}));return e}()},manageEvents:function(){var a={};return this.g.config.get("registerMouseClicks")&&(a.click="_onclick"),this.g.config.get("registerMouseHover")&&(a.mousein="_onmousein",a.mouseout="_onmouseout"),this.delegateEvents(a),this.listenTo(this.g.config,"change:registerMouseHover",this.manageEvents),this.listenTo(this.g.config,"change:registerMouseClick",this.manageEvents)},_onmousein:function(a){var b=this.g.zoomer.get("stepSize"*a.rowPos);return this.g.trigger("bar:mousein",{rowPos:b,evt:a})},_onmouseout:function(a){var b=this.g.zoomer.get("stepSize"*a.rowPos);return this.g.trigger("bar:mouseout",{rowPos:b,evt:a})}});b.default=i},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(94),e=c(14),f=c(65),g=e.extend({initialize:function(a){return this.g=a.g,this.listenTo(this.g.zoomer,"change:alignmentWidth",this.render),this.listenTo(this.g.colorscheme,"change",function(){var a=this.g.colorscheme.getSelectedScheme();return this.seqlogo.changeColors(a),this.render()}),this.listenTo(this.g.zoomer,"change:columnWidth",function(){return this.seqlogo.column_width=this.g.zoomer.get("columnWidth"),this.render()}),this.listenTo(this.g.stats,"reset",function(){return this.draw(),this.render()}),this.draw()},draw:function(){f.removeAllChilds(this.el),console.log("redraw seqlogo");var a=this.g.stats.conservResidue({scaled:!0});a=_.map(a,function(a){return _.pick(a,function(a,b){return"-"!==b})});var b={alphabet:"aa",heightArr:a},c=this.g.colorscheme.getSelectedScheme();return this.seqlogo=new d({model:this.model,g:this.g,data:b,yaxis:!1,scroller:!1,xaxis:!1,height:100,column_width:this.g.zoomer.get("columnWidth"),positionMarker:!1,zoom:1,el:this.el,colors:c})},render:function(){return this.seqlogo.render()}});b.default=g},function(a,b,c){"use strict";a.exports=c(95)},function(a,b,c){"use strict";_=c(11);var d=c(96),e=c(97),f=c(103),g=c(14),h=c(104),i=c(105),j=c(106),k=c(15);a.exports=g.extend({options:{xaxis:!0,yaxis:!0,height:300,column_width:34,debug:!0,scale_height_enabled:!0,scaled_max:!0,zoom_buttons:!0,colorscheme:"default",data:void 0,start:1,end:void 0,zoom:.4,colors:void 0,divider:!1,show_probs:!1,divider_step:5,show_divider:!1,border:!1,settings:!1,scroller:!0,positionMarker:!0},loadDefault:function(a){this.data=a.data,this.display_ali_map=0,this.alphabet=a.data.alphabet||"dna",this.start=a.start,this.zoom=parseFloat(a.zoom)||.4,this.default_zoom=this.zoom,this.column_width=a.column_width,this.height=a.height,this.canvas_width=5e3,this.scale_height_enabled=a.scale_height_enabled,this.scrollme=null,this.previous_target=0,this.rendered=[],this.previous_zoom=0,void 0==this.data.max_height&&(this.data.max_height=this.calcMaxHeight(this.data.heightArr)),this.data.insert_probs&&this.data.delete_probs||(this.options.show_probs=!1),a.scaled_max?this.data.max_height=a.data.max_height_obs||this.data.max_height||2:this.data.max_height=a.data.max_height_theory||this.data.max_height||2,a.colors?this.changeColors(a.colors):"aa"===this.alphabet?(this.aa_colors=c(107),this.changeColors(this.aa_colors)):(this.dna_colors=c(108),this.changeColors(this.dna_colors))},initialize:function(a){if(!d())return void(this.el.textContent="Your browser doesn't support canvas.");void 0==a.data&&(this.el.textContent="No data added."),_.extend(this.options,a);var b=this.options;if(this.loadDefault(b),this.options.show_probs?this.data.processing&&/^observed|weighted/.test(this.data.processing)?(this.show_inserts=0,this.info_content_height=this.height-14):(this.show_inserts=1,this.info_content_height=this.height-44):this.info_content_height=this.height,this.$el=k(this.el),this.initDivs(),this.options.settings){var c=j(this,b);this.$el.append(c)}i(this.$el,this,this.logo_graphic)},initDivs:function(){var a=l("div");a.className="logo_graphic",this.logo_graphic=k(a);var b=l("div");if(b.className="logo_container",b.style.height=this.height,this.container=k(b),this.container.append(a),this.$el.append(b),this.options.divider){var c=l("div");c.className="logo_divider",this.$el.append(c)}this.dom_element=k(a),this.called_on=this.$el,this.options.xaxis&&h.render_x_axis_label.call(this),this.options.yaxis?h.render_y_axis_label.call(this):this.container[0].style.marginLeft="0px"},render:function(){return e.call(this),this},changeColors:function(a){this.colors=a,void 0!=a&&void 0!=a.type&&(this.colorscheme="dynamic"),this.buildAlphabet()},buildAlphabet:function(){this.letters={};var a=this.colors;if("dynamic"==this.colorscheme){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");a={},b.forEach(function(b){a[b]=""})}for(var c in a)if(a.hasOwnProperty(c)){var d={color:a[c]};this.letters[c]=new f(c,d)}},toggleColorscheme:function(a){var b=this.currentColumn();a?this.colorscheme="default"===a?"default":"consensus":"default"===this.colorscheme?this.colorscheme="consensus":this.colorscheme="default",this.rendered=[],this.scrollme.reflow(),this.scrollToColumn(b+1),this.scrollToColumn(b)},toggleScale:function(a){var b=this.currentColumn();a?this.data.max_height="obs"===a?this.data.max_height_obs:this.data.max_height_theory:this.data.max_height===this.data.max_height_obs?this.data.max_height=this.data.max_height_theory:this.data.max_height=this.data.max_height_obs,this.rendered=[],this.logoYAxis&&this.logoYAxis.remove(),h.render_y_axis_label.call(this),this.scrollme.reflow(),this.scrollToColumn(b+1),this.scrollToColumn(b)},toggleAliMap:function(a){var b=this.currentColumn();a?this.display_ali_map="model"===a?0:1:1===this.display_ali_map?this.display_ali_map=0:this.display_ali_map=1,h.render_x_axis_label(this),this.rendered=[],this.scrollme.reflow(),this.scrollToColumn(b+1),this.scrollToColumn(b)},currentColumn:function(){var a=this.scrollme.scroller.getValues().left,b=this.column_width*this.zoom,c=a/b,d=this.container.width()/b/2;return Math.ceil(c+d)},changeZoom:function(a){var b=.3;if(a.target?b=a.target:a.distance&&(b=(parseFloat(this.zoom)-parseFloat(a.distance)).toFixed(1),"+"===a.direction&&(b=(parseFloat(this.zoom)+parseFloat(a.distance)).toFixed(1))),b>1?b=1:b<.1&&(b=.1),this.logo_graphic.width()*b/this.zoom>this.container.width())if(a.column){this.zoom=b,this.render({zoom:this.zoom}),this.scrollme.reflow();var c=this.coordinatesFromColumn(a.column);this.scrollme.scroller.scrollTo(c-a.offset)}else{var d=this.currentColumn();this.zoom=b,this.render({zoom:this.zoom}),this.scrollme.reflow(),this.scrollToColumn(d)}return this.zoom},columnFromCoordinates:function(a){return Math.ceil(a/(this.column_width*this.zoom))},coordinatesFromColumn:function(a){return(a-1)*(this.column_width*this.zoom)+this.column_width*this.zoom/2},scrollToColumn:function(a,b){var c=this.logo_container.width()/2,d=this.coordinatesFromColumn(a);this.scrollme.scroller.scrollTo(d-c,0,b)},calcMaxHeight:function(a){return a.reduce(function(a,b){var c=0;for(var d in b)c+=b[d];return c>a?c:a},0)}});var l=function(a){return document.createElement(a)}},function(a,b){"use strict";var c=null;a.exports=function(){if(!c){var a=document.createElement("canvas");c=!(!a.getContext||!a.getContext("2d"))}return c}},function(a,b,c){"use strict";function d(a,b,c,d,e){var f=g(a).find("#canv_"+d);return f.length||(g(a).append('<canvas class="canvas_logo" id="canv_'+d+'"  height="'+b+'" width="'+c+'" style="left:'+e*d+'px"></canvas>'),f=g(a).find("#canv_"+d)),g(f).attr("width",c).attr("height",b),f[0]}var e=c(98),f=c(102),g=c(15);a.exports=function(a){if(this.data){a=a||{};var b=a.zoom||this.zoom,c=a.target||1,g=(a.scaled,this.dom_element.parent().attr("width")),h=1,i=null,j=null,k=0;if(this.previous_target=c,a.start&&(this.start=a.start),a.end&&(this.end=a.end),b<=.1?b=.1:b>=1&&(b=1),this.zoom=b,i=this.end||this.data.heightArr.length,j=this.start||1,i=i>this.data.heightArr.length?this.data.heightArr.length:i,i=i<j?j:i,j=j>i?i:j,j=j>1?j:1,this.y=this.height-20,this.max_width=this.column_width*(i-j+1),g>this.max_width&&(b=1,this.zoom_enabled=!1),this.zoom=b,this.zoomed_column=this.column_width*b,this.total_width=this.zoomed_column*(i-j+1),b<1)for(;this.total_width<g&&(this.zoom+=.1,this.zoomed_column=this.column_width*this.zoom,this.total_width=this.zoomed_column*(i-j+1),this.zoom_enabled=!1,!(b>=1)););c>this.total_width&&(c=this.total_width),this.dom_element.attr({width:this.total_width+"px"}).css({width:this.total_width+"px"}),this.canvas_width=this.total_width;var l=Math.ceil(this.total_width/this.canvas_width);for(this.columns_per_canvas=Math.ceil(this.canvas_width/this.zoomed_column),this.previous_zoom!==this.zoom&&(this.dom_element.find("canvas").remove(),this.previous_zoom=this.zoom,this.rendered=[]),this.canvases=[],this.contexts=[],k=0;k<l;k++){var m=this.columns_per_canvas*k+j,n=m+this.columns_per_canvas-1;n>i&&(n=i);var o=(n-m+1)*this.zoomed_column;o>h&&(h=o);var p=h*k,q=p+o;if(c<q+q/2&&c>p-p/2)if(this.canvases[k]=d(this.dom_element,this.height,o,k,h),this.contexts[k]=this.canvases[k].getContext("2d"),this.contexts[k].setTransform(1,0,0,1,0,0),this.contexts[k].clearRect(0,0,o,this.height),this.contexts[k].fillStyle="#ffffff",this.contexts[k].fillRect(0,0,q,this.height),this.zoomed_column>12){var r=parseInt(10*b,10);r=r>10?10:r,this.debug&&f.call(this,m,n,k,1),e.call(this,m,n,k,r)}else f.call(this,m,n,k)}!this.scrollme&&this.options.scroller&&(this.scrollme=new EasyScroller(this.dom_element[0],{scrollingX:1,scrollingY:0,eventTarget:this.called_on})),1!==c&&this.scrollme.reflow()}}},function(a,b,c){"use strict";function d(a,b,c,d,f,g,h){var i=c-4,j="#ffffff",k="#555555";h&&(i=c-35),f<.75?(j="#2171b5",k="#ffffff"):f<.85?j="#6baed6":f<.95&&(j="#bdd7e7"),e(a,b,i,f,g,d,j,k)}function e(a,b,c,d,e,f,g,h){a.font=e+"px Arial",a.fillStyle=g,a.fillRect(b,c-10,f,14),a.textAlign="center",a.fillStyle=h,a.fillText(d,b+f/2,c)}function f(a,b){var c=b.ralign?b.x+a.zoomed_column:b.x,d=b.ralign?b.x+2:b.x;j(a.contexts[b.context_num],c,a.height-30,-30-a.height,"#dddddd"),j(a.contexts[b.context_num],c,0,5),k(a.contexts[b.context_num],d,10,a.zoomed_column,b.column_num,b.fontsize,b.ralign)}function g(a,b,c,d,f,g){var h=c-20,i="#ffffff",k="#555555";f>.1?(i="#d7301f",k="#ffffff"):f>.05?i="#fc8d59":f>.03&&(i="#fdcc8a"),e(a,b,h,f,g,d,i,k),f>.03&&j(a,b+d,c-30,-30-c,i)}function h(a,b,c,d,f,g){var h="#ffffff",i="#555555";f>9?(h="#d7301f",i="#ffffff"):f>7?h="#fc8d59":f>4&&(h="#fdcc8a"),e(a,b,c,f,g,d,h,i)}var i=c(99),j=c(100),k=c(101);a.exports=function(a,b,c,e){var k=0,l=a,m=null,n=0,o=Math.abs(this.data.max_height),p=isNaN(this.data.min_height_obs)?0:parseInt(this.data.min_height_obs,10),q=o+Math.abs(p),r=Math.round(100*Math.abs(this.data.max_height)/q),s=Math.round(this.info_content_height*r/100),t=this.info_content_height-s;this.info_content_height,this.info_content_height;for(b+3<=this.end&&(b+=3),n=a;n<=b;n++){if(this.data.mmline&&1===this.data.mmline[n-1])this.contexts[c].fillStyle="#cccccc",this.contexts[c].fillRect(k,10,this.zoomed_column,this.height-40);else{var u=this.data.heightArr[n-1],v=[];if(u){var w=0,x=(u.length,0),y=null;for(var x in u){var z=u[x],A=[x,z],B=k+this.zoomed_column/2,C=null;if(A[1]>.01){C=parseFloat(A[1])/this.data.max_height;var D=this.info_content_height-2-w,E=(this.info_content_height-2)*C;v[x]=[E,this.zoomed_column,B,D],w+=E}}for(var x in u)v[x]&&this.letters[x]&&(y="dynamic"===this.colorscheme?this.colors.getColor(x,{pos:n-1}):"consensus"===this.colorscheme?this.cmap[n-1][x]||"#7a7a7a":null,this.letters[x].draw(this.contexts[c],v[x][0],v[x][1],v[x][2],v[x][3],y))}}m=this.display_ali_map?this.data.ali_map[n-1]:l,this.options.show_divider&&(this.zoom<.7?n%this.options.divider_step==0&&f(this,{context_num:c,x:k,fontsize:10,column_num:m,ralign:!0}):f(this,{context_num:c,x:k,fontsize:e,column_num:m})),this.options.show_probs&&(d(this.contexts[c],k,this.height,this.zoomed_column,this.data.delete_probs[n-1],e,this.show_inserts),j(this.contexts[c],k,this.height-15,5),this.show_inserts&&(g(this.contexts[c],k,this.height,this.zoomed_column,this.data.insert_probs[n-1],e),h(this.contexts[c],k,this.height-5,this.zoomed_column,this.data.insert_lengths[n-1],e),j(this.contexts[c],k,this.height-45,5),j(this.contexts[c],k,this.height-30,5))),k+=this.zoomed_column,l++}this.options.show_probs&&(this.show_inserts&&(i(this.contexts[c],this.height-30,this.total_width),i(this.contexts[c],this.height-45,this.total_width)),i(this.contexts[c],this.height-15,this.total_width)),this.options.border&&i(this.contexts[c],0,this.total_width)}},function(a,b){"use strict";a.exports=function(a,b,c){a.beginPath(),a.moveTo(0,b),a.lineTo(c,b),a.lineWidth=1,a.strokeStyle="#999999",a.stroke()}},function(a,b){"use strict";a.exports=function(a,b,c,d,e){e=e||"#999999",a.beginPath(),a.moveTo(b,c),a.lineTo(b,c+d),a.lineWidth=1,a.strokeStyle=e,a.stroke()}},function(a,b){"use strict";a.exports=function(a,b,c,d,e,f,g){a.font=f+"px Arial",a.textAlign=g?"right":"center",a.fillStyle="#666666",a.fillText(e,b+d/2,c)}},function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h){var i="#ffffff";h?(e>.1?i="#d7301f":e>.05?i="#fc8d59":e>.03&&(i="#fdcc8a"),a.fillStyle=i,a.fillRect(b,c+15,d,10),i="#ffffff",f>9?i="#d7301f":f>7?i="#fc8d59":f>4&&(i="#fdcc8a"),a.fillStyle=i,a.fillRect(b,c+30,d,10)):c+=30,i="#ffffff",g<.75?i="#2171b5":g<.85?i="#6baed6":g<.95&&(i="#bdd7e7"),a.fillStyle=i,a.fillRect(b,c,d,10)}var e=c(99),f=c(100),g=c(101);a.exports=function(a,b,c,h){var i=0,j=a,k=null,l=0,m=Math.abs(this.data.max_height),n=Math.abs(this.data.min_height_obs),o=m+n,p=Math.round(100*Math.abs(this.data.max_height)/o),q=Math.round(this.info_content_height*p/100),r=(this.info_content_height,10);for(l=a;l<=b;l++){if(this.data.mmline&&1===this.data.mmline[l-1])this.contexts[c].fillStyle="#cccccc",this.contexts[c].fillRect(i,10,this.zoomed_column,this.height-40);else{var s=this.data.heightArr[l-1],t=0,u=(s.length,0);for(var u in s){var v=[u,s[u]];if(v[1]>.01){var w=parseFloat(v[1])/this.data.max_height,x=i,y=(this.info_content_height-2)*w,z=this.info_content_height-2-t-y,A=null;A="dynamic"===this.colorscheme?this.colors.getColor(v[0],{pos:l-1}):"consensus"===this.colorscheme?this.cmap[l-1][v[0]]||"#7a7a7a":this.colors[v[0]],h?(this.contexts[c].strokeStyle=A,this.contexts[c].strokeRect(x,z,this.zoomed_column,y)):(this.contexts[c].fillStyle=A,this.contexts[c].fillRect(x,z,this.zoomed_column,y)),t+=y}}}this.zoom<.2?r=20:this.zoom<.3&&(r=10),this.options.positionMarker&&l%r==0&&(this.options.show_probs&&f(this.contexts[c],i+this.zoomed_column,this.height-30,parseFloat(this.height),"#dddddd"),f(this.contexts[c],i+this.zoomed_column,0,5),k=this.display_ali_map?this.data.ali_map[l-1]:j,g(this.contexts[c],i-2,10,this.zoomed_column,k,10,!0)),this.options.show_probs&&d(this.contexts[c],i,this.height-42,this.zoomed_column,this.data.insert_probs[l-1],this.data.insert_lengths[l-1],this.data.delete_probs[l-1],this.show_inserts),this.options.show_probs&&(this.show_inserts?e(this.contexts[c],this.height-45,this.total_width):e(this.contexts[c],this.height-15,this.total_width)),this.options.border&&e(this.contexts[c],0,this.total_width),i+=this.zoomed_column,j++}}},function(a,b){"use strict";a.exports=function(a,b){b=b||{},this.value=a,this.width=parseInt(b.width,10)||100,"W"===this.value&&(this.width+=30*this.width/100),this.height=parseInt(b.height,10)||100,this.color=b.color||"#000000",this.fontSize=b.fontSize||138,this.scaled=function(){},this.draw=function(a,b,c,d,e,f){var g=b/this.height,h=c/this.width,i=a.font;a.transform(h,0,0,g,d,e),a.fillStyle=f||this.color,a.textAlign="center",a.font="bold "+this.fontSize+"px Arial",a.fillText(this.value,0,0),a.setTransform(1,0,0,1,0,0),a.fillStyle="#000000",a.font=i}}},function(a,b){"use strict";a.exports={render_x_axis_label:function(){var a="Model Position";this.display_ali_map&&(a="Alignment Column"),this.called_on.find(".logo_xaxis").remove(),this.called_on.prepend('<div class="logo_xaxis" class="centered" style="margin-left:40px"><p class="xaxis_text" style="width:10em;margin:1em auto">'+a+"</p></div>")},render_y_axis_label:function(){this.dom_element.parent().before('<canvas class="logo_yaxis" height="'+this.options.height+'" width="55"></canvas>');var a=this.called_on.find(".logo_yaxis"),b=(Math.abs(this.data.max_height),isNaN(this.data.min_height_obs)||parseInt(this.data.min_height_obs,10),null),c="Information Content (bits)";b=a[0].getContext("2d"),b.beginPath(),b.moveTo(55,1),b.lineTo(40,1),b.moveTo(55,this.info_content_height),b.lineTo(40,this.info_content_height),b.moveTo(55,this.info_content_height/2),b.lineTo(40,this.info_content_height/2),b.lineWidth=1,b.strokeStyle="#666666",b.stroke(),b.fillStyle="#666666",b.textAlign="right",b.font="bold 10px Arial",b.textBaseline="top",b.fillText(parseFloat(this.data.max_height).toFixed(1),38,0),b.textBaseline="middle",b.fillText(parseFloat(this.data.max_height/2).toFixed(1),38,this.info_content_height/2),b.fillText("0",38,this.info_content_height),"score"===this.data.height_calc&&(c="Score (bits)"),b.save(),b.translate(5,this.height/2-20),b.rotate(-Math.PI/2),b.textAlign="center",b.font="normal 12px Arial",b.fillText(c,1,0),b.restore(),b.fillText("occupancy",55,this.info_content_height+7),this.show_inserts&&(b.fillText("ins. prob.",50,280),b.fillText("ins. len.",46,296))}}},function(a,b,c){"use strict";var d=c(15);a.exports=function(a,b,c){a.find(".logo_settings_switch, .logo_settings .close").on("click",function(a){a.preventDefault(),d(".logo_settings").toggle()}),a.find(".logo_reset").on("click",function(a){a.preventDefault(),b.changeZoom({target:b.default_zoom})}),a.find(".logo_change").on("click",function(a){a.preventDefault()}),a.find(".logo_zoomin").on("click",function(a){a.preventDefault(),b.changeZoom({distance:.1,direction:"+"})}),a.find(".logo_zoomout").on("click",function(a){a.preventDefault(),b.changeZoom({distance:.1,direction:"-"})}),a.find(".logo_scale").on("change",function(a){b.toggleScale(this.value)}),a.find(".logo_color").on("change",function(a){b.toggleColorscheme(this.value)}),a.find(".logo_ali_map").on("change",function(a){b.toggleAliMap(this.value)}),a.find(".logo_position").on("change",function(){this.value.match(/^\d+$/m)&&b.scrollToColumn(this.value,1)}),c.on("dblclick",function(c){console.log("dblclick",b),offset=b.logo_graphic.offset(),x=parseInt(c.pageX-offset.left,10),window_position=c.pageX-a.parent().offset().left,col=b.columnFromCoordinates(x),console.log("col",col),current=b.zoom,current<1?b.changeZoom({target:1,offset:window_position,column:col}):b.changeZoom({target:.3,offset:window_position,column:col})}),d(document).on(a.attr("id")+".scrolledTo",function(a,c,d,e){b.render({target:c})}),d(document).on("keydown",function(a){a.ctrlKey||(61!==a.which&&107!==a.which||(zoom+=.1,b.changeZoom({distance:.1,direction:"+"})),109!==a.which&&0!==a.which||(zoom-=.1,b.changeZoom({distance:.1,direction:"-"})))})}},function(a,b,c){"use strict";var d=c(15);a.exports=function(a,b){var c=d('<form class="logo_form"><fieldset><label for="position">Column number</label><input type="text" name="position" class="logo_position"></input><button class="button logo_change">Go</button></fieldset></form>'),e=d('<div class="logo_settings"></div>');if(e.append('<span class="close">x</span>'),a.scale_height_enabled&&a.data.max_height_obs<a.data.max_height_theory){var f="",g="",h="",i="";a.data.max_height_obs===a.data.max_height?f="checked":g="checked"}var j='<fieldset><legend>Scale</legend><label><input type="radio" name="scale" class="logo_scale" value="obs" '+f+"/>Maximum Observed "+i+'</label></br><label><input type="radio" name="scale" class="logo_scale" value="theory" '+g+"/>Maximum Theoretical "+h+"</label></fieldset>";if(e.append(j),"score"!==a.data.height_calc&&"aa"===a.data.alphabet&&a.data.probs_arr){var k=null,l=null,m="",n="";"default"===a.colorscheme?k="checked":l="checked",b.help&&(m='<a class="help" href="/help#colors_default" title="Each letter receives its own color."><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>',n='<a class="help" href="/help#colors_consensus" title="Letters are colored as in Clustalx and Jalview, with colors depending on composition of the column."><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>');var o='<fieldset><legend>Color Scheme</legend><label><input type="radio" name="color" class="logo_color" value="default" '+k+"/>Default "+m+'</label></br><label><input type="radio" name="color" class="logo_color" value="consensus" '+l+"/>Consensus Colors "+n+"</label></fieldset>";e.append(o)}if(a.data.ali_map){var p=null,q=null,r="",s="";0===a.display_ali_map?p="checked":q="checked",b.help&&(r='<a class="help" href="/help#coords_model" title="The coordinates along the top of the plot show the model position."><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>',s='<a class="help" href="/help#coords_ali" title="The coordinates along the top of the plot show the column in the alignment associated with the model"><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>');var t='<fieldset><legend>Coordinates</legend><label><input type="radio" name="coords" class="logo_ali_map" value="model" '+p+"/>Model "+r+'</label></br><label><input type="radio" name="coords" class="logo_ali_map" value="alignment" '+q+"/>Alignment "+s+"</label></fieldset>";e.append(t)}var u=d('<div class="logo_controls"></div>');return a.zoom_enabled&&u.append('<button class="logo_zoomout button">-</button><button class="logo_zoomin button">+</button>'),e.children().length>0&&(u.append('<button class="logo_settings_switch button">Settings</button>'),u.append(e)),c.append(u),c}},function(a,b){"use strict";a.exports={A:"#FF9966",C:"#009999",D:"#FF0000",E:"#CC0033",F:"#00FF00",G:"#f2f20c",H:"#660033",I:"#CC9933",K:"#663300",L:"#FF9933",M:"#CC99CC",N:"#336666",P:"#0099FF",Q:"#6666CC",R:"#990000",S:"#0000FF",T:"#00FFFF",V:"#FFCC33",W:"#66CC66",Y:"#006600"}},function(a,b){"use strict";a.exports={A:"#cbf751",C:"#5ec0cc",G:"#ffdf59",T:"#b51f16",U:"#b51f16"}},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(91),e=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(d),f=c(14),g=c(65),h=f.extend({className:"biojs_msa_gapview",initialize:function(a){return this.g=a.g,this.listenTo(this.g.zoomer,"change:stepSize change:labelWidth change:columnWidth",this.render),this.listenTo(this.g.vis,"change:labels change:metacell",this.render),this.listenTo(this.g.columns,"change:scaling",this.render),this.listenTo(this.model,"reset",this.render),this.manageEvents()},render:function(){var a=this.g.stats.gaps();g.removeAllChilds(this.el);var b=this.model.getMaxLength(),c=this.g.zoomer.get("columnWidth"),d=c*(b-this.g.columns.get("hidden").length),f=e.base({height:20,width:d});f.style.display="inline-block",f.style.cursor="pointer";for(var h=this.g.zoomer.get("stepSize"),i=this.g.columns.get("hidden"),j=0,k=0;k<b;)if(i.indexOf(k)>=0)k+=h;else{d=c*h;for(var l=0,m=h-1,n=0;0<m?n<=m:n>=m;0<m?n++:n--)l+=a[k];var o=l/h*20,p=e.rect({x:j,y:20-o,width:d-c/4,height:o,style:"stroke:red;stroke-width:1;"});p.rowPos=k,f.appendChild(p),j+=d,k+=h}return this.el.appendChild(f),this},_onclick:function(a){var b=this,c=a.target.rowPos,d=this.g.zoomer.get("stepSize");return function(){for(var e=[],f=d-1,g=0;0<f?g<=f:g>=f;0<f?g++:g--)e.push(b.g.trigger("gap:click",{rowPos:c+g,evt:a}));return e}()},manageEvents:function(){var a={};return this.g.config.get("registerMouseClicks")&&(a.click="_onclick"),this.g.config.get("registerMouseHover")&&(a.mousein="_onmousein",a.mouseout="_onmouseout"),this.delegateEvents(a),this.listenTo(this.g.config,"change:registerMouseHover",this.manageEvents),this.listenTo(this.g.config,"change:registerMouseClick",this.manageEvents)},_onmousein:function(a){var b=this.g.zoomer.get("stepSize"*a.rowPos);return this.g.trigger("gap:mousein",{rowPos:b,evt:a})},_onmouseout:function(a){var b=this.g.zoomer.get("stepSize"*a.rowPos);return this.g.trigger("gap:mouseout",{rowPos:b,evt:a})}});b.default=h},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(2),e=c(14),f=c(61),g=c(15),h=e.extend({className:"biojs_msa_overviewbox",tagName:"canvas",initialize:function(a){return this.g=a.g,this.listenTo(this.g.zoomer,"change:boxRectWidth change:boxRectHeight change:overviewboxPaddingTop",this.rerender),this.listenTo(this.g.selcol,"add reset change",this.rerender),this.listenTo(this.g.columns,"change:hidden",this.rerender),this.listenTo(this.g.colorscheme,"change:showLowerCase",this.rerender),this.listenTo(this.model,"change",_.debounce(this.rerender,5)),this.color=this.g.colorscheme.getSelectedScheme(),this.listenTo(this.g.colorscheme,"change:scheme",function(){return this.color=this.g.colorscheme.getSelectedScheme(),this.rerender()}),this.dragStart=[]},events:{click:"_onclick",mousedown:"_onmousedown"},rerender:function(){if(!this.g.config.get("manualRendering"))return this.render()},render:function(){this._createCanvas(),this.el.textContent="overview",this.el.style.marginTop=this.g.zoomer.get("overviewboxPaddingTop"),this.ctx.fillStyle="#ffffff",this.ctx.fillRect(0,0,this.el.width,this.el.height);for(var a=this.g.zoomer.get("boxRectWidth"),b=this.g.zoomer.get("boxRectHeight"),c=this.g.columns.get("hidden"),d=this.g.colorscheme.get("showLowerCase"),e=-b,f=this.model.length,g=0;g<f;g++)if(this.model.at(g)){var h=this.model.at(g).get("seq"),i=0;if(e+=b,this.model.at(g).get("hidden"))this.ctx.fillStyle="grey",this.ctx.fillRect(0,e,h.length*a,b);else for(var j=0;j<h.length;j++){var k=h[j];d&&(k=k.toUpperCase());var l=this.color.getColor(k,{pos:j});c.indexOf(j)>=0&&(l="grey"),
void 0!==l&&null!==l&&(this.ctx.fillStyle=l,this.ctx.fillRect(i,e,a,b)),i+=a}}return this._drawSelection()},_drawSelection:function(){var a=this;if(!(this.dragStart.length>0)||this.prolongSelection){var b=this.g.zoomer.get("boxRectWidth"),c=this.g.zoomer.get("boxRectHeight"),d=c*this.model.length;this.ctx.fillStyle="#666666",this.ctx.globalAlpha=.9;for(var e=this.g.selcol.length,f=0;f<e;f++){(function(e){var f=a.g.selcol.at(e);if(!f)return"continue";var g=void 0,h=void 0;"column"===f.get("type")?a.ctx.fillRect(b*f.get("xStart"),0,b*(f.get("xEnd")-f.get("xStart")+1),d):"row"===f.get("type")?(g=a.model.filter(function(a){return a.get("id")===f.get("seqId")})[0],h=a.model.indexOf(g),a.ctx.fillRect(0,c*h,b*g.get("seq").length,c)):"pos"===f.get("type")&&(g=a.model.filter(function(a){return a.get("id")===f.get("seqId")})[0],h=a.model.indexOf(g),a.ctx.fillRect(b*f.get("xStart"),c*h,b*(f.get("xEnd")-f.get("xStart")+1),c))})(f)}return this.ctx.globalAlpha=1}},_onclick:function(a){return this.g.trigger("meta:click",{seqId:this.model.get("id",{evt:a})})},_onmousemove:function(a){if(0!==this.dragStart.length){this.render(),this.ctx.fillStyle="#666666",this.ctx.globalAlpha=.9;var b=this._calcSelection(f.abs(a));return this.ctx.fillRect(b[0][0],b[1][0],b[0][1]-b[0][0],b[1][1]-b[1][0]),a.preventDefault(),a.stopPropagation()}},_onmousedown:function(a){var b=this;return this.dragStart=f.abs(a),this.dragStartRel=f.rel(a),a.ctrlKey||a.metaKey?this.prolongSelection=!0:this.prolongSelection=!1,g(document.body).on("mousemove.overmove",function(a){return b._onmousemove(a)}),g(document.body).on("mouseup.overup",function(a){return b._onmouseup(a)}),this.dragStart},_calcSelection:function(a){for(var b=[a[0]-this.dragStart[0],a[1]-this.dragStart[1]],c=0;c<=1;c++)b[c]=this.dragStartRel[c]+b[c];for(var d=[[this.dragStartRel[0],b[0]],[this.dragStartRel[1],b[1]]],e=0;e<=1;e++)d[e][1]<d[e][0]&&(d[e]=[d[e][1],d[e][0]]),d[e][0]=Math.max(d[e][0],0);return d},_endSelection:function(a){if(g(document.body).off(".overmove"),g(document.body).off(".overup"),0!==this.dragStart.length){for(var b=this._calcSelection(a),c=0;c<=1;c++)b[0][c]=Math.floor(b[0][c]/this.g.zoomer.get("boxRectWidth"));for(var c=0;c<=1;c++)b[1][c]=Math.floor(b[1][c]/this.g.zoomer.get("boxRectHeight"));b[0][1]=Math.min(this.model.getMaxLength()-1,b[0][1]),b[1][1]=Math.min(this.model.length-1,b[1][1]);for(var e=[],f=b[1][0];f<=b[1][1];f++){var h={seqId:this.model.at(f).get("id"),xStart:b[0][0],xEnd:b[0][1]};e.push(new d.possel(h))}return this.dragStart=[],this.prolongSelection?this.g.selcol.add(e):this.g.selcol.reset(e),this.g.zoomer.setLeftOffset(b[0][0]),this.g.zoomer.setTopOffset(b[1][0])}},_onmouseup:function(a){return this._endSelection(f.abs(a))},_onmouseout:function(a){return this._endSelection(f.abs(a))},_createCanvas:function(){var a=this.g.zoomer.get("boxRectWidth"),b=this.g.zoomer.get("boxRectHeight");return this.el.height=this.model.length*b,this.el.width=this.model.getMaxLength()*a,this.ctx=this.el.getContext("2d"),this.el.style.overflow="auto",this.el.style.cursor="crosshair"}});b.default=h},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(2),e=c(16),f=c(44),g=(c(65),e.extend({initialize:function(a){return this.g=a.g,this.listenTo(this.g.user,"change:searchText",function(a,b){return this.search(b),this.render()}),this.sel=[],this.selPos=0},events:{scroll:"_sendScrollEvent"},render:function(){this.renderSubviews(),this.el.className="biojs_msa_searchresult";var a=this.g.user.get("searchText");return void 0!==a&&null!==a&&a.length>0&&(0===this.sel.length?this.el.textContent="no selection found":(this.resultBox=f.mk("div"),this.resultBox.className="biojs_msa_searchresult_ovbox",this.updateResult(),this.el.appendChild(this.resultBox),this.el.appendChild(this.buildBtns()))),this},updateResult:function(){var a="search pattern: "+this.g.user.get("searchText");a+=", selection: "+(this.selPos+1);var b=this.sel[this.selPos];return a+=" (",a+=b.get("xStart")+" - "+b.get("xEnd"),a+=", id: "+b.get("seqId"),a+=")",this.resultBox.textContent=a},buildBtns:function(){var a=this,b=f.mk("button");b.textContent="Prev",b.addEventListener("click",function(){return a.moveSel(-1)});var c=f.mk("button");c.textContent="Next",c.addEventListener("click",function(){return a.moveSel(1)});var d=f.mk("button");d.textContent="All",d.addEventListener("click",function(){return a.g.selcol.reset(a.sel)});var e=f.mk("div");return e.appendChild(b),e.appendChild(c),e.appendChild(d),e.className="biojs_msa_searchresult_row",e},moveSel:function(a){var b=this.selPos+a;return b<0||b>=this.sel.length?-1:(this.focus(b),this.selPos=b,this.updateResult())},focus:function(a){var b=this.sel[a],c=b.get("xStart");return this.g.zoomer.setLeftOffset(c),this.g.selcol.reset([b])},search:function(a){var b,c=new RegExp(a,"gi"),e=[],f=b=100042;return this.model.each(function(a){var b=a.get("seq");return function(){for(var g,h=[];g=c.exec(b);){var i=g.index,j={xStart:i,xEnd:i+g[0].length-1,seqId:a.get("id")};e.push(new d.possel(j)),h.push(f=Math.min(i,f))}return h}()}),this.g.selcol.reset(e),f===b&&(f=0),this.g.zoomer.setLeftOffset(f),this.sel=e}}));b.default=g},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(3),e=c(14),f=c(15),g=e.extend({initialize:function(a){return this.g=a.g,this.listenTo(this.g.zoomer,"change:columnWidth",this.render),this.toggleClass="msa-hide",this.isVisible=!0,this},attributes:{class:"biojs_msa_scale"},events:{"change input":"updateSlider","click button.msa-btn-close":"hide","click button.msa-btn-open":"show","click button[data-action]":"clickButton"},template:(0,d.template)('\t<div class="msa-scale-minimised">\t  <button class="btn msa-btn msa-btn-open">Zoom</button>\t</div>\t<div class="msa-scale-maximised">\t  <button class="btn msa-btn msa-btn-close" style="float:right">&times; close</button>\t  <div>\t  <input type="range" \t    data-provide="slider" \t    min="<%= min %>" \t    max="<%= max %>" \t    step="<%= step %>" \t    value="<%= value %>" \t  >\t  </div>\t  <div class="btngroup msa-btngroup">\t    <button class="btn msa-btn" data-action="smaller"><span class="glyphicon-zoom-out"></span>-</button>\t    <button class="btn msa-btn" data-action="bigger"><span class="glyphicon-zoom-in"></span>+</button>\t    <button class="btn msa-btn" data-action="reset"><span class="glyphicon-repeat"></span>reset</button>\t  </div>\t</div>\t'),render:function(){var a=this.model.getSizeRange(),b={value:this.model.getSize(),min:a[0],max:a[1],step:this.model.step||1};return this.$el.html(this.template(b)),this.isVisible?this.show():this.hide(),this},updateSlider:function(a){var b=a.target,c=parseInt(f(b).val());this.model.setSize(c)},clickButton:function(a){console.log("clickButton",this,a);var b=a.target,c=f(b).data("action");this.model[c];return"function"==typeof this.model[c]&&this.model[c](),this},hide:function(){this.isVisible=!1,this.$el.find(".msa-scale-minimised").removeClass(this.toggleClass),this.$el.find(".msa-scale-maximised").addClass(this.toggleClass)},show:function(){this.isVisible=!1,this.$el.find(".msa-scale-minimised").addClass(this.toggleClass),this.$el.find(".msa-scale-maximised").removeClass(this.toggleClass)}});b.default=g},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),e=c(3),f=c(67),g=c(114),h=function(a){return a&&a.__esModule?a:{default:a}}(g),i=function(a){return this.msa=a,this},j={guessFileFromText:function(a,b){if(void 0===a||null===a)return console.warn("invalid file format"),["","error"];switch((0,h.default)(a,b)){case"clustal":var c=f.clustal,d="seqs";break;case"fasta":c=f.fasta,d="seqs";break;case"newick":d="newick";break;case"gff":c=f.gff,d="features";break;default:alert("Unknown file format. Please contact us on Github for help.")}return[c,d]},parseText:function(a,b){var c=this.guessFileFromText(a,b),e=d(c,2),f=e[0],g=e[1];if("seqs"===g){return[f.parse(a),g]}if("features"===g){return[f.parseSeqs(a),g]}return[a,g]},importFiles:function(a){var b=this;return function(){for(var c=[],d=a.length-1,e=0;0<d?e<=d:e>=d;0<d?e++:e--){var f=a[e],g=new FileReader;g.onload=function(a){return b.importFile(a.target.result)},c.push(g.readAsText(f))}return c}()},importFile:function(a,b){var c=this;b=b||{},b.name=a.name;var e=this.parseText(a,b),f=d(e,2),g=f[0],h=f[1];return"error"===h?(alert("An error happened"),"error"):("seqs"===h?(this.msa.seqs.reset(g),this.msa.g.config.set("url","userimport"),this.msa.g.trigger("url:userImport")):"features"===h?this.msa.seqs.addFeatures(g):"newick"===h?this.msa.u.tree.loadTree(function(){return c.msa.u.tree.showTree(a)}):alert("Unknown file!"),a.name)},importURL:function(a,b){var c=this;return a=this.msa.u.proxy.corsURL(a),this.msa.g.config.set("url",a),(0,f.xhr)({url:a,timeout:0},function(d,e,f){return d?console.error(d):"error"!==c.importFile(f,{url:a})?(c.msa.g.trigger("import:url",a),b?b():void 0):void 0})}};(0,e.extend)(i.prototype,j),b.default=i},function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(a,b){for(var c=b.name||b.url||"",d=c.split("."),e=d[d.length-1]||"",f=0;f<g.length;f++){var h=g[f](a,e);if(h)return h}return"unknown"};var c=function(a,b){return("CLUSTAL"===a.substring(0,7)||"clustal"==b||"aln"==b)&&"clustal"},d=function(a,b){return(">"===a.substring(0,1)||"fasta"==b||"fa"==b)&&"fasta"},e=function(a,b){return("("===a.substring(0,1)||"nwk"==b)&&"newick"},f=function(a,b){if(a.length<=10)return!1;var c=a.split("\n");return c[0].indexOf("gff")>=0||b.indexOf("gff")>=0?"gff":c[0].indexOf("#")<0&&2===c[0].split("\t").length&&"gff"},g=[c,d,e,f]},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(3),e=c(18),f=(function(a){a&&a.__esModule}(e),function(a){return this.msa=a,this}),g={loadTree:function(a){return this.msa.g.package.loadPackages(["msa-tnt","biojs-io-newick"],a)},showTree:function(a){function b(a){if(null!=a.children)a.children.forEach(function(a){return b(a)});else{var c=i.filter(function(b){return b.name===a.name})[0];null!=c&&("number"==typeof c.id?(c.ids=["s"+(c.id+1)],a.name="s"+(c.id+1)):a.name=c.id)}}var d=window.require("biojs-io-newick"),e=window.require("msa-tnt");if("string"==typeof a)var f=d.parse_newick(a);else f=a;var g,h=new e.selections;0===this.msa.el.getElementsByClassName("tnt_groupDiv").length?(g=document.createElement("div"),this.msa.el.appendChild(g)):(console.log("A tree already exists. It will be overridden."),g=this.msa.el.getElementsByClassName("tnt_groupDiv")[0].parentNode,g.innerHTML="");var i=this.msa.seqs.toJSON();b(f);var j=e.app({seqs:i,tree:f});new e.adapters.tree({model:j,el:g,sel:h}),new e.adapters.msa({model:j,sel:h,msa:this.msa});return j.models.forEach(function(a){return delete a.collection,Object.setPrototypeOf(a,c(6).Model.prototype)}),this.msa.seqs.reset(j.models),console.log(this.msa.seqs)},require:function(a){function b(b){return a.apply(this,arguments)}return b.toString=function(){return a.toString()},b}(function(a){return c(116)(a)})};(0,d.extend)(f.prototype,g),b.default=f},function(a,b,c){function d(a){return c(e(a))}function e(a){return f[a]||function(){throw new Error("Cannot find module '"+a+"'.")}()}var f={"./bmath":117,"./bmath.js":117,"./exporter":118,"./exporter.js":118,"./file":113,"./file.js":113,"./index":121,"./index.js":121,"./loader":43,"./loader.js":43,"./proxy":122,"./proxy.js":122,"./recognize":114,"./recognize.js":114,"./seqgen":123,"./seqgen.js":123,"./svg":91,"./svg.js":91,"./tree":115,"./tree.js":115};d.keys=function(){return Object.keys(f)},d.resolve=e,a.exports=d,d.id=116},function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=function(){function a(){c(this,a)}return d(a,null,[{key:"randomInt",value:function(a,b){if(void 0===b||null===b){var c=[0,a];a=c[0],b=c[1]}if(a>b){var d=[b,a];a=d[0],b=d[1]}return Math.floor(Math.random()*(b-a+1)+a)}},{key:"uniqueId",value:function(){for(var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,b="";b.length<a;)b+=Math.random().toString(36).substr(2);return b.substr(0,a)}},{key:"getRandomInt",value:function(a,b){return Math.floor(Math.random()*(b-a+1))+a}}]),a}();b.default=e},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(67),e=c(3),f=c(119),g=c(120),h={openInJalview:function(a,b){if("."===a.charAt(0)&&(a=document.URL.substr(0,document.URL.lastIndexOf("/"))+"/"+a),a.indexOf("http")<0){a="http://"+window.location.hostname+a}a=encodeURIComponent(a);var c="http://www.jalview.org/services/launchApp?open="+a;return c+="&colour="+b,window.open(c,"_blank")},publishWeb:function(a,b){var c=d.fasta.write(a.seqs.toJSON());c=encodeURIComponent(c);return(0,d.xhr)({method:"POST",body:"sprunge="+c,uri:"http://sprunge.biojs.net",headers:{"Content-Type":"application/x-www-form-urlencoded"}},function(a,c,d){var e=d.trim();return b(e)})},shareLink:function(a,b){var c=a.g.config.get("importURL"),d=function(a){var c="http://msa.biojs.net/app/?seq="+a;if(b)return b(c)};return c?d(c):h.publishWeb(a,d)},saveAsFile:function(a,b){var c=d.fasta.write(a.seqs.toJSON()),e=new Blob([c],{type:"text/plain"});return g(e,b)},saveSelection:function(a,b){var c=a.g.selcol.pluck("seqId");if(console.log(c),c.length>0){c=a.seqs.filter(function(a){return c.indexOf(a.get("id"))>=0});for(var e=c.length-1,f=0;0<e?f<=e:f>=e;0<e?f++:f--)c[f]=c[f].toJSON()}else c=a.seqs.toJSON(),console.warn("no selection found");var h=d.fasta.write(c),i=new Blob([h],{type:"text/plain"});return g(i,b)},saveAnnots:function(a,b){var c=a.seqs.map(function(a){if(c=a.get("features"),0!==c.length){var b=a.get("name");return c.each(function(a){return a.set("seqname",b)}),c.toJSON()}});c=(0,e.flatten)((0,e.compact)(c)),console.log(c);var f=d.gff.exportLines(c),h=new Blob([f],{type:"text/plain"});return g(h,b)},saveAsImg:function(a,b){var c=a.getView("stage").getView("body").getView("seqblock").el;if(void 0!==c&&null!==c){var d=c.toDataURL("image/png");return g(f(d),b,"image/png")}}};b.default=h},function(a,b){"use strict";var c=window.HTMLCanvasElement&&window.HTMLCanvasElement.prototype,d=window.Blob&&function(){try{return Boolean(new Blob)}catch(a){return!1}}(),e=d&&window.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(a){return!1}}(),f=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,g=(d||f)&&window.atob&&window.ArrayBuffer&&window.Uint8Array&&function(a){var b,c,g,h,i,j;for(b=a.split(",")[0].indexOf("base64")>=0?atob(a.split(",")[1]):decodeURIComponent(a.split(",")[1]),c=new ArrayBuffer(b.length),g=new Uint8Array(c),h=0;h<b.length;h+=1)g[h]=b.charCodeAt(h);return i=a.split(",")[0].split(":")[1].split(";")[0],d?new Blob([e?g:c],{type:i}):(j=new f,j.append(c),j.getBlob(i))};window.HTMLCanvasElement&&!c.toBlob&&(c.mozGetAsFile?c.toBlob=function(a,b,d){a(d&&c.toDataURL&&g?g(this.toDataURL(b,d)):this.mozGetAsFile("blob",b))}:c.toDataURL&&g&&(c.toBlob=function(a,b,c){a(g(this.toDataURL(b,c)))})),a.exports=g},function(a,b,c){(function(a){"use strict";var b=b||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(a){if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var b=a.document,c=function(){return a.URL||a.webkitURL||a},d=b.createElementNS("http://www.w3.org/1999/xhtml","a"),e=!a.externalHost&&"download"in d,f=function(c){var d=b.createEvent("MouseEvents");d.initMouseEvent("click",!0,!1,a,0,0,0,0,0,!1,!1,!1,!1,0,null),c.dispatchEvent(d)},g=a.webkitRequestFileSystem,h=a.requestFileSystem||g||a.mozRequestFileSystem,i=function(b){(a.setImmediate||a.setTimeout)(function(){throw b},0)},j=0,k=[],l=function(){for(var a=k.length;a--;){var b=k[a];"string"==typeof b?c().revokeObjectURL(b):b.remove()}k.length=0},m=function(a,b,c){b=[].concat(b);for(var d=b.length;d--;){var e=a["on"+b[d]];if("function"==typeof e)try{e.call(a,c||a)}catch(a){i(a)}}},n=function(b,i){var l,n,o,p=this,q=b.type,r=!1,s=function(){var a=c().createObjectURL(b);return k.push(a),a},t=function(){m(p,"writestart progress write writeend".split(" "))},u=function(){!r&&l||(l=s()),n?n.location.href=l:window.open(l,"_blank"),p.readyState=p.DONE,t()},v=function(a){return function(){if(p.readyState!==p.DONE)return a.apply(this,arguments)}},w={create:!0,exclusive:!1};return p.readyState=p.INIT,i||(i="download"),e?(l=s(),d.href=l,d.download=i,f(d),p.readyState=p.DONE,void t()):(a.chrome&&q&&"application/octet-stream"!==q&&(o=b.slice||b.webkitSlice,b=o.call(b,0,b.size,"application/octet-stream"),r=!0),g&&"download"!==i&&(i+=".download"),("application/octet-stream"===q||g)&&(n=a),h?(j+=b.size,void h(a.TEMPORARY,j,v(function(a){a.root.getDirectory("saved",w,v(function(a){var c=function(){a.getFile(i,w,v(function(a){a.createWriter(v(function(c){c.onwriteend=function(b){n.location.href=a.toURL(),k.push(a),p.readyState=p.DONE,m(p,"writeend",b)},c.onerror=function(){var a=c.error;a.code!==a.ABORT_ERR&&u()},"writestart progress write abort".split(" ").forEach(function(a){c["on"+a]=p["on"+a]}),c.write(b),p.abort=function(){c.abort(),p.readyState=p.DONE},p.readyState=p.WRITING}),u)}),u)};a.getFile(i,{create:!1},v(function(a){a.remove(),c()}),v(function(a){a.code===a.NOT_FOUND_ERR?c():u()}))}),u)}),u)):void u())},o=n.prototype,p=function(a,b){return new n(a,b)};return o.abort=function(){var a=this;a.readyState=a.DONE,m(a,"abort")},o.readyState=o.INIT=0,o.WRITING=1,o.DONE=2,o.error=o.onwritestart=o.onprogress=o.onwrite=o.onabort=o.onerror=o.onwriteend=null,a.addEventListener("unload",l,!1),p.unload=function(){l(),a.removeEventListener("unload",l,!1)},p}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||(void 0).content),c=window.define;void 0===c&&void 0!==window.almond&&"define"in window.almond&&(c=window.almond.define),void 0!==a&&null!==a?a.exports=b:void 0!==c&&null!==c&&null!=c.amd&&c("saveAs",[],function(){return b})}).call(b,c(4)(a))},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0}),b.exporter=b.file=b.seqgen=b.proxy=b.bmath=void 0;var e=c(117),f=d(e),g=c(122),h=d(g),i=c(123),j=d(i),k=c(113),l=d(k),m=c(118),n=d(m);b.bmath=f.default,b.proxy=h.default,b.seqgen=j.default,b.file=l.default,b.exporter=n.default},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(3),e=function(a){return this.g=a.g,this},f={corsURL:function(a){return document.URL.indexOf("localhost")>=0&&"/"===a[0]?a:"."===a.charAt(0)||"/"===a.charAt(0)?a:(this.g.config.get("importProxyStripHttp")&&(a=a.replace("http://",""),a=a.replace("https://","")),a=this.g.config.get("importProxy")+a)}};(0,d.extend)(e.prototype,f),b.default=e},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(117),e=function(a){return a&&a.__esModule?a:{default:a}}(d),f=c(124).seq,g=c(126),h={_generateSequence:function(a){for(var b="",c=a-1,d=0;0<c?d<=c:d>=c;0<c?d++:d--)b+=h.getRandomChar();return b},getDummySequences:function(a,b){var c=[];void 0!==a&&null!==a||(a=e.default.getRandomInt(3,5)),void 0!==b&&null!==b||(b=e.default.getRandomInt(50,200));for(var d=1;1<a?d<=a:d>=a;1<a?d++:d--)c.push(new f(h._generateSequence(b),"seq"+d,"r"+d));return c},getRandomChar:function(a){var b=a||"ABCDEFGHIJKLMNOPQRSTUVWXYZ";return b.charAt(Math.floor(Math.random()*b.length))},genConservedSequences:function(a,b,c){var d=[];void 0!==a&&null!==a||(a=e.default.getRandomInt(3,5)),void 0!==b&&null!==b||(b=e.default.getRandomInt(50,200)),c=c||"ACDEFGHIKLMNPQRSTVWY---";for(var i=1;1<a?i<=a:i>=a;1<a?i++:i--)d[i-1]="";for(var j=1,k=b-1,l=0;0<k?l<=k:l>=k;0<k?l++:l--){l%3==0&&(j=e.default.getRandomInt(50,100)/100);for(var m=[],n=a-1,o=0;0<n?o<=n:o>=n;0<n?o++:o--){for(var p=0,q=void 0;p<100;){q=h.getRandomChar(c);var r=g(m);if(r.addSeq(q),p++,Math.abs(j-r.scale(r.conservation())[0])<.2)break}d[o]+=q,m.push(q)}}for(var s=[],t=1;1<a?t<=a:t>=a;1<a?t++:t--)s.push(new f(d[t-1],"seq"+t,"r"+t));return s}};b.default=h},function(a,b,c){"use strict";a.exports.seq=c(125)},function(a,b){"use strict";a.exports=function(a,b,c){this.seq=a,this.name=b,this.id=c,this.meta={}}},function(a,b,c){"use strict";var d=c(11),e=function a(b,c){if(!this||this.constructor!==a)return new a(b);if(void 0===b||"string"==typeof b)throw new TypeError("you need to give the seq stat an array");this.resetSeqs(b),this.alphabetSize=4,this._useBackground=!1,this.useGaps=!1,this.ignoredChars=["-","*"],d.extend(this,c)};e.prototype.addSeq=function(a){this.seqs.push(a),this._reset()},e.prototype.removeSeq=function(a){"number"==typeof a?this.seqs.splice(a,1):d.each(this.seqs,function(b,c){a===b&&this.seqs.splice(c,1)}.bind(this)),this._reset()},e.prototype.addSeqs=function(a){a.forEach(function(a){this.addSeq(a)}.bind(this))},e.prototype.resetSeqs=function(a){if(this.seqs=[],!a instanceof Array||"at"in a){this.mseqs=a;var b=function(){var a=this.mseqs.pluck("seq");this.resetSeqs(a)};a.on("add change reset ",b,this),b.call(this)}else this.addSeqs(a),this._reset(),this.trigger("reset")};var f=["consensus","frequency","maxLength","ic","gaps"];e.prototype._reset=function(){for(var a=0;a<f.length;a++)this["_"+f[a]]=void 0;this._identity=void 0,this._background=void 0},e.prototype.setBackground=function(a){this._useBackground=a,this._reset()},e.prototype.useBackground=function(){this.setBackground(!0)},e.prototype.setDNA=function(){this.alphabetSize=4},e.prototype.setProtein=function(){this.alphabetSize=20},f.forEach(function(a){e.prototype[a]=function(){return void 0===this["_"+a]&&(this["_"+a]=this[a+"Calc"]()),this["_"+a]}}),e.prototype.identity=function(a){var b;return(void 0===this._identity||a)&&(b=this.identityCalc(a),this._identity=void 0),this._identity||b},e.prototype.background=function(){return void 0!==this.bg?this.bg:(void 0===this._background&&this.backgroundCalc(),this._background)},e.prototype.frequencyCalc=function(a){var b,c;b=new Array(this.maxLength()),c=new Array(this.seqs.length);var e=this.ignoredChars;return void 0!==a&&a.all&&(e=[]),d.each(this.seqs,function(a){d.each(a,function(a,d){e.indexOf(a)>=0||(void 0===b[d]&&(b[d]={}),void 0===b[d][a]&&(b[d][a]=0),b[d][a]++,void 0===c[d]&&(c[d]=0),c[d]++)})}),d.each(b,function(a,e){return d.each(a,function(a,d){return b[e][d]=a/c[e]})}),this._frequency=b,b},e.prototype.backgroundCalc=function(){var a={},b=0;return d.each(this.seqs,function(c){d.each(c,function(c){return void 0===a[c]&&(a[c]=0),a[c]++,b++})}),a=d.mapValues(a,function(a){return a/b}),this._background=a,a},e.prototype.icCalc=function(){var a=this.frequency();if(this._useBackground)var b=this.background();var c=this.ignoredChars,e=this._useBackground,f=d.map(a,function(a){return d.reduce(a,function(a,d,f){return c.indexOf(f)>=0?a:(e&&(d/=b[f]),a-d*(Math.log(d)/Math.log(2)))},0)});return this._ic=f,f},e.prototype.conservation=function(a){var b=this.ic(),c=this.gaps(),e=this;a=a||this.alphabetSize;var f=Math.log(a)/Math.log(2),g=0;return d.map(b,function(a){var b=f-a;return e.useGaps&&(b*=1-c[g++]),b})},e.prototype.conservResidue=function(a){var b,c=a?a.alphabetSize:void 0,e=this.ignoredChars;b=void 0!==a&&a.scaled?this.scale(this.conservation(c)):this.conservation(c);var f,g=this.frequency();return d.map(g,function(a,c){f=d.reject(d.keys(a),function(a){return e.indexOf(a)>=0});var g={};return d.each(f,function(d){g[d]=a[d]*b[c]}),g})},e.prototype.conservResidue2=function(a){var b=this.frequency(),c=this.conservation(a),e=this.background();return d.map(b,function(a,f){return d.map(a,function(a){var g=d.reduce(b[f],function(a,b){return a+b/e[f]},0);return a/e[f]/g*c[f]},0)})},e.prototype.scale=function(a,b){b=b||this.alphabetSize;var c=Math.log(b)/Math.log(2);return d.map(a,function(a){return a/c})},e.prototype.maxLengthCalc=function(){return 0===this.seqs.length?0:d.max(this.seqs,function(a){return a.length}).length},e.prototype.consensusCalc=function(){var a=new Array(this.maxLength());return d.each(this.seqs,function(b){d.each(b,function(b,c){void 0===a[c]&&(a[c]={}),void 0===a[c][b]&&(a[c][b]=0),a[c][b]++})}),this._consensus=d.reduce(a,function(a,b){var c;return c=d.keys(b),a+=d.max(c,function(a){return b[a]})},""),this._consensus},e.prototype.identityCalc=function(a){var b=a||this.consensus();return this._identity=this.seqs.map(function(a){for(var c=0,d=0,e=0;e<a.length;e++)"-"!==a[e]&&"-"!==b[e]&&(d++,a[e]===b[e]&&c++);return c/d}),this._identity},e.prototype.gapsCalc=function(){var a=this.maxLength();if(a<=1||void 0===a)return[];var b=new Array(this.maxLength());return d.each(this.seqs,function(a){d.each(a,function(a,c){void 0===b[c]&&(b[c]={g:0,t:0}),a="-"===a?"g":"t",b[c][a]++})}),this._gaps=d.map(b,function(a){return a.g/(a.g+a.t)}),this._gaps},d.mixin({mapValues:function(a,b){return d.object(d.keys(a),d.map(a,b))}}),c(57).mixin(e.prototype),a.exports=e},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(19);Object.defineProperty(b,"seq",{enumerable:!0,get:function(){return d(e).default}});var f=c(18);Object.defineProperty(b,"seqcol",{enumerable:!0,get:function(){return d(f).default}});var g=c(21);Object.defineProperty(b,"feature",{enumerable:!0,get:function(){return d(g).default}});var h=c(20);Object.defineProperty(b,"featurecol",{enumerable:!0,get:function(){return d(h).default}})},function(a,b,c){var d=c(129);"string"==typeof d&&(d=[[a.id,d,""]]);c(131)(d,{});d.locals&&(a.exports=d.locals)},function(a,b,c){b=a.exports=c(130)(),b.push([a.id,"/* BASIC */\n\n.biojs_msa_div {\n\n}\n\n.biojs_msa_stage {\n    cursor: default;\n    line-height: normal;\n    font-family: Helvetica;\n}\n\n.biojs_msa_seqblock {\n    cursor: move;\n}\n\n.biojs_msa_layer{\n    display: block;\n    white-space: nowrap;\n}\n\n.biojs_msa_labels {\n    color:black;\n    display: inline-block;\n    white-space: nowrap;\n    cursor: pointer;\n    vertical-align:middle;\n    overflow: hidden;\n    text-overflow: clip;\n    /*margin:auto; */\n    text-align: left;\n}\n\n.biojs_msa_header {\n    white-space: nowrap;\n    text-align: left;\n}\n\n.biojs_msa_labelrow:before {\n    content: '';\n    display: inline-block;\n    width: 0;\n    height: 100%;\n    vertical-align: middle;\n}\n\n.biojs_msa_labelrow{\n    height: 100%;\n}\n\n.biojs_msa_labelblock::-webkit-scrollbar, .biojs_msa_rheader::-webkit-scrollbar{\n    // FIX scrollbars on Mac\n    -webkit-appearance: none;\n    width: 7px;\n    height: 7px;\n}\n.biojs_msa_labelblock::-webkit-scrollbar-thumb, .biojs_msa_rheader::-webkit-scrollbar-thumb{\n    border-radius: 4px;\n    background-color: rgba(0,0,0,.5);\n    box-shadow: 0 0 1px rgba(255,255,255,.5);\n}\n\n/* END BASIC */\n/* Marker */\n\n.biojs_msa_marker {\n  color: #999;\n  white-space: nowrap;\n}\n\n.biojs_msa_marker .msa-col-header {\n  cursor: pointer;\n  cursor: pointer;\n  text-align: center;\n}\n\n.biojs_msa_marker .msa-col-header:hover {\n  color: #f00;\n}\n\n/* END Marker */\n/* Menubar */\n\n.smenubar .smenubar_alink {\n    background: #3498db;\n    background-image: -webkit-linear-gradient(top, #3498db, #2980b9);\n    background-image: -moz-linear-gradient(top, #3498db, #2980b9);\n    background-image: -ms-linear-gradient(top, #3498db, #2980b9);\n    background-image: -o-linear-gradient(top, #3498db, #2980b9);\n    background-image: linear-gradient(to bottom, #3498db, #2980b9);\n    -webkit-border-radius: 28;\n    -moz-border-radius: 28;\n    border-radius: 28px;\n    font-family: Arial;\n    color: #ffffff;\n    padding: 3px 10px 3px 10px;\n    margin-left: 10px;\n    text-decoration: none;\n}\n.smenubar {\n    display: inline-block;\n}\n\n.smenubar .smenubar_alink:hover {\n    cursor: pointer;\n}\n\n\n/* jquery dropdown CSS */\n\n.smenu-dropdown {\n    position: absolute;\n    z-index: 9;\n    display: none;\n    margin-left: 5px;\n    margin-top: 22px;\n}\n\n.smenu-dropdown .smenu-dropdown-menu,\n.smenu-dropdown .smenu-dropdown-panel {\n    min-width: 160px;\n    max-width: 360px;\n    list-style: none;\n    background: #FFF;\n    border: solid 1px #DDD;\n    border: solid 1px rgba(0, 0, 0, .2);\n    border-radius: 6px;\n    box-shadow: 0 5px 10px rgba(0, 0, 0, .2);\n    overflow: visible;\n    padding: 4px 0;\n    margin: 0;\n}\n\n.smenu-dropdown .smenu-dropdown-panel {\n    padding: 10px;\n}\n\n.smenu-dropdown.smenu-dropdown-scroll .smenu-dropdown-menu,\n.smenu-dropdown.smenu-dropdown-scroll .smenu-dropdown-panel {\n    max-height: 358px;\n    overflow: auto;\n}\n\n.smenu-dropdown .smenu-dropdown-menu li {\n    display: block;\n    color: #555;\n    text-decoration: none;\n    line-height: 18px;\n    padding: 3px 15px;\n    white-space: nowrap;\n}\n\n.smenu-dropdown .smenu-dropdown-menu li:hover {\n    background-color: #08C;\n    color: #FFF;\n    cursor: pointer;\n}\n\n.smenu-dropdown .smenu-dropdown-menu .smenu-dropdown-divider {\n    font-size: 1px;\n    border-top: solid 1px #E5E5E5;\n    padding: 0;\n    margin: 5px 0;\n}\n\n/* END Menubar */\n\n.biojs_msa_div {\n  position: relative;\n}\n\n.biojs_msa_scale {\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  background-color: #fff;\n  box-shadow: 0 2px 3px #999;\n  border-radius: 3px;\n  margin: 5px 0 0 auto;\n  padding: 5px;\n  text-align: center;\n}\n.biojs_msa_scale .msa-btngroup {\n  margin: 5px auto 0;\n}\n.biojs_msa_scale [type=\"range\"] {\n  cursor: pointer;\n}\n\n.biojs_msa_scale .msa-scale-minimised {\n}\n.biojs_msa_scale .msa-scale-minimised {\n}\n.biojs_msa_scale .msa-btn-close {\n  text-align: right;\n  font-size: 0.8em;\n  padding: 2px;\n}\n.biojs_msa_scale .msa-btn-open {\n  background-color: #fff;\n}\n\n.biojs_msa_scale .msa-hide {\n  display: none;\n}\n\n.msa-btn {\n  cursor: pointer;\n  font-size: 1.1em;\n  display: inline-block;\n  padding: 2px 8px;\n  margin-bottom: 0;\n  border: 1px solid transparent;\n  border-radius: 4px;\n  box-sizing: border-box;\n}\n.msa-btn:hover {\n  background-color: #ddd;\n}\n",""])},function(a,b){"use strict";a.exports=function(){var a=[];return a.toString=function(){for(var a=[],b=0;b<this.length;b++){var c=this[b];c[2]?a.push("@media "+c[2]+"{"+c[1]+"}"):a.push(c[1])}return a.join("")},a.i=function(b,c){"string"==typeof b&&(b=[[null,b,""]]);for(var d={},e=0;e<this.length;e++){var f=this[e][0];"number"==typeof f&&(d[f]=!0)}for(e=0;e<b.length;e++){var g=b[e];"number"==typeof g[0]&&d[g[0]]||(c&&!g[2]?g[2]=c:c&&(g[2]="("+g[2]+") and ("+c+")"),a.push(g))}},a}},function(a,b,c){function d(a,b){for(var c=0;c<a.length;c++){var d=a[c],e=n[d.id];if(e){e.refs++;for(var f=0;f<e.parts.length;f++)e.parts[f](d.parts[f]);for(;f<d.parts.length;f++)e.parts.push(j(d.parts[f],b))}else{for(var g=[],f=0;f<d.parts.length;f++)g.push(j(d.parts[f],b));n[d.id]={id:d.id,refs:1,parts:g}}}}function e(a){for(var b=[],c={},d=0;d<a.length;d++){var e=a[d],f=e[0],g=e[1],h=e[2],i=e[3],j={css:g,media:h,sourceMap:i};c[f]?c[f].parts.push(j):b.push(c[f]={id:f,parts:[j]})}return b}function f(a,b){var c=q(),d=t[t.length-1];if("top"===a.insertAt)d?d.nextSibling?c.insertBefore(b,d.nextSibling):c.appendChild(b):c.insertBefore(b,c.firstChild),t.push(b);else{if("bottom"!==a.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.")
;c.appendChild(b)}}function g(a){a.parentNode.removeChild(a);var b=t.indexOf(a);b>=0&&t.splice(b,1)}function h(a){var b=document.createElement("style");return b.type="text/css",f(a,b),b}function i(a){var b=document.createElement("link");return b.rel="stylesheet",f(a,b),b}function j(a,b){var c,d,e;if(b.singleton){var f=s++;c=r||(r=h(b)),d=k.bind(null,c,f,!1),e=k.bind(null,c,f,!0)}else a.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(c=i(b),d=m.bind(null,c),e=function(){g(c),c.href&&URL.revokeObjectURL(c.href)}):(c=h(b),d=l.bind(null,c),e=function(){g(c)});return d(a),function(b){if(b){if(b.css===a.css&&b.media===a.media&&b.sourceMap===a.sourceMap)return;d(a=b)}else e()}}function k(a,b,c,d){var e=c?"":d.css;if(a.styleSheet)a.styleSheet.cssText=u(b,e);else{var f=document.createTextNode(e),g=a.childNodes;g[b]&&a.removeChild(g[b]),g.length?a.insertBefore(f,g[b]):a.appendChild(f)}}function l(a,b){var c=b.css,d=b.media;if(d&&a.setAttribute("media",d),a.styleSheet)a.styleSheet.cssText=c;else{for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(document.createTextNode(c))}}function m(a,b){var c=b.css,d=b.sourceMap;d&&(c+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(d))))+" */");var e=new Blob([c],{type:"text/css"}),f=a.href;a.href=URL.createObjectURL(e),f&&URL.revokeObjectURL(f)}var n={},o=function(a){var b;return function(){return void 0===b&&(b=a.apply(this,arguments)),b}},p=o(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),q=o(function(){return document.head||document.getElementsByTagName("head")[0]}),r=null,s=0,t=[];a.exports=function(a,b){b=b||{},void 0===b.singleton&&(b.singleton=p()),void 0===b.insertAt&&(b.insertAt="bottom");var c=e(a);return d(c,b),function(a){for(var f=[],g=0;g<c.length;g++){var h=c[g],i=n[h.id];i.refs--,f.push(i)}if(a){d(e(a),b)}for(var g=0;g<f.length;g++){var i=f[g];if(0===i.refs){for(var j=0;j<i.parts.length;j++)i.parts[j]();delete n[i.id]}}}};var u=function(){var a=[];return function(b,c){return a[b]=c,a.filter(Boolean).join("\n")}}()}]);